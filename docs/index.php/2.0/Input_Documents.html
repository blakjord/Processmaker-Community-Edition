<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../../index.html" />
<link rel="shortcut icon" href="https://wiki.processmaker.com/themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="Input_Documents.html" />
<link rel="shortlink" href="../../node/83.html" />
<title>2.0 - Input Documents | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/system/system.base.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.messages.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.theme.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/aggregator/aggregator.css?s743n7");
@import url("https://wiki.processmaker.com/modules/comment/comment.css?s743n7");
@import url("https://wiki.processmaker.com/modules/field/theme/field.css?s743n7");
@import url("https://wiki.processmaker.com/modules/node/node.css?s743n7");
@import url("https://wiki.processmaker.com/modules/search/search.css?s743n7");
@import url("https://wiki.processmaker.com/modules/toc_filter/toc_filter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/user/user.css?s743n7");
@import url("https://wiki.processmaker.com/modules/views/css/views.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.css?s743n7");
@import url("https://wiki.processmaker.com/modules/ctools/css/ctools.css?s743n7");
@import url("https://wiki.processmaker.com/sites/all/modules/geshifilter/geshifilter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/panels/css/panels.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus_default.css?s743n7");
@import url("https://wiki.processmaker.com/modules/fivestar/css/fivestar.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/style.css?s743n7");
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/media.css?s743n7");
</style>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/jquery/1.9/jquery.min.js?v=1.9.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/drupal.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.bgiframe.js?v=2.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.hoverIntent.js?v=0.5"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/superfish.js?v=1.4.8"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/nice_menus.js?v=1.0"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/ui/external/jquery.cookie.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/misc/jquery.form.min.js?v=2.69"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/ajax.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/js/jquery_update.js?v=0.0.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/toc_filter/toc_filter.js?s743n7"></script>
<script type="text/javascript" src="../../sites/all/modules/colorbox/js/colorbox.js@s743n7"></script>
<script type="text/javascript" src="../../sites/all/modules/colorbox/styles/default/colorbox_style.js@s743n7"></script>
<script type="text/javascript" src="../../sites/all/modules/google_analytics/googleanalytics.js@s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/progress.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.ajax.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-1.10.2.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/custom.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"U0TZtHnM1j0NET15uqlfOVvfAWmKdJKEZ_KWx-ucLCw","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-83 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../../index.html" title="Home"><img src="../../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="Input_Documents.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-w4uF0uCFwflp2Ubqz0jiFO3rrm1GMlVx8Lm5Q2SrhHQ" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">2.0 - Input Documents</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../../3.2/Input_Documents.html" class="">3.8</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.7</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.6</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.5</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.4</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.3</a></li><li><a href="../../3.2/Input_Documents.html" class="">3.2</a></li><li><a href="../../3.0/Input_Documents.html" class="">3.1</a></li><li><a href="../../3.0/Input_Documents.html" class="">3.0</a></li><li><a  class="active-version">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="2.0 - Input Documents" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="Input_Documents.html" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 2.0 - Input Documents 1/5</option><option value="40">Give 2.0 - Input Documents 2/5</option><option value="60" selected="selected">Give 2.0 - Input Documents 3/5</option><option value="80">Give 2.0 - Input Documents 4/5</option><option value="100">Give 2.0 - Input Documents 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.3</span></span> <span class="total-votes">(<span >6</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-nkUgUR-UkfpZOKNGjFYy83j8NY5FbkaBqgkds_ToVhM" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="Input_Documents.html#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="Input_Documents.html#Overview">Overview</a></li>
<li class="toc"><a href="Input_Documents.html#Configuring_Input_Document_Maximum_Size">Configuring Input Document Maximum Size</a></li>
<li class="toc"><a href="Input_Documents.html#Creating_Input_Documents">Creating Input Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Inserting_Input_Documents_into_the_Process">Inserting Input Documents into the Process</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#As_a_Step">As a Step</a></li>
<li class="toc"><a href="Input_Documents.html#In_a_DynaForm">In a DynaForm</a></li>
</ol>
<li class="toc"><a href="Input_Documents.html#Submitting_Input_Documents">Submitting Input Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Accessing_Input_Documents">Accessing Input Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Input_Document_Storage">Input Document Storage</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#Changing_the_File_Location">Changing the File Location</a></li>
</ol>
<li class="toc"><a href="Input_Documents.html#Input_Documents_in_Triggers">Input Documents in Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#Opening_Input_Document_files_in_Triggers">Opening Input Document files in Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#Opening_after_Uploading_to_a_File_Field">Opening after Uploading to a File Field</a></li>
<li class="toc"><a href="Input_Documents.html#Opening_from_a_Database_Query">Opening from a Database Query</a></li>
</ol>
<li class="toc"><a href="Input_Documents.html#Links_to_Input_Documents">Links to Input Documents</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#Links_to_Input_Document_Files">Links to Input Document Files</a></li>
<li class="toc"><a href="Input_Documents.html#Searching_for_Input_Documents">Searching for Input Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Link_to_an_Input_Document_file_in_a_DynaForm">Link to an Input Document file in a DynaForm</a></li>
<ol class="toc">
<li class="toc"><a href="Input_Documents.html#Example_before_version_2.5.0">Example before version 2.5.0</a></li>
<li class="toc"><a href="Input_Documents.html#Additional_Information_about_the_Input_Document_file">Additional Information about the Input Document file</a></li>
<li class="toc"><a href="Input_Documents.html#Example_for_version_2.5.0_and_later">Example for version 2.5.0 and later</a></li>
</ol>
<li class="toc"><a href="Input_Documents.html#Displaying_Input_Document_images_in_DynaForms">Displaying Input Document images in DynaForms</a></li>
<li class="toc"><a href="Input_Documents.html#Displaying_other_types_of_Input_Documents_in_DynaForms">Displaying other types of Input Documents in DynaForms</a></li>
<li class="toc"><a href="Input_Documents.html#Links_to_multiple_Input_Document_files_in_DynaForms">Links to multiple Input Document files in DynaForms</a></li>
<li class="toc"><a href="Input_Documents.html#Links_to_Input_Document_files_in_Emails_.26_Output_Documents">Links to Input Document files in Emails &amp; Output Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Multiple_Input_Document_files_in_Emails_.26_Output_Documents">Multiple Input Document files in Emails &amp; Output Documents</a></li>
<li class="toc"><a href="Input_Documents.html#Exporting_Links_for_Input_Documents_files_to_a_Database">Exporting Links for Input Documents files to a Database</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>
<p>An Input Document is a box to hold a file or files associated with a particular case. These files can be text documents, spreadsheets, images or any other kind of file. An Input Document can be a hard copy (which has been printed out and stored in a filing cabinet), a digital file which is uploaded to the case, or both. An Input Document can be added as a step in a task or as a <a href="Files.html" title="2.0/Files">file</a> object in a DynaForm.</p>

<h2><span id="Configuring_Input_Document_Maximum_Size">Configuring Input Document Maximum Size</span></h2>
<p>Since uploaded files are stored as files in the harddrive, their size can be as large as allowed by the server's operating system and hard drive. Nonetheless, PHP by default is configured to allow the upload of files no larger than 2MB. To increase the maximum size of uploaded files, <a href="../Changing_the_ProcessMaker_Configuration.html#Editing_the_PHP_configuration" title="Changing the ProcessMaker Configuration">edit your <strong><tt>php.ini</tt></strong> file</a> to allow for larger file uploads.</p>
<p>Look for the "File Uploads" section and set <tt>file_uploads = On</tt> and increase the size of <tt>upload_max_filesize</tt>:</p>

<codeblock>;;;;;;;;;;;;;;;;
; File Uploads ;
;;;;;;;;;;;;;;;;
; Whether to allow HTTP file uploads.
file_uploads = On
; Temporary directory for HTTP uploaded files (will use system default if not specified).
;upload_tmp_dir =
; Maximum allowed size for uploaded files.
upload_max_filesize = 2M
</codeblock>

<p>Uploaded files are passed to the ProcessMaker server as <a href="http://en.wikipedia.org/wiki/POST_%28HTTP%29" rel="nofollow">POST</a> data, whose maximum size by default is 8MB. If larger files need to be uploaded, also increase the size of <tt>post_max_size</tt>:</p>

<codeblock>; Maximum size of POST data that PHP will accept.
post_max_size = 32M
</codeblock>

<h2><span id="Creating_Input_Documents">Creating Input Documents</span></h2>
<p>To create an Input Document, open a process and go to <strong>INPUT DOCUMENTS</strong> submenu. Then, click on the <strong>New</strong> link.</p>
<p><img alt="" height="454" src="../../sites/default/files/Input_definition1.png" width="501"></p>
<p><strong>Form to create a new Input Document in PM 2.5.x</strong></p>
<p><img alt="" height="488" src="../../sites/default/files/CreateInputDocumentPM2.8.png" width="453"></p>
<ul>
    <li><strong>Form to create a new Input Document PM 2.8</strong></li>
</ul>

<p>Define the following fields for the Input Document:</p>
<ul>
    <li><strong>Title</strong>: Enter a title to identify the Input Document.</li>
    <li><strong>Document type</strong>: Select whether the document is digital, printed or can be both digital and printed. If a digital document, the user will asked to upload the document. If printed, the user will be added to provide a description of the document which is presumably exists in physical form.</li>
    <li><strong>Description</strong>: Enter a description of the Input Document, which will help the user better understand its purpose and what type of document should be submitted.</li>
    <li><span id="versioning"><strong>Enable Versioning</strong>: Check this option if needing to keep multiple versions of the Input Document. Versioning is useful if the same Input Document will be submitted multiple times over the course of a case or if needing to maintain an audit trail.</span></li>
    <li><strong>Destination Path</strong>: A new option available in version 1.2-3306Beta on. Create the name of a folder where this Input Document will be placed in <strong>CASES &gt; Documents</strong>. To use a variable in the folder name, click on the <strong>[@#]</strong> button to select a variable.<br>For example: <strong><tt>Receipts_@#USR_USERNAME</tt></strong><br>To place the Input Document inside a subfolder inside other folders, enter a path to that folder, separating each folder with a / (forward slash).<br>For example: <strong><tt>Receipts/@#USR_USERNAME/@#subject_@#date</tt></strong><br>To see a list of Input Documents, Output Documents and attached files found in each folder, go to <strong>CASES &gt; Documents</strong> and click on the folder.<br>Note that the <strong>Destination Path</strong> does not effect <a href="Input_Documents.html#Input_Document_Storage">where Input Documents are stored</a> in the file system. Moreover, all files will be stored inside path where ProcessMaker has been installed, either a local computer or a Server.</li>
    <li><strong>Tags</strong>: Enter the name of the identifying tag(s), which will be associated with this Input Document. To specify more than one tag name, separate each tag name with commas. Click on the <strong>[@#]</strong> button to select a variable which will be used in the tag name.Tags result really useful when <a href="Input_Documents.html#Searching_for_Input_Documents">looking for Input Documents in the ProcessMaker database.</a></li>
    <li><strong>Allowed file extensions</strong>: <font color="#009688">Available in version <strong><font color="dimgrey">2.8.0</font></strong> and later.</font> It is a required field which defines which file extensions are allowed to be uploaded as an Input Document. When uploading a file as an Input Document, ProcessMaker will verify that only files with the specified extension(s) are uploaded. The following format is used to defined allowed file extensions:</li>
</ul>
<div style="margin-left: 20px;">
    <ul>
        <li><tt><strong>*.*</strong></tt> Allows any type of file.</li>
        <li><tt><strong>*.pdf, *.jpg, *.docx</strong></tt> Specific types of files. In order to specify more than one type, separate them using commas.</li>
    </ul>
    <p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> This feature can only be used to verify the file extension, not to specify the allowed filename of an Input Document. For example: <tt>Student_*.pdf</tt> does not validate that all Input Document filenames should start with "<tt>Student_</tt>".</font></p>
    <p>Also, see the <strong>hint</strong> for help defining the extensions:</p>
    <p><img alt="" height="79" src="../../sites/default/files/InputDocumentAllowedFileExtensionsHintPM2.8.png" width="671"></p>
    <dl>
        <dd>In order to use this feature, the <a href="Additional_Configuration.html#Verification_of_files_using_the_fileinfo_extension"
                title="2.0/Additional Server Configuration">fileinfo extension must be enabled</a>. This extension
            not only verifies the extension of the file, but also ensures that the extension matches the file's
            contents, so that the user cannot upload a dangerous file (for example, when an <tt>.exe</tt> file
            has been renamed with the <tt>.jpg</tt> extension):<img alt="" height="144" src="../../sites/default/files/AlertBadFileExtension.png"
                width="362"></dd>
    </dl>
</div>

<ul>
    <li><strong>Maximum file size:</strong> <font color="#009688">Available in version <strong><font color="dimgrey">2.8.0</font></strong> and later.</font> It is a required field which defines in KB or MB the maximum size of the file to be attached. If set to zero, then the file size is unlimited. Nevertheless, the limit is configured inside the <a href="Additional_Configuration.html#Configuring_PHP" title="2.0/Additional Server Configuration"><strong><tt>php.ini</tt></strong> file</a> by the <a href="Additional_Configuration.html#Uploading_large_Input_Documents" title="2.0/Additional Server Configuration"><strong><tt>upload_max_size</tt></strong> setting</a> and that limit is shown in parenthesis when creating an Input Document.</li>
</ul>
<p><img alt="" height="48" src="../../sites/default/files/MaximumFileSizeCreation.png" width="362"></p>
<dl>
    <dd>
        <p>And the maximum size defined for an Input Document is shown in brackets when running a case.</p>
        <p><img alt="" height="72" src="../../sites/default/files/MaximumFileSizeRunningCase.png" width="338"><p>
<p>If the file uploaded is bigger than the size specified the following message is shown:</p>
        <p><img alt="" height="104" src="../../sites/default/files/FileTooLargeMessage.png" width="273"></p>
        <p>After filling out the fields for the new Input Document, click on <strong>Save</strong>.</p>
    </dd>
</dl>

<h2><span id="Inserting_Input_Documents_into_the_Process">Inserting Input Documents into the Process</span></h2>
<p>After creating an input document, then decide where in the process the Input Document can be submitted. Remember that users have the option to upload multiple files for each Input Document.</p>
<p>If an Input Document may need to change over the course of a case, it may be a good idea to have multiple points in the process where the same Input Document can be submitted, so that new versions of the document can be submitted. If <a href="Input_Documents.html#versioning">versioning</a> is enabled, then each version will be preserved, allowing an auditor to see how the document changed over the course of the case.</p>

<h3><span id="As_a_Step">As a Step</span></h3>
<p>To insert an input document as a step inside a task, open the process and right click on a task. Select the <strong>Steps</strong> option from the dropdown menu. In the "Steps Of:" dialogue box which appears, go to the <strong>Steps</strong> tab and click on the <strong>New</strong> link. Select the Input Document from the list and click on the <strong>Select</strong> link. Once an Input Document is added to the list of steps for a task, the order which steps are executed can be changed by clicking on the <strong>Up</strong> and <strong>Down</strong> links.</p>
<p>In some cases, it may not make sense for the user to be asked to submit an Input Document. For example, a process asks users to submit receipts for purchases as Input Documents. If nothing was purchased in the case, then there is no reason to Input Document for the receipts. If an Input Document should not always be executed as a step, then a <a href="../Using_Conditions.html#Conditions_for_Steps" title="Using Conditions">condition can be added</a>. Only if the condition evaluates to "true", then the step will be executed and the user will be asked to submit an Input Document.</p>
<p>To add a condition to an input document, go to the <strong>Conditions</strong> tab in the "Steps Of:" dialogue box and click on the <strong>Edit</strong> link for the Input Document. Enter an condition which will evaluate to either "true" or "false". For more information, see <a href="../Using_Conditions.html" title="Using Conditions">Using Conditions</a>.</p>

<h3><span id="In_a_DynaForm">In a DynaForm</span></h3>
<p>It may be more convenient to directly upload a digital Input Document to a DynaForm, rather than have it execute as a separate step. For example, in a DynaForm where the user fills out information about a purchase, also have the user upload the receipt. From version 1.2-2425 on, it is possible to upload an Input Document to a <a href="Files.html" title="2.0/Files">file</a> object in a DynaForm.</p>
<p>First create an Input Document, then go to a DynaForm and add a <a href="Files.html" title="2.0/Files">file</a> field. When setting the properties for a file field, select the Input Document in the <a href="Files.html#Input" title="2.0/Files">Input</a> dropdown box. To force the user to always upload an Input Document, check the <a href="Common_Field_Properties.html#Required" title="2.0/Common Field Properties">Required</a> option.</p>

<h2><span id="Submitting_Input_Documents">Submitting Input Documents</span></h2>
<p>When a case comes to an Input Document step, a form will appear prompting the user to submit the document.</p>
<p><img alt="" height="327" src="../../sites/default/files/InputDocumentForm2.png" width="499"></p>
<p>If it is a digital document, click on the <strong>Attach</strong> link and then browse for the file to upload. A comment about the Input Document can be added in the <strong>Comments</strong> field. Then click on <strong>Save</strong> to add the new Input Document.</p>
<p><img alt="" height="296" src="../../sites/default/files/AddNewInputDoc3.png" width="543"></p>
<p>If it is a printed document, then enter a description of the document. Additional Input Documents can be added by clicking repeatedly on the <strong>Attach</strong> link. All the added input documents will be displayed in the list.</p>
<p><img alt="" height="278" src="../../sites/default/files/InputDocumentSeveralUploaded4.png" width="707"></p>
<p>If versioning is enabled, new versions of an existing Input Document can be uploaded by clicking on the <strong>New Version</strong> link. To see a list of all the versions for an Input Document, click on its <strong>Version History</strong> link.</p>
<p><img alt="" height="177" src="../../sites/default/files/InputDocumentVersionsList5.png" width="1138"></p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">When an Input Document file is deleted, its status in the <tt>APP_DOCUMENT</tt> table is changed to <tt>'DELETED'</tt>, but its record still exists in the database and its file remains in the ProcessMaker server's file system.</font></p>

<h2><span id="Accessing_Input_Documents">Accessing Input Documents</span></h2>
<p>To view an Input Document for a particular case, go to the <strong>HOME</strong> menu and open the case. Remember that if the logged-in user is not the currently assigned user to work on the case, then <a href="Process_Permissions.html" title="Process Permissions">Process Permissions</a> will need to be granted so the user can view the case or the user will need to be assigned as a <a href="../Process_Supervisors.html" title="Process Supervisors">Process Supervisor</a> and configured for read/write access to the Input Document.</p>
<p>Once the case is open, click on the <strong>Information</strong> submenu at the top and then click on the <strong>Uploaded Documents</strong> button in the sidebar.</p>
<p><img alt="" height="244" src="../../sites/default/files/UploadedDocuemntsInputD.png" width="288"></p>
<p>A dialog box will appear with a list of the Input Documents and attached files for the case. To view a document, click on its <strong>Download</strong> link on the right hand side, so it can be downloaded and opened on the local computer.</p>
<p><img alt="" height="138" src="../../sites/default/files/UploadedDocuemntsInputList.png" width="949"></p>
<p>On the other hand, uploaded documents can be seen by going to <strong>HOME</strong> and at the end of the left menu the option <strong>Documents</strong> will display, all documents uploaded or generated will be placed there:</p>
<p><img alt="" height="297" src="../../sites/default/files/CasesUploadedDocuments1.png" width="1000"></p>

<h2><span id="Input_Document_Storage">Input Document Storage</span></h2>
<p>Information about Input Document files and any other files uploaded while running cases is stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> table. The filename for Input Document files is stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table where the <tt>CON_CATEGORY</tt> field equals '<tt>APP_DOC_FILENAME</tt>'.</p>
<p>To search for all the Input Document files for a particular case, first find the case's unique ID and then use it in the following SQL query:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> D<span style="color: #66cc66;">.*,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT C<span style="color: #66cc66;">,</span> APP_DOCUMENT D <span style="color: #993333; font-weight: bold;">WHERE</span> D<span style="color: #66cc66;">.</span>APP_DOC_UID <span style="color: #66cc66;">=</span> C<span style="color: #66cc66;">.</span>CON_ID<br />
<span style="color: #993333; font-weight: bold;">AND</span> D<span style="color: #66cc66;">.</span>APP_UID <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div></div>

<p>When an Input Document file is uploaded while running a case, it is stored in the file system of the ProcessMaker server. It is renamed with its unique ID, but it retains its original extension.</p>
<p>Input Document files before version 2.5.1 are stored in the file system of the server at:<br>
 &nbsp; &nbsp; <tt><a href="../File_Locations.html#Installation_Directory" title="File Locations">&lt;INSTALL-DIRECTORY&gt;</a>/shared/&lt;WORKSPACE&gt;/files/&lt;CASE-UID&gt;/&lt;CASE-DOCUMENT-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;</tt><br>
Even if versioning isn't enabled, a version number of "_1" is added to the filename.</p>

<p>Input Document files are generally found at the following locations:</p>

<div style="margin-left: 25px;">
    <p><strong>Linux/UNIX:</strong><br>
 &nbsp; &nbsp; <tt>/opt/processmaker/shared/sites/&lt;WORKSPACE&gt;/files/&lt;CASE-UID&gt;/&lt;CASE-DOCUMENT-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;</tt></p>
    <p><strong>Windows:</strong></br>
 &nbsp; &nbsp; <tt><a href="../File_Locations.html#Installation_Directory" title="File Locations">&lt;INSTALL-DIRECTORY&gt;</a>\shared\sites\&lt;WORKSPACE&gt;\files\&lt;CASE-UID&gt;\&lt;CASE-DOCUMENT-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;</tt></p>
</div>

<p>For example, if the Input Document “invoice.pdf” gets assigned the unique ID “1750921524b5d19ec1f1ed1007166182” and is uploaded in the case “4265676974b5d19ce105ac3093028259”, then the document might be found in Linux at:</br>
 &nbsp; &nbsp; <tt>/opt/processmaker/shared/sites/workflow/files/4265676974b5d19ce105ac3093028259/1750921524b5d19ec1f1ed1007166182_1.pdf</tt></p>

<p>In version 2.5.1 and later, an option was added to allow <a href="../Managing_32K_Folders.html">case files to be stored in a series of 3 subdirectories</a> created from the case's unique ID to avoid the 32K file limits of Linux's ext3 file system. In version 3.0 and later, this option is activated by default. Use the <a href="../Internal_Functions_and_Classes.html#G::getPathFromURL.28.29">G::getPathFromUID()</a> method to get the correct path, which may or may not be in subdirectories. </p>

<p>In a trigger, the path to an Input Document file can be determined using the defined constants <code>PATH_DOCUMENT</code> (which would contain a path such as <code>"/opt/processmaker/shared/sites/workflow/files/"</code>) and <code>PATH_SEP</code> (which is <code>'/'</code> or <code>'\'</code>) and the system variable <tt>@@APPLICATION</tt> for the unique ID:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">=</span> <a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$caseId</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$inputDocPath</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;&lt;CASE-DOCUMENT-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;&quot;</span><span style="color: #339933;">;</span></div></div>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">The code <span class="geshifilter"><code class="php geshifilter-php"><a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span></code></span> checks whether the <code>G::getPathFromUID()</code> method exists, before calling it, so this code will not have problems in version 2.5.0 and earlier, which didn't have the <code>G::getPathFromUID()</code> method.</font></p>

<p>The <tt>&lt;CASE-DOCUMENT-UID&gt;</tt>, <tt>&lt;VERSION&gt;</tt>, and <tt>&lt;EXTENSION&gt;</tt> need to be looked up with database queries in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> table or by using the <a href="../ProcessMaker_WSDL_Web_Services.html#inputDocumentList.28.29" title="2.0/ProcessMaker WSDL Web Services">inputDocumentList()</a> web service.</p>

<h3><span id="Changing_the_File_Location">Changing the File Location</span></h3>
<p>If needing to store Input and Output Document files in a different location, such as a NAS, then copy the contents of the <strong><tt>files</tt></strong> directory to the new location and then edit the source code in <strong><tt>workflow/public_html/sysGeneric.php</tt></strong> and change the location of <code>PATH_DOCUMENT</code>, which is defined at line 332:</p>
<p style="margin-left:25px"><strong><font color="red">Warning:</font></strong> <font color="dimgray"> Do not make any other changes to the sysGeneric.php file, or functionality will break. ProcessMaker does not recommend changing ProcessMaker core files. Proceed at your own risk. </font></p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><a href="http://php.net/define"><span style="color: #990000;">define</span></a><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'PATH_DOCUMENT'</span><span style="color: #339933;">,</span> PATH_DATA_SITE <span style="color: #339933;">.</span> <span style="color: #0000ff;">'files/'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>For example, to store files at a NAS mounted drive at <strong><tt>/media/nas/processmaker</tt></strong>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><a href="http://php.net/define"><span style="color: #990000;">define</span></a><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'PATH_DOCUMENT'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'/media/nas/processmaker/'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Make sure to include the forward slash in Linux/UNIX or the backward slash in Windows at the end of the path.</p>

<h2><span id="Input_Documents_in_Triggers">Input Documents in Triggers</span></h2>
<p>It is possible to create triggers to manipulate Input Documents files. See the examples listed below.</p>

<p style="margin-left:25px"><strong><font color="green">Note:</strong></font><font color="dimgray"> In version 2.5.2 and later, when a trigger is assigned to be executed <strong><i>after</i></strong> an Input Document step, the trigger is executed <b><i>before</i></b> the file is saved and processed. In previous versions, the trigger was executed <strong><i>after</i></strong> an input document file was uploaded and stored in the database. If no file was uploaded, then the trigger wasn't executed.</font></p>
<p>Once the UID for the Input Document definition is known, then the following code can be used in a trigger to look up the unique ID for the first Input Document which has been uploaded to the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docDef</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'13045566556a6ba777875a4016280183'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to UID for the input document definition</span><br />
<span style="color: #000088;">$case</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> &nbsp; &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//UID for the current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_DOC_UID FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$case</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docDef</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//check if document found:</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>DocUid <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>DocUid <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>To create an array of the unique IDs of all the Input Documents files for the current case:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//set to the UID for the Input Document:</span><br />
<span style="color: #000088;">$docDef</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'13027240856a7f04516b3e1011191907'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$case</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> &nbsp; &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//UID for the current case</span><br />
<span style="color: #339933;">@=</span>DocUids <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_DOC_UID FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$case</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docDef</span>' &quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span> <span style="color: #666666; font-style: italic;">//check if document found</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@=</span>DocUids<span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Once the unique ID for the case, the unique ID for the Input Document file, its version number, and its original file extension is known, then the file can be opened with PHP's <a href="http://php.net/manual/en/function.file-get-contents.php">file_get_contents()</a> or <a href="http://php.net/manual/en/function.file.php">file()</a> function.</p>

<h3><span id="Opening_Input_Document_files_in_Triggers">Opening Input Document files in Triggers</span></h3>
<p>To open a digital Input Document file which has been uploaded to a case, it is first necessary to obtain the Unique ID for the Input Document definition. This UID can be found in a number of ways:In version 1.2-2985 or later, open the list of Input Documents for a process and clicking on a document's <strong>UID</strong> link. Before version 2.0, run a case and examine the URL in the web browser when arriving at the step for the Input Document. Examine the  <strong><tt>wf_&lt;WORKSPACE&gt;.INPUT_DOCUMENT.INP_DOC_UID</tt></strong> field in the database. Examine the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT.CON_ID</tt></strong> field while searching for <code>CON_CATEGORY='INP_DOC_TITLE' AND CON_VALUE='<i><strong>input document title</strong></i>'</code></p>
<p><img alt="" height="107" src="../../sites/default/files/LinkShowingLastInputDocumentFile.png"></p>

<h4><span id="Opening_after_Uploading_to_a_File_Field">Opening after Uploading to a File Field</span></h4>
<p>If an Input Document file has been uploaded to a <a href="Files.html" title="2.0/Files">file</a> field in a DynaForm, then Input Document file can be opened using the case variable created by the file field. For instance, if a DynaForm has a file field named "Invoice" which is associated with an Input Document, then the following code in a subsequent trigger could access the file:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//find the assigned UID for the uploaded file:</span><br />
<span style="color: #000088;">$invoiceFile</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>Invoice<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID, AD.DOC_VERSION FROM CONTENT C, APP_DOCUMENT AD &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;WHERE C.CON_VALUE = '<span style="color: #006699; font-weight: bold;">$invoiceFile</span>' AND AD.APP_DOC_UID = C.CON_ID AND AD.APP_UID = '<span style="color: #006699; font-weight: bold;">$caseId</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">=</span> <a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$caseId</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.'</span> <span style="color: #339933;">.</span> <a href="http://php.net/pathinfo"><span style="color: #990000;">pathinfo</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$invoiceFile</span><span style="color: #339933;">,</span> PATHINFO_EXTENSION<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$invoiceContents</span> <span style="color: #339933;">=</span> <a href="http://php.net/file_get_contents"><span style="color: #990000;">file_get_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$invoiceContents</span> <span style="color: #339933;">!=</span> <span style="color: #009900; font-weight: bold;">FALSE</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">/* process contents of file */</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h4><span id="Opening_from_a_Database_Query">Opening from a Database Query</span></h4>
<p>An Input Document file from any case can be opened with information obtained by querying the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> and <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> tables.</p>
<p>For instance, to open all Input Document files which were uploaded by the current user in the last 30 days for the current process and replace the string "%%DUE_DATE%%" with today's date in all the files:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//Look up the process unique ID or use the @@PROCESS system variable:</span><br />
<span style="color: #000088;">$processId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$userId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$find</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'%%DUE_DATE%%'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$today</span> <span style="color: #339933;">=</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;d-m-Y&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Today's date in a format like &quot;12-31-2012&quot;</span><br />
<span style="color: #000088;">$monthAgo</span> <span style="color: #339933;">=</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Y-m-d'</span><span style="color: #339933;">,</span> <a href="http://php.net/strtotime"><span style="color: #990000;">strtotime</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;-1 month&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//date 1 month ago, formatted like &quot;2012-12-31&quot;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID, AD.DOC_VERSION, CON_VALUE AS FILENAME<br />
&nbsp; &nbsp;FROM CONTENT C, APP_DOCUMENT AD, APPLICATION A<br />
&nbsp; &nbsp;WHERE AD.USR_UID='<span style="color: #006699; font-weight: bold;">$userId</span>' AND AD.APP_DOC_CREATE_DATE &gt;= '<span style="color: #006699; font-weight: bold;">$monthAgo</span>' AND<br />
&nbsp; &nbsp;AD.APP_UID=A.APP_UID AND A.PRO_UID='<span style="color: #006699; font-weight: bold;">$processId</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">=</span> <a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$caseId</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.'</span> <span style="color: #339933;">.</span> <a href="http://php.net/pathinfo"><span style="color: #990000;">pathinfo</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$invoiceFile</span><span style="color: #339933;">,</span> <span style="color: #000088;">$doc</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$fileContents</span> <span style="color: #339933;">=</span> <a href="http://php.net/file_get_contents"><span style="color: #990000;">file_get_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span> or<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to open file '<span style="color: #006699; font-weight: bold;">$path</span>'!<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//if file contains $find, then replace it:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/strpos"><span style="color: #990000;">strpos</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fileContents</span><span style="color: #339933;">,</span> <span style="color: #000088;">$find</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">!==</span> <span style="color: #009900; font-weight: bold;">false</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$fileContents</span> <span style="color: #339933;">=</span> <a href="http://php.net/str_replace"><span style="color: #990000;">str_replace</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$find</span><span style="color: #339933;">,</span> <span style="color: #000088;">$today</span><span style="color: #339933;">,</span> <span style="color: #000088;">$fileContents</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace date</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="http://php.net/file_put_contents"><span style="color: #990000;">file_put_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #339933;">,</span> <span style="color: #000088;">$fileContents</span><span style="color: #009900;">&#41;</span> or<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to write to file '<span style="color: #006699; font-weight: bold;">$path</span>'!<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="Links_to_Input_Documents">Links to Input Documents</span></h3>
<p>An Input Document (and its list of files) which has been assigned as a step in a task, can be viewed with the following URL:<br>
 &nbsp; &nbsp; <tt>http://&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE&gt;/&lt;LANG&gt;/&lt;SKIN&gt;/cases/cases_Step?TYPE=INPUT_DOCUMENT&amp;UID=&lt;STEP-UID&gt;&amp;POSITION=&lt;STEP-NUMBER&gt;&amp;ACTION=VIEW</tt></p>

<p>To open an Input Document so that files can be added and deleted, use the following URL:<br>
 &nbsp; &nbsp; <tt>http://&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE&gt;/&lt;LANG&gt;/&lt;SKIN&gt;/cases/cases_Step?TYPE=INPUT_DOCUMENT&amp;UID=&lt;STEP-UID&gt;&amp;POSITION=&lt;STEP-NUMBER&gt;&amp;ACTION=ATTACH</tt></p>

<p>The <tt>&lt;STEP-UID&gt;</tt> is the unique ID for the step and the <tt>&lt;POSITION&gt;</tt> is the positive integer for the step in the task, which starts counting from 1. These values can be found by going to <strong>ADMIN &gt; Web Services</strong> and clicking on <a href="../ProcessMaker_WSDL_Web_Services.html#Testing_ProcessMaker.27s_WSDL_Web_Services" title="ProcessMaker WSDL Web Services">the <strong>[test]</strong> link</a> for the <a href="../ProcessMaker_WSDL_Web_Services.html#Task_List" title="ProcessMaker WSDL Web Services">taskList()</a> and <a href="../ProcessMaker_WSDL_Web_Services.html#Task_Case" title="ProcessMaker WSDL Web Services">taskCase()</a> web services. Alternatively, the UID can be <a href="../Consulting_the_ProcessMaker_databases.html#Finding_ProcessMaker_objects" title="Consulting the ProcessMaker databases">looked up</a> in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table and POSITION can be looked up in the <strong><tt>wf_&lt;WORKSPACE&gt;.STEP.STEP_POSITION</tt></strong> field. The easiest way to find the right URL is to turn on <a href="../Configuration_File_env.ini.html#Time_Logging" title="Configuration File env.ini">Time Logging</a> and run a case while looking at the output in the log file.</p>

<p>For example, to open an Input Document with the UID "7388202124f0e1384e1ad89013210097" for viewing which is the second step in a task:<br>
 &nbsp; &nbsp; <tt>http://example.com/sysworkflow/en/classic/cases/cases_Step?TYPE=INPUT_DOCUMENT&amp;UID=<strong>7388202124f0e1384e1ad89013210097</strong>&amp;POSITION=<strong>2</strong>&amp;ACTION=VIEW</tt></p>

<p>If this URL is entered in a web browser without an open session of ProcessMaker, then the user will be redirected to the login screen before opening the Input Document. Remember that the logged-in user will not be able to access the Input Document and its files if he/she doesn't have rights to open the case. The user needs to be the designated user to work on the current task in the case. Otherwise, the user will need to have been assigned <a href="Process_Permissions.html" title="Process Permissions">Process Permissions</a> to view the Input Document and/or be a <a href="../Process_Supervisors.html" title="Process Supervisors">Process Supervisor</a> to change the files in the Input Document.</p>

<h4><span id="Links_to_Input_Document_Files">Links to Input Document Files</span></h4>
<p>Each Input Document can contain a variable number of files. Input Documents files (or attached files) can be accessed with the URL:<br>
 &nbsp; &nbsp; <tt>http://&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE&gt;/&lt;LANG&gt;/&lt;SKIN&gt;/cases/cases_ShowDocument?a=&lt;CASE-DOCUMENT-UID&gt;</tt></p>

<p>For example:<br>
 &nbsp; &nbsp; <tt>http://mycompany.com/sysworkflow/en/classic/cases/cases_ShowDocument?a=4699401854d8262f569e9a1070221206</tt></p>

<p>If versioning has been enabled, the version number (which starts counting from the number 1) can also be included in the URL:<br>
 &nbsp; &nbsp; <tt>http://&lt;IP-ADDRESS&gt;/sys&lt;WORKSPACE&gt;/&lt;LANG&gt;/&lt;SKIN&gt;/cases/cases_ShowDocument?a=&lt;CASE-DOCUMENT-UID&gt;&amp;v=&lt;VERSION-NO&gt;</tt></p>

<h4><span id="Searching_for_Input_Documents">Searching for Input Documents</span></h4>
<p>If using an external application or script, the unique ID for the case document can be found with the <a href="../ProcessMaker_WSDL_Web_Services.html#Input_Document_List" title="ProcessMaker WSDL Web Services">inputDocumentList()</a> web service. Inside a trigger or a DynaForm, the unique IDs for input document files can be looked up with the following SQL query:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>
<p>To find the Input Document files for a specified case:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>
<p>To find the files for a specified Input Document and specified case, which was uploaded by a specified user:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;INPUT_DOC_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;USER_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>
<p>Input Documents can be marked by <i>tags</i>, which provide an easy way to find related Input Documents under <strong>HOME &gt; Documents</strong>. The tags are stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.APP_DOC_TAGS</tt></strong> field for each Input Document file and multiple tags are separated by commas. To find all Input Document files for a case with a specified tag:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; &nbsp;APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_TAGS <span style="color: #993333; font-weight: bold;">LIKE</span> <span style="color: #ff0000;">'%&lt;TAG&gt;%'</span></div></div>
<p>To find all Input Document files created between a certain date range:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; &nbsp;APP_DOC_CREATE_DATE <span style="color: #66cc66;">&gt;=</span> <span style="color: #ff0000;">'&lt;YYYY-MM-DD HH:MM:SS&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_CREATE_DATE <span style="color: #66cc66;">&lt;=</span> <span style="color: #ff0000;">'&lt;YYYY-MM-DD HH:MM:SS&gt;'</span></div></div>
<p>To find both the UID of the case document and its original filename, query the <strong><tt>CONTENT</tt></strong> table:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_ID<span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT AD<span style="color: #66cc66;">,</span> CONTENT C<br />
&nbsp; <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ATTACHED'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; AD<span style="color: #66cc66;">.</span>APP_DOC_UID<span style="color: #66cc66;">=</span>C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'APP_DOC_FILENAME'</span> <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_VALUE<span style="color: #66cc66;">&lt;&gt;</span><span style="color: #ff0000;">''</span></div></div>
<p>To find the UID of the case document and the comment entered when the file was uploaded, query the <strong><tt>CONTENT</tt></strong> table:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_ID<span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT AD<span style="color: #66cc66;">,</span> CONTENT C<br />
&nbsp; <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; AD<span style="color: #66cc66;">.</span>APP_DOC_UID<span style="color: #66cc66;">=</span>C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'APP_DOC_COMMENT'</span> <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_VALUE<span style="color: #66cc66;">&lt;&gt;</span><span style="color: #ff0000;">''</span></div></div>
<p>Remember that multiple files can be uploaded to an Input Document, so queries may return multiple records. If reading the result of a query in a trigger, then write code to loop through all the returned records in the result.</p>

<p>If the Input Document is configured to allow multiple versions of the same Input Document file, then also look for the record with the highest positive integer in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.DOC_VERSION</tt></strong> field. (The counting starts from the number 1.)</p>

<p>To find the most recent version(s) of input document file(s) for a specified case:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;INPUT_DOC_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span><br />
&nbsp; <span style="color: #993333; font-weight: bold;">AND</span> DOC_VERSION <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#40;</span><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #993333; font-weight: bold;">MAX</span><span style="color: #66cc66;">&#40;</span>DOC_VERSION<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;INPUT_DOC_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span><span style="color: #66cc66;">&#41;</span></div></div>

<h4><span id="Link_to_an_Input_Document_file_in_a_DynaForm">Link to an Input Document file in a DynaForm</span></h4>
<p>To insert a link to a single Input Document file inside a DynaForm, create a trigger which uses <a href="../ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a> to look up the unique ID for the uploaded file in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.APP_DOC_UID</tt></strong> field. Then, the filename can be found in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT.CON_VALUE</tt></strong> field, by searching the file's unique ID in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT.CON_ID</tt></strong> field and when <code>CONTENT.CON_CATEGORY='APP_DOC_FILENAME'</code>. Use the file's unique ID to construct the URL to access the document and assign that URL to a case variable which can be passed to the DynaForm holding the link field. Also assign the filename to another case variable which can be passed to the DynaForm.</p>

<p>Before version 2.5.0, the only way to set the URL and label of link fields was to create two hidden fields in the DynaForm and set the values of those two hidden fields to the filename of the file and the URL to download the file. Then use JavaScript to read the value of the two hidden fields when the DynaForm loads and assign the URL and label to the link.</p>

<p>In version 2.5.0 and later, it isn't necessary to create two hidden fields and use JavaScript to set the URL and label of the link field. Instead, the link field can automatically be set to the URL of the Input Document file and display its label by creating two case variables named <code>@@<i><strong>link-field-name</strong></i></code> and <code>@@<i><strong>link-field-name</strong></i>_label</code>.</p>

<h5><span id="Example_before_version_2.5.0">Example before version 2.5.0</span></h5>
<p>This example displays a link in a DynaForm to the last Input Document file which was uploaded for the current case. First, create the following trigger which looks up the last uploaded file and constructs a URL to access that file. The URL and the filename for the Input Document file are inserted in two case variables named <code>@@inputFileUrl</code> and <code>@@inputFileName</code>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//ID for current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_ID AS fileId, C.CON_VALUE AS filename<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE' AND<br />
&nbsp; &nbsp;AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''<br />
&nbsp; &nbsp;ORDER BY AD.APP_DOC_CREATE_DATE DESC&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//Relative URL to download Input Document file inside ProcesMaker:</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFileUrl &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'../cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'fileId'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFileName <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'filename'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Then, create a DynaForm which has link file named "inputFile" to allow the user to download the Input document file, plus two hidden files named "inputFileUrl" and "inputFileName" to hold the values set by the two case variables created in the trigger. Then add the following JavaScript code to the DynaForm, which will set the URL and label for the link when the DynaForm loads:</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">var</span> dynaformOnload <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">href</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFileUrl&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span><br />
&nbsp; getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">innerHTML</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFileName&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #339933;">;</span></div></div>

<p>When the DynaForm is displayed when running a case, the link field will show the filename of the Input Document file and will open or download the file (depending on the file type and browser configuration) when clicked. To make the Input Document file open in a separate window, set its <a href="Links.html#Target_property" title="2.0/Links">Target</a> property to "Blank" in ProcessMaker 2.0. In older versions of ProcessMaker, use this JavaScript code:</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">target</span> <span style="color: #339933;">=</span> <span style="color: #3366CC;">'_blank'</span><span style="color: #339933;">;</span></div></div>

<p>Here is the XML code for the DynaForm:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dynaForm</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;xmlform&quot;</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;329976887547cb0b0167371011961670/900138072547cb0c5a6d413013281685&quot;</span> <span style="color: #000066;">width</span>=<span style="color: #ff0000;">&quot;500&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">enabletemplate</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">nextstepsave</span>=<span style="color: #ff0000;">&quot;prompt&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFile</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;link&quot;</span> <span style="color: #000066;">target_sel</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">target</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Last Input File<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/inputFile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFileUrl</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFileName</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;submit</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;submit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Submit<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/submit<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;populateLink</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;javascript&quot;</span> <span style="color: #000066;">meta</span>=<span style="color: #ff0000;">&quot;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><span style="color: #339933;">&lt;![CDATA[var dynaformOnload = function() {</span><br />
<span style="color: #339933;"> &nbsp;getField(&quot;inputFile&quot;).href = getField(&quot;inputFileUrl&quot;).value;</span><br />
<span style="color: #339933;"> &nbsp;getField(&quot;inputFile&quot;).innerHTML = getField(&quot;inputFileName&quot;).value;</span><br />
<span style="color: #339933;">};]]&gt;</span><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/populateLink<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dynaForm<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>Finally, set the above trigger to fire before the DynaForm containing the link field. When a case is run, the link field will display the filename of the last uploaded Input Document file and when clicked, it will open or download the file.</p>

<h5><span id="Additional_Information_about_the_Input_Document_file">Additional Information about the Input Document file</span></h5>
<p>To display additional information in the DynaForm about the Input Document file, such as the name of the user who uploaded the Input Document file, the date-time when uploaded and the comment about the file, add read-only "uploader", "dateUploaded" and "comment" fields to the DynaForm.</p>
<p>Here is the XML code for the DynaForm:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dynaForm</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;xmlform&quot;</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;329976887547cb0b0167371011961670/900138072547cb0c5a6d413013281685&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">width</span>=<span style="color: #ff0000;">&quot;500&quot;</span> <span style="color: #000066;">enabletemplate</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">nextstepsave</span>=<span style="color: #ff0000;">&quot;prompt&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFile</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;link&quot;</span> <span style="color: #000066;">target_sel</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">target</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Last Input File<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/inputFile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;uploader</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Uploaded by<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/uploader<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dateUploaded</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>When Uploaded<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dateUploaded<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;comment</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;textarea&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">rows</span>=<span style="color: #ff0000;">&quot;2&quot;</span> <span style="color: #000066;">cols</span>=<span style="color: #ff0000;">&quot;32&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Comment<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/comment<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFileUrl</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFileName</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;submit</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;submit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Submit<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/submit<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;populateLink</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;javascript&quot;</span> <span style="color: #000066;">meta</span>=<span style="color: #ff0000;">&quot;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><span style="color: #339933;">&lt;![CDATA[var dynaformOnload = function() {</span><br />
<span style="color: #339933;"> &nbsp;getField(&quot;inputFile&quot;).href = getField(&quot;inputFileUrl&quot;).value;</span><br />
<span style="color: #339933;"> &nbsp;getField(&quot;inputFile&quot;).innerHTML = getField(&quot;inputFileName&quot;).value;</span><br />
<span style="color: #339933;">};]]&gt;</span><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/populateLink<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dynaForm<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>Then, use the following trigger code, to look up this additional information and assign it to the <tt>@@uploader</tt>, <tt>@@dateUploaded</tt> and <tt>@@comment</tt> case variables, which will be displayed in the DynaForm:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//ID for current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_ID AS fileId, C.CON_VALUE AS filename,<br />
&nbsp; &nbsp;AD.APP_DOC_CREATE_DATE AS dateUploaded, AD.USR_UID AS uploaderId<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''<br />
&nbsp; &nbsp;ORDER BY AD.APP_DOC_CREATE_DATE DESC&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$files</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFileUrl &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'../cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'fileId'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFileName <span style="color: #339933;">=</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'filename'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>dateUploaded &nbsp;<span style="color: #339933;">=</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'dateUploaded'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup first and last name of user who uploaded file:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'uploaderId'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>uploader <span style="color: #339933;">=</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; &quot;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'lastname'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup comment for Input Document file:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$file</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='<span style="color: #006699; font-weight: bold;">{$files[1]['fileId']}</span>'<br />
&nbsp; &nbsp; &nbsp; AND CON_CATEGORY='APP_DOC_COMMENT'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>comment <span style="color: #339933;">=</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Set the above trigger to fire <i>before</i> the DynaForm. When a case is run, the DynaForm will display not only a link to download the Input Document file, but also the name of user who uploaded the file, when it was uploaded and any comment about the file:</p>
<p><img alt="" height="198" src="../../sites/default/files/LinkWithAdditionalInfoInputDocFile.png" width="456"></p>

<h5><span id="Example_for_version_2.5.0_and_later">Example for version 2.5.0 and later</span></h5>
<p>The previous example will work in version 2.5.0 and later, but it is much easier to use the case variables <code>@@<i><strong>link-field-name</strong></i></code> and <code>@@<i><strong>link-field-name</strong></i>_label</code> to set the URL and label of a link field in a DynaForm.</p>
<p>First, create the following trigger which looks up the last uploaded file and constructs a URL to access that file. The URL and the filename for the Input Document file are inserted in two case variables named <code>@@inputFile</code> and <code>@@inputFile_label</code>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//ID for current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_ID AS fileId, C.CON_VALUE AS filename<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE' AND<br />
&nbsp; &nbsp;AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''<br />
&nbsp; &nbsp;ORDER BY AD.APP_DOC_CREATE_DATE DESC&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//Relative URL to download Input Document file inside ProcesMaker:</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFile &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">'../cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'fileId'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFile_label <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'filename'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Then, create a DynaForm which has link file named "inputFile" to allow the user to download the Input document file. When the DynaForm is displayed when running a case, the link field will show the filename of the Input Document file and will open or download the file (depending on the file type and browser configuration) when clicked.</p>
<p>Here is the XML code for the DynaForm:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dynaForm</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;xmlform&quot;</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;329976887547cb0b0167371011961670/900138072547cb0c5a6d413013281685&quot;</span> <span style="color: #000066;">width</span>=<span style="color: #ff0000;">&quot;500&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">enabletemplate</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">nextstepsave</span>=<span style="color: #ff0000;">&quot;prompt&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;inputFile</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;link&quot;</span> <span style="color: #000066;">target_sel</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">target</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Last Input File<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/inputFile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;submit</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;submit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Submit<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/submit<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dynaForm<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>Finally, set the above trigger to fire <i>before</i> the DynaForm containing the link field. When a case is run, the link field will display the filename of the last uploaded Input Document file and when clicked, it will open or download the file.</p><tt> </tt>
<p><tt><img alt="" height="107" src="../../sites/default/files/LinkShowingLastInputDocumentFile.png" width="458"></tt></p><tt> </tt>

<h4><span id="Displaying_Input_Document_images_in_DynaForms">Displaying Input Document images in DynaForms</span></h4>
<p>Input Documents files which are images can be displayed inside of DynaForms. Displaying an image is similar to displaying a link, but the URL is set as the source for the image.</p>
<p>First, create a trigger which fires before a DynaForm which creates the URL to access the image file and pass it to a hidden field in the DynaForm. For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$inputDocId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//look up Input Document UID</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_DOC_UID FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND<br />
&nbsp; &nbsp;DOC_UID='<span style="color: #006699; font-weight: bold;">$inputDocId</span>' AND APP_DOC_TYPE='INPUT' AND APP_DOC_STATUS='ACTIVE'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>inputFileURL <span style="color: #339933;">=</span> <span style="color: #0000ff;">'../cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Then, insert an <a href="http://www.w3schools.com/tags/tag_IMG.asp"><tt>&lt;img&gt;</tt></a> tag inside the <a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#HTML_tab" title="2.0/DynaForms">HTML code</a> for the Dynaform. DynaForms are laid out inside an HTML table, so add a new row to the DynaForm and place the <strong><tt>&lt;img&gt;</tt></strong> tag inside a table cell. Give the <strong><tt>&lt;img&gt;</tt></strong> tag an <tt>id</tt> so it can be easily accessed with JavaScript. For example:</p>
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">&lt;tr&gt;&lt;td class=&quot;FormButton&quot; colspan=&quot;2&quot;&gt;&lt;img id=&quot;inputDocImg&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</div></div>

<p style="margin-left:25px"><strong><font color="red">Warning:</font></strong> <font color="dimgray"><a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#HTML_tab" title="2.0/DynaForms">Editing the HTML code</a> prevents later editing of the DynaForm (especially adding and moving fields), so only edit the HTML as the last step in creating the DynaForm. To avoid this problem, use JavaScript to dynamically insert the new row, cell and image in the table.</font></p>

<p>Finally, create the <a href="Other_DynaForm_Fields.html#Hidden" title="2.0/Other DynaForm Fields">hidden</a> field named "inputFileURL" in the DynaForm to hold the URL to the image file and <a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#JavaScripts_tab" title="2.0/DynaForms">add JavaScript</a> to set that URL as the <tt>src</tt> for the image. Use the <a href="http://developer.mozilla.org/en/DOM/document.getElementByID">getElementById()</a> function to reference the <strong><tt>&lt;img&gt;</tt></strong> tag:</p>

<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">document.<span style="color: #660066;">getElementById</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputDocImg&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">src</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFileURL&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span></div></div>

<h4><span id="Displaying_other_types_of_Input_Documents_in_DynaForms">Displaying other types of Input Documents in DynaForms</span></h4>

<p>Input Document files in formats such as DOC, PDF, XLS, and ODT require plugins to be displayed inside web browsers, so they can not be easily incorporated into DynaForms.<a href="http://news.processmaker.com/2011/05/16/embedding-multiple-images-into-dynaforms/">Workarounds</a> exist, but they require additional programs and special configuration.</p>

<p>A simpler solution is to provide a link to open these types of documents inside another browser window. In ProcessMaker version 2.0 and later, set the <a href="Links.html#Target_property" title="2.0/Links">Target</a> property of the link to "Blank" to open in a new window. In prior versions of ProcessMaker, use javascript to set the <tt>target</tt> property:</p>

<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;link-name&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">target</span> <span style="color: #339933;">=</span> <span style="color: #3366CC;">'_blank'</span><span style="color: #339933;">;</span></div></div>

<p>If a plugin is installed to display the file, it will be displayed inside the browser window; otherwise, the file can be downloaded and opened with an external program.</p>
<p>If the Input Document file needs to be displayed inside a DynaForm, an <tt><a href="http://www.w3.org/TR/html4/present/frames.html#edef-IFRAME">iframe</a></tt> can be used to display the file, but make sure that a plugin is installed in the web browser to handle the file. Edit the HTML code for the DynaForm and place the <tt>iframe</tt> inside a new row in the table for the DynaForm:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">&lt;tr&gt;&lt;td class=&quot;FormButton&quot; colspan=&quot;2&quot;&gt;&lt;iframe id=&quot;inputDocFrame&quot; width=&quot;98%&quot; height=&quot;200&quot;&gt;&lt;/td&gt;&lt;/tr&gt;</div></div>

<p style="margin-left:25px"><strong><font color="red">Warning:</font></strong> <font color="dimgray"><a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#HTML_tab" title="2.0/DynaForms">Editing the HTML code</a> prevents later editing of the DynaForm (especially adding and moving fields), so only edit the HTML as the last step in creating the DynaForm. To avoid this problem, use JavaScript to dynamically insert the new row, cell and <tt>iframe</tt> in the table.</font></p>
<p>Use a similar trigger as the <a href="Input_Documents.html#Displaying_Input_Document_images_in_DynaForms" style="color: rgb(11, 0, 128); background: none;">one above</a> to create the URL to access the Input Document file. Create a <a href="Other_DynaForm_Fields.html#Hidden" title="2.0/Other DynaForm Fields">hidden</a> field named "inputFileURL" in the DynaForm to hold the URL to the Input Document file and <a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#JavaScripts_tab" title="2.0/DynaForms">add JavaScript</a> to set that URL as the <tt>src</tt> for the <tt>iframe</tt>. Use the <a href="http://developer.mozilla.org/en/document.getElementById">getElementById()</a> function to reference the <tt>iframe</tt>:</p>

<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">document.<span style="color: #660066;">getElementById</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputDocFrame&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">src</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;inputFileURL&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span></div></div>

<h4><span id="Links_to_multiple_Input_Document_files_in_DynaForms">Links to multiple Input Document files in DynaForms</span></h4>
<p>Input Documents can hold multiple files (unless the Input Document is uploaded through a <a href="Files.html" title="2.0/Files">file</a> field in a DynaForm which is only displayed once). A trigger can be used to retrieve the list of Input Document files from the ProcessMaker database and place them in a grid case variable, which can be displayed in a subsequent DynaForm. Remember that grids are stored as an associative array of associative arrays, where the outer array is numbered starting from 1 for each row in the grid and the name of each field in the grid is a key in the inner array. See: <a href="Grids.html#Accessing_Grids_with_PHP" title="2.0/Grids">Accessing Grids with PHP</a>.</p>
<p>For example, the following trigger looks up all the Input Document files uploaded for the current case in the ProcessMaker database. This information is placed in a grid named "InputFilesGrid" with a read-only textbox field named "filename" and a link field named "url".</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//the current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_VALUE AS filename, CONCAT('../cases/cases_ShowDocument?a=', C.CON_ID) AS url<br />
FROM APP_DOCUMENT AD, CONTENT C<br />
WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>InputFilesGrid <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>The above trigger is set to fire <i>before</i> the DynaForm which contains an embedded grid whose field name is "InputFilesGrid". Note that the fields that are returned by the database query are renamed as "filename" and "url" to match the field names in the grid and the result of the database query is assigned to a case variable which has the same name as the field which holds the embedded grid in the master DynaForm.</p>
<p>If a case is run where two files are uploaded in the Input Document step:</p><tt> </tt>
<p><tt><img alt="" height="368" src="../../sites/default/files/UploadingDocumentsExample.png" width="761"></tt></p>
<p><span style="line-height: 19.0499992370605px;">Then, the following grid will appear in the subsequent DynaForm, which displays the filename and the URL to download it:</span></p><tt> </tt>
<p><tt><img alt="" height="261" src="../../sites/default/files/AttachingDocumentsListed.png" width="545"></tt></p>
<p>To display additional information about the Input Document files, such as who uploaded the file, when it was uploaded and the comments, then add the "uploader", "dateUploaded" and "comments" fields to the grid. Then use the following trigger code look up this additional information:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>InputFilesGrid <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_ID AS fileId, C.CON_VALUE AS filename,<br />
&nbsp; &nbsp;CONCAT('../cases/cases_ShowDocument?a=', C.CON_ID) AS url,<br />
&nbsp; &nbsp;AD.APP_DOC_CREATE_DATE AS dateUploaded, AD.USR_UID AS uploaderId<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$files</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//lookup first and last name of user who uploaded file:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'uploaderId'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'uploader'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; &quot;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'lastname'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//lookup comment for Input Document file:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$file</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>]['fileId']}'<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AND CON_CATEGORY='APP_DOC_COMMENT'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'comment'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'comment'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>InputFilesGrid <span style="color: #339933;">=</span> <span style="color: #000088;">$files</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>The XML definition of the grid DynaForm which displays the details about the files:</p>
<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dynaForm</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;grid&quot;</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;346659768547365f6457a09054774264/4881271115478af73178568035136222&quot;</span> <span style="color: #000066;">width</span>=<span style="color: #ff0000;">&quot;500&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">enabletemplate</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">nextstepsave</span>=<span style="color: #ff0000;">&quot;prompt&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;filename</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Filename<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/filename<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;url</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;link&quot;</span> <span style="color: #000066;">target_sel</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">target</span>=<span style="color: #ff0000;">&quot;_blank&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Download<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/url<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;uploader</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Uploader<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/uploader<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dateUploaded</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;15&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Date uploaded<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dateUploaded<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;comment</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;textarea&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">rows</span>=<span style="color: #ff0000;">&quot;2&quot;</span> <span style="color: #000066;">cols</span>=<span style="color: #ff0000;">&quot;32&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;view&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Comment<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/comment<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dynaForm<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>The XML definition of the master DynaForm which contains the field named "InputFilesGrid" which holds the embedded grid:</p>
<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;?xml</span> <span style="color: #000066;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span> <span style="color: #000066;">encoding</span>=<span style="color: #ff0000;">&quot;UTF-8&quot;</span><span style="color: #000000; font-weight: bold;">?&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dynaForm</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;346659768547365f6457a09054774264/3765933975478af4de67163065867525&quot;</span> <span style="color: #000066;">enabletemplate</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;xmlform&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">width</span>=<span style="color: #ff0000;">&quot;800&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">nextstepsave</span>=<span style="color: #ff0000;">&quot;prompt&quot;</span> <span style="color: #000066;">printdynaform</span>=<span style="color: #ff0000;">&quot;&quot;</span> <span style="color: #000066;">adjustgridswidth</span>=<span style="color: #ff0000;">&quot;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;InputFilesGrid</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;grid&quot;</span> <span style="color: #000066;">xmlgrid</span>=<span style="color: #ff0000;">&quot;346659768547365f6457a09054774264/4881271115478af73178568035136222&quot;</span></span><br />
<span style="color: #009900;"> &nbsp; &nbsp;<span style="color: #000066;">addrow</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">deleterow</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;submit</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;submit&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">optgroup</span>=<span style="color: #ff0000;">&quot;0&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Submit<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/submit<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dynaForm<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>When a case is run which uploads three files in an Input Document step:</p><tt> </tt>

<p><tt><img alt="" height="483" src="../../sites/default/files/InputDocStepForFilesGrid.png" width="652"></tt></p>

<p>The subsequent DynaForm with an embedded grid will show the details of the three files:</p>

<p><tt><img alt="" height="260" src="../../sites/default/files/InputDocFilesDisplayedInGrid.png" width="738"></tt></p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The "filename" and "url" fields in the grid can be combined into a single link field whose label displays the filename, but it requires using JavaScript in the DynaForm to set the labels to the link fields before version 2.5.0 or creating "url" and "url_label" keys in the array in version 2.5.0 and later. See: <a href="Links.html#Accessing_Links_with_Triggers">Accessing Links with Triggers</a>.</font></p>

<h4><span id="Links_to_Input_Document_files_in_Emails_.26_Output_Documents">Links to Input Document files in Emails &amp; Output Documents</span></h4>
<p>Inserting links to Input Documents in <a href="../Notifications.html">email notifications</a> and <a href="../Output_Documents.html">Output Documents</a> involves creating a template containing a URL constructed with inserted variables. If the template is used in an email, then send the email with the <a href="../Notifications.html#Sending_emails_with_PMFSendMessage.28.29">PMFSendMessage()</a> function. If used in an Output Document, then fire the trigger <i>before</i> the Output Document step in order to create the case variables which will be inserted in the Output Document.</p>
<p>For example, Acme Inc. has the following template file named "accessInvoice.html" to send out an email to one of its employees:</p>
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">&lt;CENTER&gt;&lt;B&gt;Invoice for client @@ClientName&lt;/B&gt;&lt;/CENTER&gt;<br />
Account No: @#AccountNo<br />
Filename: @#InvoiceFilename<br />
Link: http://acme.com/sys@#SYS_SYS/@#SYS_LANG/@#SYS_SKIN/cases/cases_ShowDocument?a=@#InvoiceFileId<br />
Date: @#InvoiceDate<br />
Description: @#InvoiceDescription</div></div>

<p>The following trigger is used to look up the filename and unique ID for the Input Document file and send it out using <a href="../Notifications.html#Sending_emails_with_PMFSendMessage.28.29">PMFSendMessage()</a>:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_VALUE AS FILE_NAME, C.CON_ID AS FILE_UID,<br />
&nbsp; &nbsp;AD.APP_DOC_CREATE_DATE AS FILE_DATE FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aFields</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'InvoiceFilename'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_NAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'InvoiceFileId'</span> &nbsp; <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'InvoiceDate'</span> &nbsp; &nbsp; <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_DATE'</span><span style="color: #009900;">&#93;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'boss@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'employee@acme.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'New Invoice to Download'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'accessInvoice'</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aFields</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h4><span id="Multiple_Input_Document_files_in_Emails_.26_Output_Documents">Multiple Input Document files in Emails &amp; Output Documents</span></h4>

<p>Inserting links to multiple Input Documents files in <a href="../Notifications.html" title="Notifications">email notifications</a> and <a href="../Output_Documents.html">Output Documents</a> involves creating a template which contains a grid. Grids fields should be enclosed inside <strong><code>@&gt;<i>grid-name</i> ... @&lt;<i>grid-name</i></code></strong> tags and will be repeated for as many records as are found in the grid. For more information, see <a href="../Output_Documents.html#Grids_in_Output_documents" title="2.0/Output Documents">Grids in Output_documents</a>.</p>
<p>For example, the following Output Document template is used to generate a table of Input Document files:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;&lt;<a href="http://december.com/html/4/element/b.html"><span style="color: #000000; font-weight: bold;">b</span></a>&gt;</span>Invoices for client @@ClientName<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/b.html"><span style="color: #000000; font-weight: bold;">b</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span>Account No: @#AccountNo<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!-- @&gt;InputDocList --&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#InvoiceDate<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#InvoiceUser<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#InvoiceFilename<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span> @#InvoiceComment<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#InvoiceLink<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!-- @&lt;InputDocList --&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span></div></div>
<p>The following trigger is fired <i>before</i> the Output Document is generated to populate the <code>@=InputDocList</code> array used in the template. It uses <a href="../ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions"><tt>executeQuery()</tt></a> to lookup the unique IDs, creation dates, users and filenames for the Input Document files. <code>executeQuery()</code> returns an associative array of associative arrays which is the same format as used by grids. Then, the trigger loops through the records in that associative array and looks up the comment for each file in the <strong><tt>CONTENT</tt></strong> table and the name of the user who uploaded each file and inserts that information into the <code>@=InputDocList</code> array:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>InputDocList <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_VALUE AS InvoiceFilename, C.CON_ID AS InvoiceId,<br />
&nbsp; &nbsp;AD.APP_DOC_CREATE_DATE AS InvoiceDate, AD.USR_UID AS InvoiceUserId<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='INPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$files</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to find any Input Documents.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//Create Link to Input Document file:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceLink'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'http://'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'HTTP_HOST'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceId'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup first and last name of user who uploaded file:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceUserId'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceUser'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot; &quot;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'lastname'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//lookup comment for Input Document file:</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$file</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>]['InvoiceId']}'<br />
&nbsp; &nbsp; &nbsp; AND CON_CATEGORY='APP_DOC_COMMENT'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceComment'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'InvoiceComment'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #339933;">@=</span>InputDocList <span style="color: #339933;">=</span> <span style="color: #000088;">$files</span><span style="color: #339933;">;</span></div></div>

<h4><span id="Exporting_Links_for_Input_Documents_files_to_a_Database">Exporting Links for Input Documents files to a Database</span></h4>

<p>Links for Input Document files can be exported to an external database or a PM Table by firing a trigger which uses the <a href="../ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> function to write data to the database. If using an external database, first create a <a href="../Database_Connections.html" title="Database Connections">Database Connection</a>, whose unique ID will be used as a parameter by the <code>executeQuery()</code> function.</p>
<p>Then, create a table in the external database or a PM Table to hold information about the Input Document files. For example, to export information about Input Document files which are receipts, create a table named "RECEIPT_FILES" with the fields:</p>

<codeblock>Field Name:       Type:     Description:
-------------     -------   -------------
CASE_ID           32 char   Unique ID for case (APP_UID field in PM)
FILE_ID           32 char   Unique ID for Input Document file (APP_DOC_UID field in PM)
FILE_VERSION      Integer   Version number of the Input Document file
FILE_NAME         256 char  Filename of the Input Document file
FILE_COMMENT      1024 char Comment entered by user who uploaded the Input Document file
TIME_UPLOADED     DateTime  DateTime when the Input Document was uploaded (created) in PM
USER_UPLOADED     100 char  Full name and username of the user who uploaded the Input Document file in PM
FILE_URL          256 char  URL to download the Input Document file
</codeblock>

<p>Then create the following trigger which will be set to fired at the end of the task which contains the Input Document. The trigger will lookup information about the input document and send it to an external database with the <code>executeQuery()</code> function:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//Set to the UID for the database connection for an external database:</span><br />
<span style="color: #000088;">$db</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> &nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//not needed if using a PM Table</span><br />
<span style="color: #666666; font-style: italic;">//Set to the UID for the Input Document definition:</span><br />
<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//UID for the current case</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT AD.APP_DOC_UID AS FILE_ID, AD.DOC_VERSION AS FILE_VERSION,<br />
&nbsp; &nbsp;C.CON_VALUE AS FILE_NAME, AD.APP_DOC_CREATE_DATE AS TIME_UPLOADED,<br />
&nbsp; &nbsp;CONCAT(U.USR_FIRSTNAME, ' ', U.USR_LASTNAME, '(', U.USR_USERNAME, ')') AS USER_UPLOADED<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C, USERS U<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>' AND AD.APP_DOC_STATUS='ACTIVE' AND<br />
&nbsp; &nbsp;AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND AD.USR_UID=U.USR_UID&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$files</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span> &nbsp;<span style="color: #666666; font-style: italic;">// if files found</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//loop through files and send each file to external database:</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$files</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//Create Link to Input Document file:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_URL'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'http://'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'HTTP_HOST'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_ID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">'&amp;v='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_VERSION'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//lookup comment for Input Document file:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$file</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>]['FILE_ID']}'<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AND CON_CATEGORY='APP_DOC_COMMENT'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$file</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_COMMENT'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$file</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$files</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILE_COMMENT'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//insert record of file info into the external database:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$q</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;INSERT INTO RECEIPT_FILES (CASE_ID, FILE_ID, FILE_VERSION, FILE_NAME, FILE_COMMENT,<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TIME_UPLOADED, USER_UPLOADED, FILE_URL) VALUES (<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;'<span style="color: #006699; font-weight: bold;">$CaseId</span>', '{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][FILE_ID]}', {<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][FILE_VERSION]}, '{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][FILE_NAME]}',<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;'{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][FILE_COMMENT]}', {<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][TIME_UPLOADED]}, '{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][USER_UPLOADED]}',<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;'{<span style="color: #006699; font-weight: bold;">$files</span>[<span style="color: #006699; font-weight: bold;">$i</span>][FILE_URL]}'<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;)&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$q</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&mt=8" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com">
		<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&gid=3970335&trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>
</html>
