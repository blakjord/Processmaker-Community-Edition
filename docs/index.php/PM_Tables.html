<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="https://wiki.processmaker.com/themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="PM_Tables.html" />
<link rel="shortlink" href="../node/131.html" />
<title>2.0 - PM Tables | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/system/system.base.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.messages.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.theme.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/aggregator/aggregator.css?s743n7");
@import url("https://wiki.processmaker.com/modules/comment/comment.css?s743n7");
@import url("https://wiki.processmaker.com/modules/field/theme/field.css?s743n7");
@import url("https://wiki.processmaker.com/modules/node/node.css?s743n7");
@import url("https://wiki.processmaker.com/modules/search/search.css?s743n7");
@import url("https://wiki.processmaker.com/modules/toc_filter/toc_filter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/user/user.css?s743n7");
@import url("https://wiki.processmaker.com/modules/views/css/views.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.css?s743n7");
@import url("https://wiki.processmaker.com/modules/ctools/css/ctools.css?s743n7");
@import url("https://wiki.processmaker.com/sites/all/modules/geshifilter/geshifilter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/panels/css/panels.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus_default.css?s743n7");
@import url("https://wiki.processmaker.com/modules/fivestar/css/fivestar.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/style.css?s743n7");
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/media.css?s743n7");
</style>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/jquery/1.9/jquery.min.js?v=1.9.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/drupal.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.bgiframe.js?v=2.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.hoverIntent.js?v=0.5"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/superfish.js?v=1.4.8"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/nice_menus.js?v=1.0"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/ui/external/jquery.cookie.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/misc/jquery.form.min.js?v=2.69"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/ajax.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/js/jquery_update.js?v=0.0.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/toc_filter/toc_filter.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics.js@s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/progress.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.ajax.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-1.10.2.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/custom.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"-o_zTd3WSPLmlRVunjTgaTO1qNji1pePmLwlJp49-Lo","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-131 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="PM_Tables.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-QP6t9ihyX-EyEgWolQlR0Eo-C25e2ib1FDRntHcPpU8" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">2.0 - PM Tables</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.2/PM_Tables.html" class="">3.8</a></li><li><a href="../3.2/PM_Tables.html" class="">3.7</a></li><li><a href="../3.2/PM_Tables.html" class="">3.6</a></li><li><a href="../3.2/PM_Tables.html" class="">3.5</a></li><li><a href="../3.2/PM_Tables.html" class="">3.4</a></li><li><a href="../3.2/PM_Tables.html" class="">3.3</a></li><li><a href="../3.2/PM_Tables.html" class="">3.2</a></li><li><a href="../3.1/PM_Tables.html" class="">3.1</a></li><li><a href="../3.0/PM_Tables.html" class="">3.0</a></li><li><a  class="active-version">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="2.0 - PM Tables" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="PM_Tables.html" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 2.0 - PM Tables 1/5</option><option value="40" selected="selected">Give 2.0 - PM Tables 2/5</option><option value="60">Give 2.0 - PM Tables 3/5</option><option value="80">Give 2.0 - PM Tables 4/5</option><option value="100">Give 2.0 - PM Tables 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2</span></span> <span class="total-votes">(<span >4</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-bF1BlS9BfrCiRpu5hy8i5z_nmE3so8oMi71jK9icm9k" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="PM_Tables.html#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="PM_Tables.html#Overview">Overview</a></li>
<li class="toc"><a href="PM_Tables.html#Creating_PM_Tables_before_version_2.0.35">Creating PM Tables before version 2.0.35</a></li>
<li class="toc"><a href="PM_Tables.html#Creating_PM_Tables_from_version_2.0.35">Creating PM Tables in version 2.0.35 and later</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Adding_Fields">Adding Fields </a></li>
<li class="toc"><a href="PM_Tables.html#Editing_Fields">Editing Fields </a></li>
<li class="toc"><a href="PM_Tables.html#Removing_Fields">Removing Fields </a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#List_of_PM_Tables">List of PM Tables</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Editing_Pm_Table_Data">Editing PM Table Data</a></li>
<li class="toc"><a href="PM_Tables.html#Deleting_Pm_Table_Data">Deleting PM Table Data</a></li>
<li class="toc"><a href="PM_Tables.html#Viewing_and_Editing_PM_Table_Data">Viewing and Editing PM Table Data</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Searching_data_inside_a_PmTable">Searching data inside a PM Table</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Header_Properties_from_the_Table_List">Header Properties from the Table List </a></li>
<li class="toc"><a href="PM_Tables.html#Importing_CSV_Tables_to_PMTables">Importing CSV Files to PM Tables</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Format_of_CSV_Files">Format of CSV Files</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Exporting_PM_Tables_to_CSV">Exporting PM Tables to CSV</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Exporting_PM_Tables">Exporting PM Tables</a></li>
<li class="toc"><a href="PM_Tables.html#Importing_PM_Tables">Importing PM Tables</a></li>
<li class="toc"><a href="PM_Tables.html#Reserved_Words_in_PM_Tables">Reserved Words in PM Tables</a></li>
<li class="toc"><a href="PM_Tables.html#Accessing_PM_Tables_from_Triggers">Accessing PM Tables from Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Querying_a_PM_Table">Querying a PM Table</a></li>
<li class="toc"><a href="PM_Tables.html#Querying_a_PM_Table">Inserting in a PM Table</a></li>
<li class="toc"><a href="PM_Tables.html#Updating_a_PM_Table">Updating a PM Table</a></li>
<li class="toc"><a href="PM_Tables.html#Deleting_in_a_PM_Table">Deleting in a PM Table</a></li>
<li class="toc"><a href="PM_Tables.html#Using_Propel_classes">Using Propel classes</a></li>
<li class="toc"><a href="PM_Tables.html#Downloading_CVS_Files_generated_from_PM_Tables">Downloading CVS Files generated from PM Tables</a></li>
<li class="toc"><a href="PM_Tables.html#Saving_PM_Tables_as_Input_Documents">Saving PM Tables as Input Documents</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Accessing_PM_Tables_in_DynaForms">Accessing PM Tables in Dynaforms</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Querying_PM_Tables_in_DynaForm_Fields">Querying PM Tables in Dynaform Fields</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#Populating_lists_of_options">Populating lists of options</a></li>
<li class="toc"><a href="PM_Tables.html#Populating_ordinary_fields">Populating ordinary fields</a></li>
<li class="toc"><a href="PM_Tables.html#Using_Variables_in_SQL_Queries">Using Variables in SQL Queries</a></li>
<ol class="toc">
<li class="toc"><a href="PM_Tables.html#System_or_case_variables_in_SQL_Queries">System or case variables in SQL Queries</a></li>
<li class="toc"><a href="PM_Tables.html#SQL_Queries_with_Dependent_Fields">SQL Queries with Dependent Fields</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Populating_DynaForm_Grids">Populating Dynaform Grids</a></li>
</ol>
<li class="toc"><a href="PM_Tables.html#Creating_DynaForms_based_on_PM_Tables">Creating Dynaforms based on PM Tables </a></li>
<li class="toc"><a href="PM_Tables.html#Read.2FWrite_Access_to_PM_Tables_in_DynaForm_Fields">Read/Write Access to PM Tables in Dynaform Fields</a></li>
</ol>
</div></div>


<h2><span id="Overview">Overview</span></h2>

<p>PM Tables are designed for users who do not wish to go through the hassle of maintaining an external database. Even users who have external databases may find PM Tables handy for managing data which will be used in Dynaforms or Output Documents. The data in PM Tables is stored in the MySQL database <strong><tt>wf_<i>&lt;workspace&gt;</i></tt></strong> (which by default is named <strong><tt>wf_workflow</tt></strong>), so the data can also be accessed by an external program.</p>
<h2><span id="Creating_PM_Tables_before_version_2.0.35">Creating PM Tables before version 2.0.35</span></h2>
<p>To create PM Tables, go to <strong>ADMIN</strong> &gt; <strong>Settings</strong> &gt; <strong>PM Tables</strong></p>
<p><img alt="" src="../sites/default/files/PM_Table_Menu.png" height="249" width="396"></p>
<p>Click on <strong>New</strong> and two options will display, choose <strong>New PM Table.</strong></p>
<p><img alt="" src="../sites/default/files/NewPmTable.png" height="121" width="175"></p>
<p>Enter all the information of the new PM Table:</p>
<p><img alt="" src="../sites/default/files/PMTableCreation.png" height="312" width="735"></p>
<p><strong>Table Information:</strong></p>
<ul>
    <li><strong>Table Name:</strong> Enter the name of the new table, which will be converted into uppercase, because this is the name which will be used for the MySQL table. See the list of <a href="PM_Tables.html#Reserved_Words_in_PM_Tables">Reserved Words</a> below to not use to name PM Tables.</li>
    <li><strong>Description:</strong> A description or any additional information about the table.</li></ul>


<h2><span id="Creating_PM_Tables_from_version_2.0.35">Creating PM Tables in version 2.0.35 and later</span></h2>
<p>In version 2.0.35 and later, PM Tables are created with the prefix <tt>PMT_</tt> in their name. To create a new PM Table, go to <strong>ADMIN</strong> &gt; <strong>Setings</strong> &gt; <strong>PM Tables</strong> and then select <b>New &gt; New PM Table</b> in the menu. In the dialog box to define the new PM Table,  the label <tt>Auto Prefix "PMT"</tt> will be displayed in the <strong>Table Name</strong> field.</p>
<p><img alt="" src="../sites/default/files/PMTABLE_PrefixPMT.png" height="150" width="474"></p>
<p>For example:</p>
<p>If creating a PM Table named "COUNTRY" with this prefix, the table will named "PMT_COUNTRY":</p>
<p><img alt="" src="../sites/default/files/CreatedTablePrefixPMT.png" height="140" width="503"></p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">In version 2.0.35 or later, PM Tables have a prefix of <b><tt>PMT_</tt></b> in their names. Make sure to include this prefix in SQL queries when calling <a href="ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> in triggers and populating Dynaform fields.</font></p>


<h3><span id="Adding_Fields">Adding Fields </span></h3>
<p>To add fields click on <img alt="" src="../sites/default/files/AddField.png" height="25" width="67"> icon. A new row will add where information of the field must be completed:</p>
<p><img alt="" src="../sites/default/files/PMTableAddField.png" height="172" width="851"></p>
<p><strong>Fields:</strong></p>
<ul>
    <li><tt><strong>Field Name</strong>.</tt> A unique case-insensitive name to identify the field. Names should be 64 or less characters long and should not begin or end with numbers or spaces, nor contain the characters '\', '/' or '.'</li></ul>
<dl>
    <dd>Do NOT name the field one of the <a href="PM_Tables.html#Reserved_Words_in_PM_Tables">reserved words</a>,
        because they may cause conflicts with database queries. In version 2.0.34 and later, ProcessMaker checks
        that these reserved words aren't used.</dd>
</dl>
<ul>
    <li><tt><strong>Field Label</strong>.</tt> The displayed label for the field, which the user will see when editing data in the table.</li></ul>
<ul>
    <li><tt><strong>Type</strong>.</tt> Fields can be one following data types:.</li></ul>
<dl>
    <dd><tt><strong>VARCHAR</strong></tt> is a string of 255 or fewer characters.</dd>
    <dd><tt><strong>TEXT</strong></tt> is a string of characters which is 65,536 or fewer bytes long.</dd>
    <dd><tt><strong>DATE</strong></tt> is a date in the format YYYY-MM-DD.</dd>
    <dd><tt><strong>INT</strong></tt> is an integer between -2147483648 and 2147483647.</dd>
    <dd><tt><strong>FLOAT</strong></tt> is a 4 byte floating point number between -3.402823466E+38 and 3.402823466E+38.
        Numbers are defined with 2 decimals. If more than 2 decimals are defined the number will be rounded to
        to the nearest integer. For instance, if the following number is entered <tt><strong>0.9999</strong></tt>        it will be rounded to <tt><strong>1</strong></tt></dd>
    <dd><tt><strong>DOUBLE</strong></tt> float number with double precision. It represents numbers of 64 bits. Numbers
        with 9 or more decimals will be rounded to to the nearest integer. For instance, if the following number
        is entered <tt><strong>0.999999999</strong></tt> it will be rounded to <tt><strong>1</strong></tt>.</dd>
    <dd>See the <a class="external text" href="http://dev.mysql.com/doc/refman/5.0/en/data-types.html" rel="nofollow">MySQL manual</a>        for more information on these data types.</dd>
</dl>
<ul>
    <li><tt><strong>Size</strong></tt>. For VARCHAR fields, the maximum number of characters. For INT and FLOAT fields, the maximum number of digits of precision. For DATE and TEXT fields, size is not applicable.</li></ul>
<ul>
    <li><tt><strong>Null</strong></tt>. Select if the field may be a <a class="external text" href="http://dev.mysql.com/doc/refman/5.1/en/null-values.html" rel="nofollow">NULL</a> value, which means "no data".</li></ul>
<ul>
    <li><tt><strong>Primary Key</strong></tt>. Select if the field (or a combination of fields) will hold a unique value which is used to index the table. All PM tables must contain at least one primary key.</li></ul>
<ul>
    <li><tt><strong>Auto increment</strong>.</tt> Select if the field will be automatically increased.</li></ul>
<ul>
    <li><tt><strong>Index</strong>.</tt> This column, added from version 2.8, adds the functionality to allow setting fields as index, directly from the PM Table administration interface. By selecting the field in the row of a table, this allows quick access to the records of the PM Table on the fields on which searches are frequent. Indexes can be of type <i>Varchar</i> or <i>Integer</i> other types disable this option.</li></ul>
<dl>
    <dd><span style="margin-left:25px"><strong><font color="#009688">Available Version:</span></font>
        </strong><font color="dimgray"> PM 2.8</font></dd>
</dl>
<dl>
    <dd>To view indexes created on fields PM Table, access ProcessMaker's database and check the indexes of pmt_namePMTable:</dd>
</dl>
<dl>
    <dd><img alt="" src="../sites/default/files/IndexesPMTablesDatabaseCheck.png" height="98" width="613"></dd>
</dl>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> Only an index can be created per PM Table, but this index can have multiple fields.</font></p>

<p>After defining each field, click on <strong>Update</strong> to finish editing the field. When all the fields in the table have been defined, click on <strong>Create</strong> to store the structure of the table.</p>

<h3><span id="Editing_Fields">Editing Fields </span></h3>
<p>To edit a field select the field to edit and click on <img alt="" src="../sites/default/files/EditField.png" height="21" width="65">&nbsp;or just choose the filed to edit and double click on it:</p>
<p><img alt="" src="../sites/default/files/EditField1.png" height="111" width="978"></p>

<h3><span id="Removing_Fields">Removing Fields </span></h3>
<p>To remove a field, select the field in the list and click on <img alt="" src="../sites/default/files/RemoveField.png" height="18" width="81"> icon:</p>
<p><img alt="" src="../sites/default/files/RemoveField1.png" height="209" width="974"></p>

<h2><span id="List_of_PM_Tables">List of PM Tables</span></h2>
<p>After creating a PM Table, it will be displayed in the list of available tables under <strong>ADMIN &gt; Settings &gt; PM Tables</strong>.</p>

<p><img alt="" src="../sites/default/files/ListPMTables.png" height="201" width="729"></p>

<h3><span id="Editing_Pm_Table_Data">Editing PM Table Data</span></h3>
<p>Choose one table and click on <strong>Edit</strong> to alter the fields in a field or change a table's name or description. All fields can be edited except the name of the table which can be edited by entering Mysql.</p>
<p><img alt="" src="../sites/default/files/EditPMTable.png" height="247" width="985"></p>
<p>Fields can be added, edited and removed. If the structure of the table is edited, all data will be lost.</p>
<p><img alt="" src="../sites/default/files/EditPMTableListWarning.png" height="339" width="1159"></p>

<h3><span id="Deleting_Pm_Table_Data">Deleting PM Table Data</span></h3>
<p>One or more tables can be deleted at the same time, check all the tables to delete and click on <strong>Delete</strong>:</p>
<p><img alt="" src="../sites/default/files/DeletePMTable1.png" height="174" width="639"></p>
<h3><span id="Viewing_and_Editing_PM_Table_Data">Viewing and Editing PM Table Data</span></h3>
<p>To view the data stored in a PM Table, select the table to view and edit, and click on the <strong>Data</strong>:</p>
<p><img alt="" src="../sites/default/files/PMTableData.png" height="356" width="626"></p>
<p>To add a new row to a PM Table, click on the <strong>Add Row</strong> link at the top of the table. Click on the <strong>Edit</strong> and <strong>Delete</strong> links to edit or delete a record in the PM Table. Fields can also be edited or deleted by clicking over the field:</p>
<p><img alt="" src="../sites/default/files/PMTableeditDelete.png" height="98" width="316"></p>
<h4><span id="Searching_data_inside_a_PmTable">Searching data inside a PM Table</span></h4>

<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.5.2 on</font></p>
<p>In previous versions of ProcessMaker, if you needed to search some information inside a table data, you had to do it by searching them manually, this was a tiresome work specially if you need to search information inside a table with plenty of data inserted.</p>
<p>Now you can search for specific values when displaying PM Tables by the search box added inside Data window. You can search any kind of text but it is not possible to use search criteria like <tt>&lt;, &gt;, between, like</tt>, etc</p>
<p>Go to <strong>ADMIN &gt; Settings &gt; PM Table</strong>, select a table and choose <strong>Data</strong> from the menu, on the upper right side of the window you will find the search text:</p>
<p><img alt="" src="../sites/default/files/SearchBoxPmTable.png" height="395" width="699"></p>
<p>For example, in the example below we will search the item <strong>Gasoline</strong>, write the text and then press Enter:</p>
<p><img alt="" src="../sites/default/files/SearchingAnItem.png" height="143" width="719"></p>
<p>If you want to list the complete data, leave the search box blank and press Enter.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> This search is also included inside <a href="2.0/Report_Tables.html#Searching_data_inside_a_Report_Table" title="2.0/Report Tables">Report Tables</a> data.</font></p>
<h3><span id="Header_Properties_from_the_Table_List">Header Properties from the Table List </span></h3>
<p>When you access into the main list of tables (<strong>ADMIN &gt; Settings &gt; PMTables</strong>) you will see 5 rows (Name, Description, Table Type, Record and Process), if you place your moues over one of the rows, you will find a down-arrow:</p>
<p><img alt="" src="../sites/default/files/HeaderPmTables.png" height="97" width="313"></p>
<p>Click on the arrow to display the available options. Note that all rows have the same options:</p>
<p><img alt="" src="../sites/default/files/HeaderPmTablesOption.png" height="177" width="465"></p>
<p>Where:</p>
<ul>
    <li><tt><strong>Sort Ascending:</strong></tt> Choose this option to sort table names in alphabetically order from <strong>A-Z</strong>.</li>
    <li><tt><strong>Sort Descending:</strong></tt> Choose this option to sort table names in alphabetically order from <strong>Z-A</strong>.</li>
    <li><tt><strong>Columns:</strong></tt> To prevent careless users from accidentally editing or deleting a record or seeing a particular column of data, select the columns which will be displayed.</li></ul>
<dl>
    <dd>
        <dl>
            <dd><img alt="" src="../sites/default/files/PMTableextraColumns.png" height="204" width="403"></dd>
        </dl>
    </dd>
</dl>
<ul>
    <li><tt><strong>Group by this field:</strong></tt> It groups fields depending on the row selected. For instance if you choose this option from the <strong>Name</strong> row, the order will be:</li></ul>
<dl>
    <dd>
        <dl>
            <dd><img alt="" src="../sites/default/files/GroupBythisField.png" height="264" width="476"></dd>
        </dl>
    </dd>
</dl>
<ul>
    <li><tt><strong>Show in groups:</strong></tt> When you select the previous version, automatically this field is checked:</li></ul>
<dl>
    <dd>
        <dl>
            <dd><img alt="" src="../sites/default/files/OptionChecked.png" height="184" width="191"></dd>
        </dl>
    </dd>
</dl>
<dl>
    <dd>
        <dl>
            <dd>If you want to restore the list to its original view, uncheck this option.</dd>
        </dl>
    </dd>
</dl>

<h3><span id="Importing_CSV_Tables_to_PMTables">Importing CSV Files to PM Tables</span></h3>
<p>In version 1.2-2552 and later, data can be imported into PM Tables from a CSV (<i>comma separated values</i>) file.</p>

<h4><span id="Format_of_CSV_Files">Format of CSV Files</span></h4>
<p>The CSV file should be a plain text file containing the field values separated by <code><b>,</b></code> (commas) or <code><b>;</b></code> (semicolons). List the field values in the same order as they appear in the PM Table, so the first comma separated value will go into the first field, the second value in the second field, and so on. The first line of text in the CSV file will be ignored, because it is assumed to contain the column headers (field names). All text should be in the UTF-8 character set.</p>

<p>Each record in the CSV file should be on a new line. If a field contains a new line or if it contains spaces at the beginning or the end of the text, it should be enclosed in <code><b>"</b></code> (double quotation marks). If a field contains a <code><b>"</b></code>, then is should be doubled as <code><b>""</b></code> and the whole field enclosed in <code><b>"</b></code> (double quotation marks). If using <code><b>,</b></code> (commas) to separate fields, then all fields containing <code><b>,</b></code> should also be enclosed in <code><b>"</b></code> (double quotation marks). For example, <code>Say "hello," and go</code> should be: <code>"Say ""hello,"" and go"</code>. Likewise, If using <code><b>;</b></code> (semicolons) to separate fields, then all fields containing <code><b>;</b></code> should also be enclosed in <code><b>"</b></code> (double quotation marks).</p>

<p>Date fields should use the format <code>YYYY-MM-DD</code>, such as <code>1999-01-01</code> or <code>2020-12-31</code>. Make sure to include leading zeros if the month or day is less 9 or less. Datetime fields should use the format <code>YYYY-MM-DD HH:MM:SS</code>, such as <code>1999-01-01 01:01:01</code> or <code>2020-12-31 23:59:59</code>. Make sure to include leading zeros if the hour, minutes or seconds is 9 or less. If a date or datetime field is empty, it will be inserted in the PM Table as <code>0000-00-00</code> or <code>0000-00-00 00:00:00</code>. If a datetime field lacks the hour, minutes or seconds, they will automatically be inserted as <code>00</code>.

<p>Decimal numbers should use a <code><b>.</b></code> (dot) to separate decimal digits and should have no thousands separator, such as <code>73642632.89</code> and <code>-99372.7634</code>. Boolean fields should use <code>1</code> for <i>true</i> and <code>0</code> for <i>false</i>. An empty field or text will be interpreted as <code>0</code>.</p>
<p style="margin-left:25px;"><font color=green><b>Note:</b></font> <font color=dimgrey>Boolean fields are actually integer fields in PM Tables any integer value is allowed in boolean fields.</font></p>
<p>For example, if importing the following spreadsheet into a PM Table:</p>

<img src="../sites/default/files/PMTableDataInSpreadsheet.png">

<p>The CSV file should have the following content:
<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">ID;Name;Address;Has Contract;Contract Due;Contract Paid<br />
1;Lawn Care, Inc.;&quot;232 W. 4th St.<br />
Alandia, FL 34528&quot;;1;2015-10-31;2015-11-03 12:14:00<br />
2;&quot;E-Z Catering; Good Eats&quot;;&quot;1877 Oak Boulevard<br />
Greenfield, FL 28873 &quot;;0;;<br />
3;&quot;&quot;&quot;Right On!&quot;&quot; Cleaners&quot;;&quot;4523 Main St.<br />
Palmares, FL 38734&quot;;1;2016-01-31;2016-03-08 12:14:00</div></div>

<p>Notice that the new lines in the Address field are enclosed in double quotation marks, as well as the <code>"</code> and <code>;</code> in the Name field. Note that new lines in fields in PM Tables appear as normal spaces when viewed in the ProcessMaker interface, but the new lines still exist in the database. Also note that the only way to include new lines in the fields in PM Tables is to import them in CSV files, because they can not be inserted using the graphical data editor in the ProcessMaker interface.</p>

<p>The CSV file can have more fields than are contained in the PM Table, but it cannot have fewer fields than the PM Table. Even if a field is empty, it should have a comma or semicolon to indicate that there is an empty value, as shown in record 2 in the example above. Autoincrement fields should also be included in the CSV file.</p>

<p>Records can be appended to an existing PM Table, so it is not necessary to overwrite the entire PM Table when importing a CSV file. If the primary key for a record in the CSV file does not already exist in the PM Table, that record will be appended to the PM Table. However, a <a href="http://bugs.processmaker.com/view.php?id=19880">bug</a> currently prevents a CSV file from being imported if the file contains a primary key which already exists in the PM Table. The only way to update an existing record is to first manually delete the record in the PM Table, and then import the CSV file with a new version of that record. For example, in the example above, the ID field is the primary key. If the PM Table already contains a record with an ID of 2, then that record will have to deleted, before importing the above CSV file.</p>

<p>Most spreadsheet programs have options to automatically export spreadsheets in the CSV format used by PM Tables. For example, if using LibreOffice or OpenOffice, go to <b>File > Save As</b> and select the option "<b>Text CSV (.csv)</b>" in the format dropdown box. Also mark the "<b>Edit filter settings</b>" checkbox and then click on <b>Save</b>.</p>

<img src="../sites/default/files/SaveFileAsLibreOffice.png">

<p>A "Export Text File" dialog box will appear to select options for exporting the CSV file. Set the <b>Character set</b> to "UTF-8", the <b>File delimiter</b> to <code><b>,</b></code> or <code><b>;</b></code>, and the <b>Text delimiter</b> to <code><b>"</b></code>. Finally, mark the <b>Save cell content as show</b> checkbox and click on <b>OK</b> to save the CSV file.</p>

<img src="../sites/default/files/CVSFileOptionsLibreOffice.png">

<p>If the PM Table contains a date field, in LibreOffice or OpenOffice the cells containing dates should be set to use the custom <code>YYYY-MM-DD</code> format. Likewise, cells containing datetimes should be set to use the custom <code>YYYY-MM-DD HH:MM:SS</code> format.</p>

<img src="../sites/default/files/DateTimeFormatLibreOffice.png">

<p>After creating a CSV file, it can be imported into a PM Table by going to <strong>ADMIN &gt; Settings &gt; PM Tables</strong>. Find the desired table in the list and click on its <strong>Data</strong> button. At the top of the table, click on the <strong>CSV Import</strong> button.</p>
<p><img src="../sites/default/files/SelectCSVFileForPMTableImport.png"></p>

<p>Then select the CSV file and click the <strong>Upload</strong> button.</p>

<p>A message should display indicating that the CSV file was imported correctly and the contents of the PM Table will be reloaded with the new data in it.</p>
<p><img src="../sites/default/files/ImportedDataInPMTable.png">

<h3><span id="Exporting_PM_Tables_to_CSV">Exporting PM Tables to CSV</span></h3>
<p>To export a CVS file into a PM Table, go to <strong>ADMIN &gt; Settings &gt; PM Tables</strong>. Find the desired table in the list and click on its <strong>Data</strong> link. At the top of the table, click on the link <strong>CSV Export</strong> choose the values separated by commas or semicolons and click on <strong>Export</strong>:</p>
<p><img alt="" src="../sites/default/files/ExportPMTableCSV.png" height="122" width="275"></p>
<p>The file will download on the user's computer.</p>
<h2><span id="Exporting_PM_Tables">Exporting PM Tables</span></h2>
<p>To export a PM table from inside the ProcessMaker interface, go to <strong>ADMIN &gt; Settings &gt;PM Tables</strong> select the desired table and click on the <strong>Export</strong> link at the top of the list. Select whether to export the table's <strong>Schema</strong> (structure), the <strong>Data</strong>, or both.</p>
<p>Finally, click on the <strong>Export</strong> link at the bottom, to generate a <strong><tt>.pmt</tt></strong> file, which can be downloaded and saved.</p>
<p>If planning on exporting PM table(s) and all their data to another installation of ProcessMaker, select both the schema and data. If planning on exporting the data to an external spreadsheet or database, then only select a <i>single</i> PM Table and only export its data (not it's schema).</p>
<p><img alt="" src="../sites/default/files/ExportPMTable.png"></p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> More than one PM table can be exported at the same time.</font></p>

<h2><span id="Importing_PM_Tables">Importing PM Tables</span></h2>
<p>To import a PM table from inside the ProcessMaker interface, go to <strong>ADMIN &gt; Settings &gt;PM Tables</strong> click on the <strong>Import</strong> link at the top of the list and select a <strong><tt>.pmt</tt></strong> file. Finally click on <strong>Upload</strong> button</p>
<p><img alt="" src="../sites/default/files/ImportReportTable.png"></p>
<p>If the PM table will be replaced with another mark the <i>Overwrite if exists?</i> checkbox.</p>
<h2><span id="Reserved_Words_in_PM_Tables">Reserved Words in PM Tables</span></h2>
<p>From version <strong>2.0.43</strong> on, ProcessMaker checks that reserved words are not used in the name of PM Tables and their fields, since these words may cause conflicts with database queries. If using a prior version of ProcessMaker, make sure that the following reserved words are not used for the names of tables or fields.</p>Do
NOT use the following MySQL reserved words as field names for PM Tables:</p>
<div>

    <div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">ACCESSIBLE, ACTION, ADD, ALL, ALTER, ANALYZE, AND, ANY, AS, ASC, ASENSITIVE, AUTHORIZATION, BACKUP, BEFORE, BEGIN, BETWEEN, BIGINT, BINARY, BIT, BLOB, BOTH, BREAK, BROWSE, BULK, BY, CALL, CASCADE, CASE, CHANGE, CHAR, CHARACTER, CHECK, CHECKPOINT, CLOSE, CLUSTERED, COALESCE, COLLATE, COLUMN, COMMIT, COMPUTE, CONDITION, CONSTRAINT, CONTAINS, CONTAINSTABLE, CONTINUE, CONVERT, CREATE, CROSS, CURRENT, CURRENT_DATE, CURRENT_TIME, CURRENT_TIMESTAMP, CURRENT_USER, CURSOR, DATABASE, DATABASES, DATE, DAY_HOUR, DAY_MICROSECOND, DAY_MINUTE, DAY_SECOND, DBCC, DEALLOCATE, DEC, DECIMAL, DECLARE, DEFAULT, DELAYED, DELETE, DENY, DESC, DESCRIBE, DETERMINISTIC, DISK, DISTINCT, DISTINCTROW, DISTRIBUTED, DIV, DOUBLE, DROP, DUAL, DUMMY, DUMP, EACH, ELSE, ELSEIF, ENCLOSED, END, ENUM, ERRLVL, ESCAPE, ESCAPED, EXCEPT, EXEC, EXECUTE, EXISTS, EXIT, EXPLAIN, FALSE, FETCH, FILE, FILLFACTOR, FLOAT, FLOAT4, FLOAT8, FOR, FORCE, FOREIGN, FREETEXT, FREETEXTTABLE, FROM, FULL, FULLTEXT, FUNCTION, GENERAL, GOTO, GRANT, GROUP, HAVING, HIGH_PRIORITY, HOLDLOCK, HOUR_MICROSECOND, HOUR_MINUTE, HOUR_SECOND, IDENTITY, IDENTITYCOL, IDENTITY_INSERT, IF, IGNORE, IGNORE_SERVER_IDS, IN, INDEX, INFILE, INNER, INOUT, INSENSITIVE, INSERT, INT, INT1, INT2, INT3, INT4, INT8, INTEGER, INTERSECT, INTERVAL, INTO, IS, ITERATE, JOIN, KEY, KEYS, KILL, LEADING, LEAVE, LEFT, LIKE, LIMIT, LINEAR, LINENO, LINES, LOAD, LOCALTIME, LOCALTIMESTAMP, LOCK, LONG, LONGBLOB, LONGTEXT, LOOP, LOW_PRIORITY, MASTER_HEARTBEAT_PERIOD, MASTER_SSL_VERIFY_SERVER_CERT, MATCH, MAXVALUE, MEDIUMBLOB, MEDIUMINT, MEDIUMTEXT, MIDDLEINT, MINUTE_MICROSECOND, MINUTE_SECOND, MOD, MODIFIES, NATIONAL, NATURAL, NO, NOCHECK, NONCLUSTERED, NOT, NO_WRITE_TO_BINLOG, NULL, NULLIF, NUMERIC, OF, OFF, OFFSETS, ON, OPEN, OPENDATASOURCE, OPENQUERY, OPENROWSET, OPENXML, OPTIMIZE, OPTION, OPTIONALLY, OR, ORDER, OUT, OUTER, OUTFILE, OVER, PERCENT, PLAN, PRECISION, PRIMARY, PRINT, PROC, PROCEDURE, PUBLIC, PURGE, RAISERROR, RANGE, READ, READS, READTEXT, READ_WRITE, REAL, RECONFIGURE, REFERENCES, REGEXP, RELEASE, RENAME, REPEAT, REPLACE, REPLICATION, REQUIRE, RESIGNAL, RESTORE, RESTRICT, RETURN, REVOKE, RIGHT, RLIKE, ROLLBACK, ROWCOUNT, ROWGUIDCOL, RULE, SAVE, SCHEMA, SCHEMAS, SECOND_MICROSECOND, SELECT, SENSITIVE, SEPARATOR, SESSION_USER, SET, SETUSER, SHOW, SHUTDOWN, SIGNAL, SLOW, SMALLINT, SOME, SPATIAL, SPECIFIC, SQL, SQLEXCEPTION, SQLSTATE, SQLWARNING, SQL_BIG_RESULT, SQL_CALC_FOUND_ROWS, SQL_SMALL_RESULT, SSL, STARTING, STATISTICS, STRAIGHT_JOIN, SYSTEM_USER, TABLE, TERMINATED, TEXT, TEXTSIZE, THEN, TIME, TIMESTAMP, TINYBLOB, TINYINT, TINYTEXT, TO, TOP, TRAILING, TRAN, TRANSACTION, TRIGGER, TRUE, TRUNCATE, TSEQUAL, UNDO, UNION, UNIQUE, UNLOCK, UNSIGNED, UPDATE, UPDATETEXT, USAGE, USE, USER, USING, UTC_DATE, UTC_TIME, UTC_TIMESTAMP, VALUES, VARBINARY, VARCHAR, VARCHARACTER, VARYING, VIEW, WAITFOR, WHEN, WHERE, WHILE, WITH, WRITE, WRITETEXT, XOR, YEAR_MONTH, ZEROFILL</div></div>
</div>

<p>For more information about reserved words please check <a class="external text" href="http://dev.mysql.com/doc/refman/5.5/en/keywords.html" rel="nofollow" target="_blank">this documentation</a>. Also do NOT use the following PHP reserved words as field names for PM Tables:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">case, catch, cfunction, class, clone, const, continue, declare, default, do, else, elseif, enddeclare, endfor, endforeach, endif, endswitch, endwhile, extends, final, for, foreach, function, global, goto, if, implements, interface, instanceof, private, namespace, new, old_function, or, throw, protected, public, static, switch, xor, try, use, var, while</div></div>


<p>Also do NOT use the following reserved words in ProcessMaker:</span>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">SYNONYM, APP_UID, ROW, PMTABLE</div></div>


<h2><span id="Accessing_PM_Tables_from_Triggers">Accessing PM Tables from Triggers</span></h2>

<p>It is possible to use PHP code in triggers to read and manipulate the information in PM Tables. Either use the <a href="ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a> function or Propel classes to access PM Tables.</p>


<h3><span id="Querying_a_PM_Table">Querying a PM Table</span></h3>

<p>Use a <code>SELECT</code> statement to read from a PM Table</p>

<p>For example, a PM Table called "PMT_CONTACTS", which contains the fields "ID", "FIRSTNAME", "LASTNAME" and "BIRTHDAY" can be accessed with <a href="ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a>.</p>

<p>To read a single row from the <b><tt>PMT_CONTACTS</tt></b> table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM PMT_CONTACTS WHERE ID=23&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #339933;">@@</span>firstname <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FIRSTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #339933;">@@</span>lastname &nbsp;<span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'LASTNAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #339933;">@@</span>birthday &nbsp;<span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'BIRTHDAY'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> It is not necessary to specify the database, since executeQuery() uses by default the <strong><tt>wf_&lt;workspace&gt;</tt></strong> database where the PM Tables are stored.</font></p>

<p>To search for a value which was entered in a Dynaform field by a user, make sure to  pass it through <a href="http://php.net/manual/en/function.mysql-real-escape-string.php">mysql_real_escape string()</a> to escape any problematic characters and to prevent SQL injection attacks. Assign the value to a normal PHP variable, so it can inserted inside the query string. If the value is a string of characters or a datetime, it needs to be enclosed in quotation marks.</p>

<p>This example search for all the contacts whose last or first name contains the text entered in the "nameSearch" field in a Dynaform. The results from the database query are assigned to a grid named "searchResults" which contains the "firstName", "lastName" and "birthday" fields. The fields returned by the database query are renamed using <b><code>AS</code></b> so they match the names of the fields in the grid. The search uses <code>LIKE</code> and the <a href="http://dev.mysql.com/doc/refman/5.7/en/pattern-matching.html">wildcard %</a> to be able to search in the middle of the words. The text is converted to lower case with PHP's <a href="http://php.net/manual/en/function.mb-strtolower.php">mb_strtolower()</a> function and MySQL's <a href="http://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_lower">LOWER()</a> function, so the search can be case insensitive.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$name</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>nameSearch<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">//the ProcessMaker database uses the UTF-8 character set:</span><br />
<span style="color: #000088;">$name</span> <span style="color: #339933;">=</span> <a href="http://php.net/mb_strtolower"><span style="color: #990000;">mb_strtolower</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;UTF-8&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT FIRSTNAME AS firstName, LASTNAME AS lastName, BIRTHDAY AS birthday<br />
&nbsp; &nbsp; FROM PMT_CONTACTS<br />
&nbsp; &nbsp; WHERE LOWER(FIRSTNAME) LIKE '%<span style="color: #006699; font-weight: bold;">$name</span>%' OR LOWER(LASTNAME) LIKE '%<span style="color: #006699; font-weight: bold;">$name</span>%' &quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@=</span>searchResults <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>A subsequent Dynaform in the process containing the "searchResults" grid will display the results of the
database search.</p>


<h3><span id="Querying_a_PM_Table">Inserting in a PM Table</span></h3>


<p>Use an <code>INSERT</code> statement to insert a new row into a PM Table.</p>


<p>For example, to insert a row in the "PMT_CONTACTS" table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;INSERT PMT_CONTACTS (ID, FIRSTNAME, LASTNAME, BIRTHDAY) VALUES (24, 'Jane', 'Doe', '1969-03-24'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Could not insert a new record in the PMT_CONTACTS table.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<div style="margin-left: 25px">
    <font color=green><b>Note:</b></font> <font color=dimgrey><a href="../3.0/Internal_Functions_and_Classes.html#G::SendMessageText.28.29">G::SendMessageText()</a> doesn't display if executed AFTER ROUTING. It needing to preserve the error message, it is recommended to use an <code>Exception</code> and examine the <code>@@__ERROR__</code> variable in the <a href="../3.0/Triggers.html#Debugging_Triggers">Debugger</a>.</font>
    <div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #b1b100;">throw</span> <span style="color: #000000; font-weight: bold;">new</span> Exception<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Could not insert a new record in the CONTACTS PM table.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
</div>
<p>The executeQuery() function returns the number of inserted rows, so if it returns <code>0</code>, then the insert action failed.</p>

<p>To insert a new row into the "PMT_CONTACTS" table, using data from Dynaform fields named "id", "firstName", "lastName", "birthday", create a trigger which fires <i>after</i> the Dynaform with the following code:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #666666; font-style: italic;">//assign case variables to normal PHP variables for insertion in string</span><br />
<span style="color: #000088;">$id</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@%</span>id<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$firstName</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>firstName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$lastName</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>firstName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$birthday</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>birthday<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$insert</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;INSERT INTO PMT_CONTACTS (ID, FIRSTNAME, LASTNAME, BIRTHDAY)<br />
&nbsp; &nbsp;VALUES (<span style="color: #006699; font-weight: bold;">$id</span>, '<span style="color: #006699; font-weight: bold;">$firstName</span>', '<span style="color: #006699; font-weight: bold;">$lastName</span>', '<span style="color: #006699; font-weight: bold;">$birthday</span>')&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span>executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$insert</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Could not insert new record in the PMT_CONTACTS table.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p><font color=green><b>Note:</b></font> <font color=dimgrey>The value of the ID field is not enclosed in quotation marks because it is a number. By default datetime fields in Dynaforms save their values in the same <code>YYYY-MM-DD HH:MM:SS</code> format used by MySQL datetime fields, so they can be inserted directly in the PM Table without being transformed.</font></p>


<h3><span id="Updating_a_PM_Table">Updating a PM Table</span></h3>


<p>Use an <code>UPDATE</code> statement to update information in a PM Table. Remember to add a <code>WHERE</code> clause so that it doesn't update all the rows in the table.</p>

<p>For example, to update an existing row in the <tt>PMT_CONTACTS</tt> table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;UPDATE PMT_CONTACTS SET FIRSTNAME='Buster', LASTNAME='Brown' WHERE ID=20&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to update record in the PMT_CONTACTS table.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>


<p>This example updates the PM Table with the fields "firstName", "lastName" and "birthday" from a Dynaform:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$id</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>id<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$firstName</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>firstName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$lastName</span> <span style="color: #339933;">=</span> <a href="http://php.net/mysql_real_escape_string"><span style="color: #990000;">mysql_real_escape_string</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>firstName<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;UPDATE PMT_CONTACTS SET FIRSTNAME='<span style="color: #006699; font-weight: bold;">$firstName</span>', LASTNAME='<span style="color: #006699; font-weight: bold;">$lastName</span>' WHERE ID=<span style="color: #006699; font-weight: bold;">$id</span>&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to update record in the PMT_CONTACTS table.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>


<h3><span id="Deleting_in_a_PM_Table">Deleting in a PM Table</span></h3>

<p>Use an <code>DELETE</code> statement to delete a row in a PM Table. Remember to add a <code>WHERE</code> clause so that it doesn't delete all the rows in the table.</p>


<p>To delete a row from the <tt>PMT_CONTACTS</tt> table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;DELETE FROM PMT_CONTACTS WHERE ID=20&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Did not delete any records in the PMT_CONTACTS table.&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;ERROR&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>


<h3><span id="Using_Propel_classes">Using Propel classes</span></h3>


<p>PM Tables can also be accessed through Propel classes in triggers. For instance, the same table could be accessed through its PHP class name of "Contacts". (Remember that class names are case sensitive). This example inserts a new record in the contacts PM Table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000088;">$oContacts</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Contacts<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$oContacts</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setId</span><span style="color: #009900;">&#40;</span><span style="color: #cc66cc;">23</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$oContacts</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setFirstname</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'John'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$oContacts</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setLastname</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Doe'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$oContacts</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">setBirthday</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>field1<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp;<span style="color: #000088;">$oContacts</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">save</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>See the <a class="external text" href="http://propelorm.org/documentation/" rel="nofollow">Propel documentation</a> for more information on how to access tables through Propel classes.</p>


<h3><span id="Downloading_CVS_Files_generated_from_PM_Tables">Downloading CVS Files generated from PM Tables</span></h3>

<p>Users who have the <a href="2.0/Roles.html#PM_SETUP" title="2.0/Roles"><tt>PM_SETUP</tt></a> permission in their role can easily obtain a CSV (<i>comma-separated-value</i>) file for a PM Table, by going to <strong>ADMIN &gt; Settings &gt; PM Tables</strong>. Nonetheless, normal production users with a role like <tt>PROCESSMAKER_OPERATOR</tt> can't access the ADMIN menu.</p>

<p>To workaround this problem, a <a href="2.0/Triggers.html" title="Triggers">Trigger</a> can be used to generate a CSV file from a PM Table and store that CSV file in the <a href="Process_Files_Manager.html" title="Process Files Manager">Process Files Manager's</a> <strong><tt>public</tt></strong> directory, where it can be accessed through a <a href="2.0/Links.html" title="2.0/Links">link</a> in a Dynaform.</p>

<p>Create a Trigger with the following code to query the PM Table and create a CSV file in the <strong><tt>public</tt></strong> directory:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$tableName</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'PMT_CONTACTS'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//change for your PM Table</span><br />
<span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DATA_PUBLIC <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> PATH_SEP<span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/is_dir"><span style="color: #990000;">is_dir</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<a href="http://php.net/mkdir"><span style="color: #990000;">mkdir</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #339933;">,</span> <span style="color: #208080;">0770</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error creating directory '<span style="color: #006699; font-weight: bold;">$path</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$sFile</span> <span style="color: #339933;">=</span> <a href="http://php.net/tempnam"><span style="color: #990000;">tempnam</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #339933;">,</span> <span style="color: #000088;">$tableName</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.csv'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$fFile</span> <span style="color: #339933;">=</span> <a href="http://php.net/fopen"><span style="color: #990000;">fopen</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$sFile</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'w+'</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error opening file '<span style="color: #006699; font-weight: bold;">$sFile</span>' for writing!&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT * FROM <span style="color: #006699; font-weight: bold;">$tableName</span>&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$table</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$table</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$record</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; <span style="color: #000088;">$line</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$record</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$field</span><span style="color: #339933;">=&gt;</span><span style="color: #000088;">$value</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp;<span style="color: #000088;">$line</span> <span style="color: #339933;">.=</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$line</span><span style="color: #339933;">==</span><span style="color: #0000ff;">''</span> ? <span style="color: #0000ff;">''</span> <span style="color: #339933;">:</span> <span style="color: #0000ff;">', '</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$value</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">;</span><br />
&nbsp; <span style="color: #009900;">&#125;</span><br />
&nbsp; <a href="http://php.net/fwrite"><span style="color: #990000;">fwrite</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fFile</span><span style="color: #339933;">,</span> <span style="color: #000088;">$line</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<a href="http://php.net/fclose"><span style="color: #990000;">fclose</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fFile</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <a href="http://php.net/pathinfo"><span style="color: #990000;">pathinfo</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$sFile</span><span style="color: #339933;">,</span> PATHINFO_BASENAME<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>linkUrl <span style="color: #339933;">=</span> <span style="color: #0000ff;">'../'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>PROCESS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$filename</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>linkLabel <span style="color: #339933;">=</span> <span style="color: #000088;">$filename</span><span style="color: #339933;">;</span></div></div>

<p>Then, create a <a href="https://wiki.processmaker.com/index.php/2.0/DynaForms" title="2.0/DynaForms">Dynaform</a> with a <a href="2.0/Links.html" title="2.0/Links">link</a> field named "linkFile" and two <a href="2.0/Other_DynaForm_Fields.html#Hidden" title="2.0/Other DynaForm Fields">hidden</a> fields named "linkUrl" and "linkLabel". Add the following JavaScript to the Dynaform to set the URL and label for the link field:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">getField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;linkFile&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>href <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;linkUrl&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>value<span style="color: #339933;">;</span><br />
getField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;linkFile&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>innerHTML <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;linkLabel&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>value<span style="color: #339933;">;</span></div></div>

<p>Set the Trigger to fire <i>before</i> the Dynaform, so the file will be ready for download and the case variables <tt>@@linkUrl</tt> and <tt>@@linkLabel</tt> will already be set when the Dynaform is displayed. Then, the user can click on "linkFile" and download the CSV file.</p>


<h3><span id="Saving_PM_Tables_as_Input_Documents">Saving PM Tables as Input Documents</span></h3>


<p>The following example queries a PM Table to create a <i>comma separated value</i> (CSV) file, which is then uploaded as an Input Document in the current case. Users who can access the current case can then download the CSV file and import it into any spreadsheet program, such as Excel or OpenOffice Calc. Unlike the previous example which placed the CSV file in the <tt>public</tt> directory, this CSV file will be placed in a restricted place so that only users who have access to the current case can download it.


<p>First, create an Input Document in the process and get its UID. In this example, the Input Document has the UID "86062325056a02c39e62e51079553933".


<p>Then, add the following trigger to the process to query the PM Table and generate a CSV file. In this example, a PM Table is queried which is named PMT_CONTACTS, which has the ID, FIRSTNAME, LASTNAME, ADDRESS and BIRTHDAY fields.

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$pmTable</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'PMT_CONTACTS'</span><span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//set to the name of your PM Table</span><br />
<span style="color: #000088;">$InpDocUid</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'86062325056a02c39e62e51079553933'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to the UID of your input document</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT * FROM <span style="color: #006699; font-weight: bold;">$pmTable</span>&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aRows</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRows</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRow</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to query PMT_CONTACTS or table is empty.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$aOut</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$row</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #666666; font-style: italic;">//create the first row in the CSV file which has the field names</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/array_keys"><span style="color: #990000;">array_keys</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRows</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$fieldName</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$row</span> <span style="color: #339933;">.=</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$row</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">';'</span> <span style="color: #339933;">:</span> <span style="color: #0000ff;">''</span> <span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span> <span style="color: #339933;">.</span><span style="color: #000088;">$fieldName</span><span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #000088;">$aOut</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$row</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRows</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$aRow</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$row</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$aRow</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$fieldVal</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$row</span> <span style="color: #339933;">.=</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$row</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">';'</span> <span style="color: #339933;">:</span> <span style="color: #0000ff;">''</span> <span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span> <span style="color: #339933;">.</span><span style="color: #000088;">$fieldVal</span><span style="color: #339933;">.</span> <span style="color: #0000ff;">'&quot;'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aOut</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$row</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<br />
<span style="color: #000088;">$d</span> <span style="color: #339933;">=</span> <a href="http://php.net/date"><span style="color: #990000;">date</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Y-m-d_H:i:s'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <a href="http://php.net/substr"><span style="color: #990000;">substr</span></a><span style="color: #009900;">&#40;</span><a href="http://php.net/microtime"><span style="color: #990000;">microtime</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">9</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <a href="http://php.net/sys_get_temp_dir"><span style="color: #990000;">sys_get_temp_dir</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;/<span style="color: #006699; font-weight: bold;">$pmTable_</span><span style="color: #006699; font-weight: bold;">$d</span>.csv&quot;</span><span style="color: #339933;">;</span><br />
<br />
<a href="http://php.net/file_put_contents"><span style="color: #990000;">file_put_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$filename</span><span style="color: #339933;">,</span> <a href="http://php.net/implode"><span style="color: #990000;">implode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;<span style="color: #000099; font-weight: bold;">\n</span>&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aOut</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> or<br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to write to file '<span style="color: #006699; font-weight: bold;">$filename</span>'.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$params</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a> <span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'ATTACH_FILE'</span> &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'@'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$filename</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'APPLICATION'</span> &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'INDEX'</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>INDEX<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'USR_UID'</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'DOC_UID'</span> &nbsp; &nbsp; &nbsp;<span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$InpDocUid</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'APP_DOC_TYPE'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #0000ff;">'INPUT'</span><br />
<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/ob_flush"><span style="color: #990000;">ob_flush</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$url</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;http://<span style="color: #006699; font-weight: bold;">{$_SERVER['SERVER_NAME']}</span>:<span style="color: #006699; font-weight: bold;">{$_SERVER['SERVER_PORT']}</span>/sysworkflow/en/neoclassic/services/upload&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$ch</span> <span style="color: #339933;">=</span> <a href="http://php.net/curl_init"><span style="color: #990000;">curl_init</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$url</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt($ch, CURLOPT_VERBOSE, 1); &nbsp;//Uncomment to debug</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_RETURNTRANSFER<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_POST<span style="color: #339933;">,</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_setopt"><span style="color: #990000;">curl_setopt</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #339933;">,</span> CURLOPT_POSTFIELDS<span style="color: #339933;">,</span> <span style="color: #000088;">$params</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 1); //Uncomment for SSL</span><br />
<span style="color: #666666; font-style: italic;">// curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 1); //Uncomment for SSL</span><br />
<span style="color: #000088;">$response</span> <span style="color: #339933;">=</span> <a href="http://php.net/curl_exec"><span style="color: #990000;">curl_exec</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/curl_close"><span style="color: #990000;">curl_close</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$ch</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/unlink"><span style="color: #990000;">unlink</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$filename</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$response</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'INFO'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Make sure to change the <code>$pmTable</code> and <code>$InpDocUid</code> to the name of the PM Table and the unique ID of the Input Document, respectively. This trigger code generates a temporary CSV file which contains the content of the PM Tabble. It then use the uses the <a href="PM_Tables.html">/services/upload service</a> to upload the temporary CSV file to the Input Document. It then deletes the temporary file and displays the response message from the <tt>services/upload</tt> service</p>Set the above trigger to fire before the Input Document step in the process. When a case is run, the CSV file should
appear as a file in the Input Document.

<img src="../sites/default/files/ExportPMTableAsInputDoc.png">



<h2><span id="Accessing_PM_Tables_in_DynaForms">Accessing PM Tables in Dynaforms</span></h2>

<p>PM Tables can be integrated into Dynaforms in three ways:</p>
<p>
    <ol>

        <li><a href="PM_Tables.html#Querying_PM_Tables_in_DynaForm_Fields">Using SQL SELECT queries in individual Dynaform fields</a></li>
        <li><a href="PM_Tables.html#Creating_DynaForms_based_on_PM_Tables">Creating new Dynaforms based upon the fields in a PM Table</a></li>

        <li><a href="PM_Tables.html#Read.2FWrite_Access_to_PM_Tables_in_DynaForm_Fields">Manually adding Read/Write Access to PM Tables in Dynaform Fields</a></li>
    </ol>
</p>

<p>The first method provides read-only access to the PM Table, whereas the latter two allows entered data to be added as a record in the PM Table.</p>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> From version 2.0.35 If a querying to a PM Table to populate any field of a Dynaform is required, the table must be written with the PMT prefix, otherwise queries won't work.</font></p>


<h3><span id="Querying_PM_Tables_in_DynaForm_Fields">Querying PM Tables in Dynaform Fields</span></h3>

<p>Dynaform fields can obtain <i>read-only</i> access to PM Tables with a standard <a href="2.0/Common_Field_Properties.html#SQL">SQL SELECT</a> statement. Since PM Tables are stored in the <strong><tt>wf_&lt;workspace&gt;</tt></strong> database, the <strong>SQL Connection</strong> property can be left blank, since it will select that database by default if blank. In the <strong>SQL</strong> property, put the <tt>SELECT</tt> statement.</p>

<h4><span id="Populating_lists_of_options">Populating lists of options</span></h4>

<p>If querying a PM Table to populate a list of options in a dropdown box, listbox, suggest box, radiogroup or checkgroup, then the SQL <code>SELECT</code> statement should return two fields. The first is the <i>value</i> field (which should be unique) and the second is the <i>label</i> field (which is what is displayed to the user).</p>

<p>For example, a dropdown box could populate its list of options with the last names found in the <strong><tt>PMT_CONTACTS</tt></strong> table used in the previous example. Its <strong>SQL</strong> property would be:</p>

<span class="geshifilter"><code class="sql geshifilter-sql"><span style="color: #993333; font-weight: bold;">SELECT</span> ID<span style="color: #66cc66;">,</span> LASTNAME <span style="color: #993333; font-weight: bold;">FROM</span> PMT_CONTACTS</code></span>

<p>and its complete XML definition would look something like this:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;SelectContact</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;dropdown&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">savelabel</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">options</span>=<span style="color: #ff0000;">&quot;Array&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; &nbsp; <span style="color: #339933;">&lt;![CDATA[SELECT ID, LASTNAME FROM PMT_CONTACTS]]&gt;</span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Select Contact &nbsp;<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;option</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span><span style="color: #000000; font-weight: bold;">&lt;/option<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
&nbsp; &nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/SelectContact<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>To display more than one field in the <i>label</i>, use the CONCAT() function to combine more than one field. For example, to combine the FIRSTNAME and LASTNAME fields in the label:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> ID<span style="color: #66cc66;">,</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS</div></div>

<h4><span id="Populating_ordinary_fields">Populating ordinary fields</span></h4>

<p>To query a PM Table in order to populate the value of a textbox, currency box, percentage box, textarea, or hidden field, use an SQL <tt>SELECT</tt> statement which only returns one field from one record. If more than one record is returned, only the first record will be used.</p>

<p>For instance, to select the contact whose ID is 907:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS <span style="color: #993333; font-weight: bold;">WHERE</span> ID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'907'</span></div></div>

<h4><span id="Using_Variables_in_SQL_Queries">Using Variables in SQL Queries</span></h4>

<p>There are two ways to use variable(s) in a query to a PM Table. Either use a system or case variable which has been passed to the Dynaform as a hidden field or reference another field in the Dynaform which has a dependent field relationship with the current field.</p>

<h5><span id="System_or_case_variables_in_SQL_Queries">System or case variables in SQL Queries</span></h5>

<p>A system or case variable can be used in the SQL query to a PM Table. System variables are created automatically by ProcessMaker, but case variables either have to be created from a field in a previous Dynaform (which was submitted) in the case or defined in a previous trigger in the case. System and case variables can be passed to the current Dynaform by creating a hidden field with the same name as the case variable.</p>

<p>For example, to use the case variable @@ContactId in an SQL query to a PM Table, first create a hidden field named "ContactId" in the Dynaform. Remember the field names are case sensitive, so the field name has to be spelled exactly like the case variable.</p>

<p>Then, add an SQL query to a field which references the case variable. To enclose the value of the variable inside quotation marks, reference it as <strong><tt>@@ContactId</tt></strong>.</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS <span style="color: #993333; font-weight: bold;">WHERE</span> ID<span style="color: #66cc66;">=</span>@@ContactId</div></div>

<p>If the variable is a number, then reference it as <strong><tt>@#ContactId</tt></strong> to not enclose it in inside quotation marks:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS <span style="color: #993333; font-weight: bold;">WHERE</span> ID<span style="color: #66cc66;">=</span>@#ContactId</div></div>

<h5><span id="SQL_Queries_with_Dependent_Fields">SQL Queries with Dependent Fields</span></h5>

<p>If a <a href="2.0/Common_Field_Properties.html#Dependent_Fields" title="2.0/Common Field Properties">dependent field relationship</a> has been established with another field, then the value of the independent field can be references as a variable in the SQL query. Whenever the value of the independent field changes in the Dynaform, the query will be reexecuted and the dependent field will be repopulated.</p>

<p>In this example, the value in the "ContactId" field will determine which contact's full name is displayed in a textbox:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS <span style="color: #993333; font-weight: bold;">WHERE</span> ID<span style="color: #66cc66;">=</span>@@ContactId</div></div>

<p>Or if the ID is a number:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CONCAT<span style="color: #66cc66;">&#40;</span>FIRSTNAME<span style="color: #66cc66;">,</span> <span style="color: #ff0000;">' '</span><span style="color: #66cc66;">,</span> LASTNAME<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTACTS <span style="color: #993333; font-weight: bold;">WHERE</span> ID<span style="color: #66cc66;">=</span>@#ContactId</div></div>

<h4><span id="Populating_DynaForm_Grids">Populating Dynaform Grids</span></h4>

<p>In order to display a PM Table in a Dynaform grid, first create a grid form which has the field names which are the same as those found in the PM Table. Then, embed that grid form in a master form. Finally, create a trigger which will use executeQuery("SELECT ...") to return an array of records from the PM Table. Assign that array of records to a case variable which has the same names as the <a href="2.0/Grids.html" title="2.0/Grids">grid object</a> in the master Dynaform. Set the trigger to fire before the master Dynaform is displayed.</p>

<p>For example, the following trigger code would populate a grid object named "ContactsGrid":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@@</span>ContactsGrid <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT ID, FIRSTNAME, LASTNAME, BIRTHDAY FROM CONTACTS&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>If the field names in the grid form are not named "ID", "FIRSTNAME", "LASTNAME" and "BIRTHDAY", then use <tt>AS</tt> to rename the returned fields from the PM Table to the names used in the grid form. For example, the fields from the CONTACTS table could be renamed as "ContactID", "ContactFName", "ContactLName" and "ContactBirthday", respectively:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>ContactsGrid <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT ID AS ContactID, FIRSTNAME AS ContactFName, &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; <span style="color: #0000ff;">&quot;LASTNAME AS ContactLName, BIRTHDAY AS ContactBirthday FROM CONTACTS&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>To write the changes in a Dynaform grid to a PM Table, set a trigger to fire after the Dynaform with code to delete all the contents of the old PM Table. Then write each row from the grid into the new PM Table. For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;DELETE FROM CONTACTS&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//delete all rows in table</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>ContactsGrid <span style="color: #b1b100;">as</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;INSERT INTO CONTACTS (ID, FIRSTNAME, LASTNAME, BIRTHDAY) VALUES &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">&quot;('<span style="color: #006699; font-weight: bold;">{$row['ContactID']}</span>', '<span style="color: #006699; font-weight: bold;">{$row['ContactFName']}</span>', '<span style="color: #006699; font-weight: bold;">{$row['ContactLName']}</span>', '<span style="color: #006699; font-weight: bold;">{$row['ContactBirthday']}</span>')&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>When inserting PHP variables into double quoted strings (as in the example above), remember to enclose the variable names inside curly braces <tt>{}</tt> to access elements inside associative arrays.</p>

<h3><span id="Creating_DynaForms_based_on_PM_Tables">Creating Dynaforms based on PM Tables </span></h3>

<p>From version 1.6-3862 on, Dynaforms can be created based upon the fields in a PM Table. All the fields in the PM Table become fields in the Dynaform. The benefit is that the fields are automatically configured with write access to the PM Table. When the Dynaform is submitted, a new record is automatically added to the PM Table, with the data entered into the Dynaform.</p>

<p>First, <a href="PM_Tables.html#Creating_PM_Tables_from_version_2.0.35" title="PM Tables">create a PM Table</a> with all the fields that will be used in needed in the Dynaform. After creating the PM Table, go to <strong>PROCESS &gt; Dynaforms</strong> to view the list of Dynaforms. Click on the <strong>New</strong> link at the top of the list to <a href="https://wiki.processmaker.com/index.php/2.0/DynaForms#Creating_DynaForms" title="2.0/DynaForms">create a new Dynaform</a>. Rather than the <strong>Blank Dynaform</strong> option, select the <strong>PM Table Dynaform</strong> option:</p>

<p><img alt="" src="../sites/default/files/DynaFormCreationPMTables.png" height="212" width="455"></p>

<p>Then, select which PM Table the Dynaform structure will be based upon:</p>

<p>Then, select the variables to use as indexes to relate the Dynaform to records in the PM Table. Now, click on <strong>Save</strong> to save the new Dynaform without editing or <strong>Save &amp; Open</strong> to save it and immediately start editing it.</p>

<p><img alt="" src="../sites/default/files/DynaFormCreatedFromPMTable.png" height="256" width="462"></p>

<p>The Dynaform is created by default with all the fields from the PM Table. Dynaform fields can be removed or added as required, but remember that any added fields in the Dynaform will not be stored in the PM Table.</p>

<h3><span id="Read.2FWrite_Access_to_PM_Tables_in_DynaForm_Fields">Read/Write Access to PM Tables in Dynaform Fields</span></h3>

<p>As of version 1.2-2552, it is possible to obtain <i>read</i> and <i>write</i> access to a single record in a PM Table through a Dynaform. A field in a PM Table record can be associated with a Dynaform field by editing its XML definition. The data entered in the Dynaform field will be automatically updated in the PM Table.</p>

<p>In order to associate fields in a Dynaform with the fields from a single record in a PM Table, first go to the <strong>PM TABLES</strong> tab under <strong>ADMIN</strong> (formerly called <strong>SETUP</strong>). Select the desired PM Table from the list and click its <strong>Edit</strong> link. Then, look in the address of your web browser to find the UID of the PM Table. For instance, in the URL:<br><code>http://localhost/sysworkflow/en/green/additionalTables/additionalTablesEdit?sUID=<strong>8978302234afeaeff4f2773061370232</strong></code></p>

<p>Copy the UID of the PM Table. Then, open a Dynaform and go to the <strong>XML</strong> tab to directly edit the XML code. Add a line near the top to establish a <strong><tt>pmconnection</tt></strong> to the PM Table. The <strong><tt>pmconnection</tt></strong> should be given a name which will be used to identify it when used in later elements of the Dynaform. Use the XML attribute <strong><tt>pmtable</tt></strong> to specify the UID of the PM Table and the XML attribute <strong><tt>keys</tt></strong> to specify the primary key(s) of the record to be retrieved from the PM Table:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;">&lt;PM-CONNECTION-NAME type=&quot;pmconnection&quot; pmtable=&quot;PM-TABLE-UID&quot; keys=&quot;PRIMARY-KEY-VALUE&quot; /&gt;</div></div>

<p>In this example a pmconnection called "CONTACTS_CONNECTION" is defined for the record whose primary key is 909.</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;CONTACTS_CONNECTION</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;6119139294a843924e70988028788673&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;909&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></div>

<p>Always enclose the primary key value in quotes, even if its data type is not a string. If the primary key is a date, use the format "YYYY-MM-DD".</p>

<p>If a PM Table contains multiple primary keys, the key values can be separated by pipes (|) or by commas (,). List the values in the same order which the fields appear in the PM Table. For instance, if a PM Table has a primary key which is a combination of the fields "name", "birthday" and "income":</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;CONTACTS_CONNECTION</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;6119139294a843924e70988028788673&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;John Doe|1973-12-31|35000&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></div>

<p>The <strong><tt>keys</tt></strong> attribute can also be set to a variable referring to another field in the Dynaform, however, the value of the variable will only be read when the Dynaform is first displayed, so it must be the default value of the field or a value set by a trigger beforehand. (Setting the value of the field with JavaScript will not work, since JavaScript code is run after the Dynaform is displayed.) For example, if trigger is fired beforehand with code:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@%</span>SelectID <span style="color: #339933;">=</span> <span style="color: #cc66cc;">3</span><span style="color: #339933;">;</span></div></div>

<p>and a Dynaform contains a hidden field named "SelectID", then the following pmconnection could refer to @#SelectID:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;CONTACTS_CONNECTION</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;6119139294a843924e70988028788673&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;@#SelectID&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></div>

<p>After creating a pmconnection, its data can be accessed from a Dynaform field by using the XML attribute <strong><tt>pmconnection</tt></strong> to specify the name of the pmconnection and the XML attribute <strong><tt>pmfield</tt></strong> to specify the name of the field in the PM Table which will be associated with the field in the Dynaform:</p>

<span class="geshifilter"><code class="text geshifilter-text">&lt;DYNAFORM-FIELD-NAME ... pmconnection=&quot;PM-CONNECTION-NAME&quot; pmfield=&quot;PM-FIELD-NAME&quot;&gt; ... &lt;/DYNAFORM-FIELD-NAME&gt;</code></span>

<p>For example, here the Dynaform field "ContactId" is associated with the "ID" field in the CONTACTS table:</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ContactId</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;50&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">pmconnection</span>=<span style="color: #ff0000;">&quot;CONTACTS_CONNECTION&quot;</span> <span style="color: #000066;">pmfield</span>=<span style="color: #ff0000;">&quot;ID&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>ID<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ContactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>It is possible to have any number of different pmconnections to PM Tables in a Dynaform. The pmconnections can be different queries to the same PM Table and/or queries to different PM Tables.</p>

<p>For instance, it this example, Dynaform fields are associated with two different pmconnections:

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;CONTACTS_CONNECTION</span> &nbsp;<span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;611a139c94a843924e709eb028788673&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;@#ContactId&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;COMPANIES_CONNECTION</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;347a7b790cd119139294a84392bf709c&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;ACME&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;FirstName</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;50&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">pmconnection</span>=<span style="color: #ff0000;">&quot;CONTACTS_CONNECTION&quot;</span> <span style="color: #000066;">pmfield</span>=<span style="color: #ff0000;">&quot;FIRSTNAME&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>First Name<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ContactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;LastName</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;50&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">pmconnection</span>=<span style="color: #ff0000;">&quot;CONTACTS_CONNECTION&quot;</span> <span style="color: #000066;">pmfield</span>=<span style="color: #ff0000;">&quot;LASTNAME&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Last Name<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/LastName<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;Company</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">maxlength</span>=<span style="color: #ff0000;">&quot;64&quot;</span> <span style="color: #000066;">validate</span>=<span style="color: #ff0000;">&quot;Any&quot;</span> <span style="color: #000066;">required</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">readonly</span>=<span style="color: #ff0000;">&quot;0&quot;</span> <span style="color: #000066;">size</span>=<span style="color: #ff0000;">&quot;50&quot;</span></span><br />
<span style="color: #009900;"> &nbsp;<span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">pmconnection</span>=<span style="color: #ff0000;">&quot;COMPANIES_CONNECTION&quot;</span> <span style="color: #000066;">pmfield</span>=<span style="color: #ff0000;">&quot;CO_NAME&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span><br />
&nbsp; <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>Company Name<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/en<span style="color: #000000; font-weight: bold;">&gt;</span></span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/Company<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></div></div>

<p>At this point it is not possible to obtain use a pmconnection to obtain read/write access to grids or query more than one record at a time, but that functionality will come in future versions of ProcessMaker.</p>

<p>It is not possible to automatically create new records in the PM Table using a Dynaform. If a new record in the PM Table needs to be created every time the Dynaform is displayed, fire a trigger before the Dynaform is displayed to create a new blank record, then use the Dynaform to fill the values in that blank record.</p>

<p>In this example, a trigger is used to create a new record in the PM Table before the Dynaform is displayed. A primary key is generated for the new record by adding one to the highest current primary key in the PM Table:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$executeQuery</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT MAX(ID) FROM CONTACTS&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&amp;&amp;</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$nextId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'MAX(ID)'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">+</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #666666; font-style: italic;">// if no table records</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$nextId</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;INSERT INTO CONTACTS (ID) VALUES ('<span style="color: #006699; font-weight: bold;">$nextId</span>')&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@%</span>NewID <span style="color: #339933;">=</span> <span style="color: #000088;">$nextId</span><span style="color: #339933;">;</span></div></div>

<p>The Dynaform has a hidden field named "NewID" and a pmconnection named "CONTACTS_CONNECT":</p>

<div class="geshifilter"><div class="xml geshifilter-xml" style="font-family:monospace;"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;CONTACTS_CONNECT</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;pmconnection&quot;</span> <span style="color: #000066;">pmtable</span>=<span style="color: #ff0000;">&quot;611a139c94a843924e709eb028788673&quot;</span> <span style="color: #000066;">keys</span>=<span style="color: #ff0000;">&quot;@#NewID&quot;</span> <span style="color: #000000; font-weight: bold;">/&gt;</span></span><br />
<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;NewID</span> <span style="color: #000066;">type</span>=<span style="color: #ff0000;">&quot;hidden&quot;</span> <span style="color: #000066;">mode</span>=<span style="color: #ff0000;">&quot;edit&quot;</span> <span style="color: #000066;">btn_cancel</span>=<span style="color: #ff0000;">&quot;Cancel&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></div></div>

<p>The hidden field is needed to pass the case variable to the Dynaform, so its value can be accessed by the pmconnection.</p>
</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&mt=8" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com">
		<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&gid=3970335&trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF"> Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;"></span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>
</html>
