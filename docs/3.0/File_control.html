<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="https://wiki.processmaker.com/index.html" />
<link rel="shortcut icon" href="https://wiki.processmaker.com/themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="https://wiki.processmaker.com/3.0/File_control.html" />
<link rel="shortlink" href="https://wiki.processmaker.com/node/429.html" />
<title>3.0 - File Control | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/system/system.base.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.messages.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.theme.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/aggregator/aggregator.css?s743n7");
@import url("https://wiki.processmaker.com/modules/comment/comment.css?s743n7");
@import url("https://wiki.processmaker.com/modules/field/theme/field.css?s743n7");
@import url("https://wiki.processmaker.com/modules/node/node.css?s743n7");
@import url("https://wiki.processmaker.com/modules/search/search.css?s743n7");
@import url("https://wiki.processmaker.com/modules/toc_filter/toc_filter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/user/user.css?s743n7");
@import url("https://wiki.processmaker.com/modules/views/css/views.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.css?s743n7");
@import url("https://wiki.processmaker.com/modules/ctools/css/ctools.css?s743n7");
@import url("https://wiki.processmaker.com/sites/all/modules/geshifilter/geshifilter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/panels/css/panels.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus_default.css?s743n7");
@import url("https://wiki.processmaker.com/modules/fivestar/css/fivestar.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/style.css?s743n7");
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/media.css?s743n7");
</style>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/jquery/1.9/jquery.min.js?v=1.9.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/drupal.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.bgiframe.js?v=2.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.hoverIntent.js?v=0.5"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/superfish.js?v=1.4.8"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/nice_menus.js?v=1.0"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/ui/external/jquery.cookie.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/misc/jquery.form.min.js?v=2.69"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/ajax.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/js/jquery_update.js?v=0.0.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/toc_filter/toc_filter.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/sites/all/modules/colorbox/js/colorbox.js@s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.js@s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/sites/all/modules/google_analytics/googleanalytics.js@s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/progress.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.ajax.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-1.10.2.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/custom.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"TL9v8CbKp57Pc8q1wRWgKiDn4HQhwaajz4nrwd4LO-s","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-429 node-type-processmakerbpm">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="https://wiki.processmaker.com/index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="https://wiki.processmaker.com/3.0/File_Control.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-9nL9vTgL6PaLlv__TFqQs_LZuajPASQLkxZ11bVLleY" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.0 - File Control</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="https://wiki.processmaker.com/3.2/File_control.html" class="">3.3</a></li><li><a href="https://wiki.processmaker.com/3.2/File_control.html" class="">3.2</a></li><li><a href="https://wiki.processmaker.com/3.1/File_control.html" class="">3.1</a></li><li><a  class="active-version">3.0</a></li><li><a href="https://wiki.processmaker.com/index.php/2.0/Files.html" class="">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.0 - File Control" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-processmakerbpm">
    <div class="field field-name-field-how-useful-did-you-find-th field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="https://wiki.processmaker.com/3.0/File_Control.html" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.0 - File Control 1/5</option><option value="40" selected="selected">Give 3.0 - File Control 2/5</option><option value="60">Give 3.0 - File Control 3/5</option><option value="80">Give 3.0 - File Control 4/5</option><option value="100">Give 3.0 - File Control 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2</span></span> <span class="total-votes">(<span >5</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-gmwGzZZ6NIQIgXknealx0v4rUa-sXVrEJdOA3x6aIn0" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="https://wiki.processmaker.com/3.0/File_Control.html#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Overview">Overview</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Properties">Properties</a></li>
<ol class="toc">
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#File_Extensions">File Extensions</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Size">Max File Size</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Size_Unity">Size Unit</a></li>
</ol>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#File_Control_Example">File Control Example</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Relating_an_Input_Document_with_a_File">Associating an Input Document with a File</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Accessing_Files_with_JavaScript">Accessing Files with JavaScript</a></li>
<ol class="toc">
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#JavaScript_Methods">JavaScript Methods</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Clearing_File_controls">Clearing File Controls</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Structure_of_File_controls">Structure of File Controls</a></li>
</ol>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#File_Storage">File Storage</a></li>
<ol class="toc">
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#database_storage">File storage in the database</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#variable_storage">Variable storage</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#storage_of_files_in_grids">Storage of files in grids</a></li>
</ol>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Accessing_files_with_triggers">Accessing files with PHP</a></li>
<ol class="toc">
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Link_to_file">Link to file</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#Link_to_files_in_grid">Link to files in grid</a></li>
<li class="toc"><a href="https://wiki.processmaker.com/3.0/File_Control.html#get_file_info">Getting file info in v.3.0.1.8 and later</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>
<p>This control allows files to be uploaded to a DynaForm, and attached to the current case. To attach files use the "Choose Files" button when this control is rendered. Select the files to be attached following the procedure of the browser and they will be listed in the field below. The icon of this control in the toolbar of the designer is the following:</p>

<p><img alt="" src="../sites/default/files/FileImageIconVersion3.png"></p>

<p>Wile designing a Dynaform, it is neither possible to upload any file nor have a preview of it. However, it's inside the designer that the control is added, located and configured. It's represented by the following figure:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_DynaFormDesigner_FileControl.png"></p>

<p>This control allows users to attach as many files as necessary to the Dynaform. When running a case or previewing a Dynaform, it is displayed as follows:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_DynaFormDesigner_FileRendered.png"></p>

<p>From version 3.0.1.5 on, it is also possible to view the link of the file previously attached to a form, after submitting or sending the form, when returning to a "Previous Step".</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_DynaFormDesigner_FileRenderedPrev.png"></p>

<p>A file control can be set as grid column. Nevertheless, when a grid contains a file field, files can be uploaded for each row in the grid. However, if that same grid is redisplayed in a subsequent DynaForm, the uploaded files will not be displayed in the grid. Please consider this <a href="https://wiki.processmaker.com/3.0/File_Control.html#Link_to_files_in_grid">section</a> as a workaround.</p>

<h2><span id="Properties">Properties</span></h2>
<p> It is possible to customize a file control's functionality and behavior, by configuring its <a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html">properties</a>:</p>

<table>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Type">Type</a></td>
<td><code>file</code> (readonly)</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Variable">Variable</a></td>
<td><p>Click on the <u>...</u> option to select the variable from the list of available variables. See <a href="https://wiki.processmaker.com/3.0/HTML5_Responsive_DynaForm_Designer.html#Relating_a_Variable_with_a_Control">this section</a> to learn more of how to relate a variable to a control.<br/>
The type of variable supported by this control is the following:<br/>
<ul><li>File</li></ul>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong> <font color="dimgray"> Available in version 3.0.1.5 and later.</font></p>
</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Data_Type">Variable Data Type</a></td>
<td>After a variable has been related to the control, this property shows the data type of the variable (readonly).</p>
</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#ID">ID</a></td>
<td><p>[Required]</p>
<p>Field and HTML unique identifier.</p>
</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Name">Name</a></td>
<td>HTML Field name</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Label">Label</a></td>
<td>The label of the control</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Hint">Hint</a></td>
<td>Used to show help when the control is rendered (in the preview or when running cases). It is shown when the pointer of the mouse is hovered over the ? icon.</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Required">Required</a></td>
<td>By checking this option, an asterisk is added in the label to indicate that the field is <i>required</i>, meaning that a file must be uploaded to the field. 
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The "required" property only validates if there is a file attached to the web control, and not if the current user attaches a new file. </font></p></td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/File_Control.html#File_Extensions">File extensions</a></td>
<td><p>Set in this property the validation of the file extensions. Use a comma to separate all the extensions that will be enabled for the control. For example “<code>.jpg</code>, <code>.png</code>, <code>.pdf</code>”</p>
<p>If this property is not defined, then any file extension is allowed.</p></td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/File_Control.html#Size">Max File Size</a></td>
<td><p>Validate the maximum allowed file size of the file to be uploaded. By default the maximum file size is 1024 KB.</p></td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/File_Control.html#Size_Unity">Size Unit</a></td>
<td>Define the unit (KB or MB) of the maximum file size.</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Mode">Display Mode</a></td>
<td><p>[Required]</p>
<p>Display mode:</p>
<ul>
<li><strong>parent:</strong> inherits the display mode defined in the parent container (form/grid)</li>
<li><strong>edit:</strong> the control is enabled for edition when it is rendered.</li>
<li><strong>view:</strong> the control can only be viewed when it is rendered. The content can’t be edited.</li>
<li><strong>disabled:</strong> the control is displayed as disabled. The control is displayed in gray in order to indicate the disabled mode. The content can't be edited either.</li>
</ul>
</td>
</tr>
</table>

<h3><span id="File_Extensions">File Extensions</span></h3>
<p>The "File extensions" property defines the allowed extensions of the files that can be uploaded in the file field:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_FileExtensionsPropertyDesigner.png"></p>

<p>The allowed extensions are defined in the format <code><font color=blue><i>filename</i></font>.<font color=blue><i>extension</i></font></code>. Use <code>*</code> (asterisk) as a wildcard. <code>*</code> alone would allow all types of files. Use <code>*.<font color=blue><i>extension</i></font></code> to allow a specific type of file, such as <code>*.pdf</code> or <code>*.doc</code>. To allow multiple types of files, separate them with <code>,</code> (commas). For example, <code>*.png, *.jpg, *.jpeg, *.tif, *.tiff, *.gif</code> would allow only image files.</p>

<p>For example, if only PDF files may be attached to the file control, then define this property as <code>*.pdf</code>. When running cases, the File control will indicate what type of file can be uploaded:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_FileExtensionsPropertyRender.png"></p>

<p>If a file named <b><tt>pm_ListParticipants.pdf</tt></b> is uploaded, then the file control will validate it the DynaForm is submitting.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_FileExtensionsValidationPassed.png"></p>

<p>If a file with a different extension is attached, a validation error message is shown:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_FileExtensionsPropertyValidation.png"></p>


<p><strong><u>Considerations:</u></strong></p>
<ul>
<li>
<strong>For file fields which are NOT required</strong>
<ul>
<li>If the field accepts all file extensions and no file is attached when running a case, then the validation passes and the form can be sent or submitted without restrictions.</li>
<li>If the field accepts all file extensions and a file is attached when running a case, then the validation passes unless it has the size limit, in that case another validation, explained in the next property is evaluated. Nevertheless, if the field only accepts some types of extensions and no file is attached then, the validation passes</li>
<li>If the fields only accepts some types of extensions and no file is attached then, the validation passes and the form can be sent or submitted without restrictions.</li>
<li>If the fields only accepts some types of extensions and a file is attached then, the validation passes unless the user attaches a file with a "no valid" extension. In that case, a message is shown with a warning that indicates that the file extension is not supported. Nevertheless, if the fields only accepts some types of extensions and no file is attached then, the validation passes.</li>
</ul>
</li>
<li>
<strong>For required file fields</strong>
<ul>
<li>If the field accepts all file extensions and when running cases, no file is attached then, the validation FAILS (because of the Required Field) and the form can NOT be sent nor submitted.</li>
<li>If the field accepts all file extensions and when running cases, a file with that extension is attached then, the validation PASSES unless it has the size limit, in that case another validation, explained in the next property, is evaluated.</li>
<li>If the fields only accepts some types of extensions and no file is attached then, the validation FAILS  (because of the Required Field) and the form can NOT be sent nor submitted.</li>
<li>If the fields only accepts some types of extensions and a file with the correct extension is attached then, the validation passes unless the user attaches a file with a "no valid" extension. In that case, a message is shown with a warning that indicates that the file extension is not supported. In that case, the form can NOT be submitted until a valid file is attached.</li>
</ul>
</li>
<li>
<strong>Special case</strong>
<ul>
<li>When running cases, if a file is attached to a field which is required and then the form is submitted to the next step but then the user goes back to the previous step, the file already submitted is shown as a link under the attachment button of the file field. But, even if the field is required, as a file is already attached to the field, it is not necessary for the user to attach a new document and the form can be submitted or sent without any restriction.
</li>
</ul>
<li>
<li>
<strong>File field in a grid</strong>
<ul>
<li>Files in grids have the same considerations as explained above, but in cases when the grid is not associated with any grid and a valid file is attached and sent, the new date is not inserted in the data base. This is because the grid MUST have a associated variable so the data will be correctly saved.</li>
</ul>
<li>
</ul>

<h3><span id="Size">Max File Size</span></h3>
<p>This property defines the maximum allowed size of uploaded files. By default, this property is set as 1024 KB. To define this property, enter a positive number greater than zero:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_MaxFileSizePropertyDesigner.png"></p>
<p>To set it to "unlimited" size, leave this field blank.<p>
<p>When running a case, the file field will validate the size of the file before attaching it to the field. If the size of the file surpasses the size defined in this control, a message is shown and the file is not attached to the field:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_MaxFileSizePropertyValidation.png"></p>

<p><strong><u>Considerations:</u></strong></p>
<ul>
<li>
<strong>For file fields which are NOT required</strong>
<ul>
<li>If the max file size limit validation for the file attached FAILS, the file is not attached in the field. Nevertheless, as the field is not required the form can be submitted or sent.</li>
</ul>
</li>
<li>
<strong>For required File fields</strong>
<ul>
<li>If the max file size limit validation for the file attached FAILS, the file is not attached in the field and the form CAN NOT be submitted nor sent.</li>
</ul>
</li>
<li>
<strong>Special case</strong>
<ul>
<li>When running cases, if a file is attached to the field (which is required) and then the form is submitted to the next step but then the user goes back to the previous step, the file already submitted is shown as a link under the attachment button of the file field. But, even if the field is required, as a file is already attached to the field, it is not necessary for the user to attach a new document and the form can be submitted or sent without any restriction.
</li>
</ul>
<li>
<li>
<strong>File field in a grid</strong>
<ul>
<li> Files in grids have the same considerations as explained previously, but in cases when the grid is not associated to any grid and a valid file is attached and sent, the new date is not inserted in the data base. This is because the grid MUST have a variable associated for the data to be sent correctly.</li>
</ul>
<li>
</ul>

<h3><span id="Size_Unity">Size Unit</span></h3>
<p>This property defines the unit (KB, MB) of the size defined in the "Max File Size" property explained previously.</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_SizeUnityPropertyDesigner.png"></p>
<p>When running a case, the control will validate the size of the file before attaching it to the field. If the size of the file surpasses the size defined in this control, a message like the following is shown:</p>
<p><img alt="" src="../sites/default/files/ProcessMaker3_Files_MaxFileSizePropertyValidation.png"></p>

<h2><span id="File_Control_Example">File Control Example</span></h2>
<p>For this example add a "file" control by dragging and dropping it onto the Dynaform Designer, from the Web Controls panel. The result of adding this kind of control is shown in the image below.</p>
<p><img src="../sites/default/files/1PM3_DynaformFieldProperties_File_AddControl.png"></p>
<p>Immediately after adding the control a  "Create Variable" window will appear, which has been added from version 3.0.1.7. A variable can be created directly from this window or select a variable already created from the process variables. To learn more about this new feature read this <a href= "https://wiki.processmaker.com/3.0/Variables.html#CreatingVariablesDynaForm">documentation</a>. Also a variable can be created using the variables interface by clicking on the <a href="https://wiki.processmaker.com/3.0/Variables.html#Defining_Variables">Variables</a> button. For this example a completely new variable will be created so stay on the "Create Variable" option(radio button). Maintain the "Variable Name" as "filevar" but this name can be changed by simply erasing this name and adding a new one. Click on the underlined "Settings" option to display more configuration for the variable.</p>
<p><img src="../sites/default/files/3PM3_DynaformFieldProperties_File_Variable_NewInterface.png"></p>
<p>Once displayed the "Settings" option will change depending on the control that has been aggregated. For example, the "file" control only has two settings which are "Type" and "Input Document"(required field). The "Type" setting has only one option that is "File", for the "Input Document" setting an already existent input document must be chosen for the control. To learn how to create an Input Document, read this <a href="https://wiki.processmaker.com/3.0/Input_Documents.html">documentation</a>. To add an document simply click on the underlined ellipsis as seen in the image below.</p>
<p><img src="../sites/default/files/4PM3_DynaformFieldProperties_File_Variable_NewInterfaceSettings.png"></p>
<p>A new "Input Documents" window within the "Create Variable" window will appear. Select the available Input Document by clicking on it. Then on the "Create Variable" window click on the "Save" button to finish this configuration. </p>
<p><img src="../sites/default/files/5PM3_DynaformFieldProperties_File_Variable_InputDocument.png"></p>
<p>Click on the empty space of the control and its properties will be displayed on the left side panel.</p>
<p><img src="../sites/default/files/2PM3_DynaformFieldProperties_File_Properties.png"></p>
<p>Another way to add a variable is by exiting the "Create Variable" window and from the properties click on the underlined ellipsis from the "variable" property as observed in the image.</p>
<p><img src="../sites/default/files/6PM3_DynaformFieldProperties_File_Variable_ClickEllipsis.png"></p>
<p>The "Create Variable" window will appear where a variable can be create with the "Create variable" radio button or select a new one from the "Select variable" radio button. Once a variable is chosen the "variable data type" and the "id" properties will gain the name of the variable added.</p>
<p><img src="../sites/default/files/7PM3_DynaformFieldProperties_File_Variable_NewVariable.png"></p>
<p>Now, the "id" property can be used with JavaScript code. To do so click on the light grey border of the DynaForm (which is the space outside the controls) to display the properties of the DynaForm. When the properties are displayed locate the "javascript" property and click on the "edit" button to open an editor. </p>
<p><img src="../sites/default/files/8PM3_DynaformFieldProperties_File_Id_JavaScript.png"></p>
<p>On the javascript editor add code to set the label of the control, read this <a href="https://wiki.processmaker.com/3.0/File_control.html#JavaScript_in_Files">section</a> for more information. Use one of the functions mentioned in this section. For this example, add the following code:</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">jQuery<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#fileVar&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">setLabel</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;ProcessMaker&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p><img src="../sites/default/files/9PM3_DynaformFieldProperties_File_Id_JavaScriptEditor.png"></p>
<p>When the control is rendered the label will be then set to "ProcessMaker" as seen in the image below.</p>
<p><img src="../sites/default/files/10PM3_DynaformFieldProperties_File_Id_SetJavaScriptEditor.png"></p>
<p>The following property is the "Name" property which is an HTML Field name. It is possible to add a name to some controls managed inside the designer. By default, the control with this property has the same name as the ID set by default. When the ID is changed by the user, the name does not change and keeps its original configuration. The name can also be changed by entering a new value in the property.</p>
<p><img src="../sites/default/files/11PM3_DynaformFieldProperties_File_Name_ObtainsName.png"></p>
<p>Continuing on, the "label" property will change the label of the control which will be displayed when rendered. Add a label such as "Upload a File:" and the control will look like the illustration.</p>
<p><img src="../sites/default/files/12PM3_DynaformFieldProperties_File_Labe_UploadAFile.png"></p>
<p>The "hint" property is used to show help when the control is rendered. For this example add the following sentence on the property: "Select a file to upload". When the control is rendered hover the pointer of the mouse over the (i) icon to show the hint added.</p>
<p><img src="../sites/default/files/13PM3_DynaformFieldProperties_File_Hint_SetHint.png"></p>
<p>For the "required" property there is only a checkbox available. When checked an asterisk is added next to the control to indicate that the field is required and the form won't be able to move into the next one until the field is properly filled.</p>
<p><img src="../sites/default/files/14PM3_DynaformFieldProperties_File_Required_RequiredField.png"></p>
<p>The "file extensions" property validates the file extensions. Use a comma to separate all the extensions. For this example add the <b><tt>.doc</tt></b> extension. This means that the control won't accept other extensions besides the one added in the control.</p>
<p><img src="../sites/default/files/15PM3_DynaformFieldProperties_File_FileExtensions_doc.png"></p>
<p>Now, the "max file size" and the "size unit" will determine the maximum allowed file size and will define the size unit (KB, MB) of the file uploaded.</p>
<p><img src="../sites/default/files/16PM3_DynaformFieldProperties_File_FileSize.png"></p>
<p>Finally, the "display mode" control will have different effects when rendering a case. Use the illustration below as guide of the properties functionality.</p>
<p><img src="../sites/default/files/17PM3_DynaformFieldProperties_File_DisplayMode_EachProperty.png"></p>


<h2><span id="Relating_an_Input_Document_with_a_File">Associating an Input Document with a File</span></h2>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong> <font color="dimgray">ProcessMaker 3.0.1.5 on. </font></p>
<p>From version 3.0.1.5 on, it is possible to associate an Input Document with a File field inside a DynaForm by using a "File" variable. This means that files uploaded to a File field in a DynaForm can be displayed at a later point inside an Input Document step. One advantage of associating a File field with an Input Document, is that the Input Document interface can be used to view all the files uploaded (and delete files and add new versions if the user has the Process Permissions and versioning is enabled). Another advantage is that Input Documents all the uploaded file to have tags and to be placed in a specified folder under <b>Home > Documents</b>, so it is easier to later find the uploaded files.</p>

<p>Uploading a file to an Input Document through a File field in a DynaForm is useful if only needing to upload <i>one</i> file to an Input Document. If needing to ensure that the user uploads a file to an Input Document, then make the File field required. It is not possible to associate File fields in a grid to an Input Document, because fields inside grids do not have a variable. If needing to upload more than one file to an Input Document, then a normal Input Document step should be used. 
   


<p>To associate an Input Document with a File field, it is very recommended to first <a href="https://wiki.processmaker.com/3.0/Input_Documents.html#Creating_Input_Documents">create the Input Document</a> in the project. Then, create the variable that will be related to the File control. To do this, go to the Main Toolbox of the Process Map and hover the pointer of the mouse over the + icon of the "Variables" option. Click on the option "Create" that is displayed to the left. In the window that is opened, enter the name of the variable in the "Variable Name" field and select the option "File" from the dropdown in the "Variable Type" field. (See <a href="https://wiki.processmaker.com/3.0/Variables.html#Defining_Variables">Defining Variables</a>.)</p>
<p><img src="../sites/default/files/ProcessMaker3_Files_CreateFileVariableWindow.png"></p>

<p>Associate the variable with the Input Document (which is already created) in the field "Related Input Document", by selecting it in the dropdown box, or by creating a new Input Document by clicking on the <b>Create</b> button on the right-hand side.</p>
<p><img src="../sites/default/files/ProcessMaker3_Files_CreateFileVariableOptions.png"></p>
<p>To edit the Input Document selected in the field "Related Input Document", click on the <b>Edit</b> button.</p>

<p>After creating the File variable, open a DynaForm where the File control will be placed. Add a File field to the design and click on it to view its properties. Go to the <b>Variable</b> property and click on the <code><u>...</u></code> button.</p>
<p><img src="../sites/default/files/ProcessMaker3_Files_RelateVariable.png"></p>
<p>Select the File variable that will be associated with the File control from the list of available File variables.</p>
<p><img src="../sites/default/files/ProcessMaker3_Files_VariableListOptions.png"></p>
<p>After selecting the variable, the Input Document will be associated with the control.</p>

<p>After associating the File variable with the control, the <b>File Extensions</b>, <b>Max File Size</b> and <b>Size Unit</b> properties will be disabled. These properties are automatically set to the <a href="https://wiki.processmaker.com/3.0/Input_Documents.html#Creating_Input_Documents">settings for the Input Document</a> in the <b>Allowed file extensions</b>, <b>Maximum file size</b> and <b>Unit</b> fields, respectively. when it was created</a>. Make sure to set a Max File Size greater than zero for the Input Document.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray"> The file fields fails to respect the configuration made in the PATH of the Input Document. This consideration will be solved in future versions.</font></p>
<p style="margin-left:25px"><strong><font color="green">Warning:</font></strong> <font color="dimgray"> The "name" of the File field must <a href="https://processmaker.atlassian.net/browse/TRI-1251">have the same name as the variable</a> for the field. If they are different, then uploaded files will not be associated with the Input Document and be treated as normal attached files.</font></p>

<h2><span id="Accessing_Files_with_JavaScript">Accessing Files with JavaScript</span></h2>
<p>To learn how to manipulate DynaForm controls using JavaScript, see <a href="https://wiki.processmaker.com/3.0/JavaScript_in_DynaForms.html">JavaScript in DynaForms</a>.</p>

<p>Files in ProcessMaker 3 have the following </i>field components</i>:</p>
<ul>
<li><b>Label:</b> The text displayed above or to the left of the field, which identifies it.</li>
<li><b>Value:</b> The filename of the last file selected in the file control.</li>
<li><b>Text:</b> An array of the filename(s) in the file control.</li>
</ul>
<!-- <p><img src="/sites/default/files/ProcessMaker3_Datetime_JavaScript_LabelValueText.png"></p> -->

<h3><span id="JavaScript_Methods">JavaScript Methods</span></h3>

<p>Some of the JavaScript methods to manipulate file fields include:</p>

<table style="width:auto;">
<tr>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#jQuery.28.22.23id.22.29_or_.24.28.22.23id.22.29">jQuery("#fieldID")</a>.<code><a href = "https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#control.getValue">getValue</code></a>()</td>
<td>Returns the filename of the last file selected in the file control or the last file added to its associated Input Document if no file has been selected.</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#jQuery.28.22.23id.22.29_or_.24.28.22.23id.22.29">jQuery("#fieldID")</a>.<code><a href = "https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#control.getText">getText</code></a>()</td>
<td>Returns an array of the filenames for files which were previously added to the Input Document associated with the file control, plus the filename of the last file selected in the file control (if any). The filenames are in the order that the files were added. Remember that only one file can be added by the file control, but there can be multiple files which have already been added to the Input Document.</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#jQuery.28.22.23id.22.29_or_.24.28.22.23id.22.29">jQuery("#fieldID")</a>.<code><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#control.getLabel">getLabel</code></a>()</td>
<td>Returns the field's label, which is the text displayed above or to the left of the field to identify it.</td>
</tr>
<tr>
<td><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#jQuery.28.22.23id.22.29_or_.24.28.22.23id.22.29">jQuery("#fieldID")</a>.<code><a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#control.setLabel">setLabel</code></a>("newLabel")</td>
<td>Sets the field's label, which is the text displayed above or to the left of the field to identify it.</td>
</tr>
</table>
<p><font color=green><b>Note:</b></font> <font color=dimgrey>The setValue() and setText() methods exist for file controls, but do not have any effect, since files can only be selected manually by the user.</font></p> 
<p>To see code examples for these methods, see <a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html" class="ref">JavaScript Functions and Methods</a>.</p>

<h3><span id="Clearing_File_controls">Clearing File Controls</span></h3>
<p>The file selected in a File control cannot be set using JavaScript, because this requires user action. However, it is possible to use JavaScript to clear the selected file in a File control.</p>
<p>To remove the selected file, change the value of the file field with the ID <code>"form[<font color=blue><i>file-id</i></font>"</code> to <code>""</code>. Also, change the value of the hidden field with the ID <code>"form[<font color=blue><i>file-id</i></font>_label]"</code> from <code>'["<font color=blue><i>filename</i></font>"]'</code> to <code>'[]'</code> (an empty array in a JSON string). The filename of the selected file also need to be replaced in the visible button with the phrase <code>"Allowed file extensions: <font color=blue>*</font>"</code>.</p>
<codeblock>
$("#<font color=blue><i>file-id</i></font>").find('input[type=file]').val("");
$("#<font color=blue><i>file-id</i></font>").find('input[type=hidden]').val("[]");
$("#<font color=blue><i>file-id</i></font>").find("button").html("Allowed file extensions: <font color=blue>*</font>");
$("#<font color=blue><i>file-id</i></font>").find("button").prop("title", "Allowed file extensions: <font color=blue>*</font>");
</codeblock>

<p>Note that <code><font color=blue>*</font></code> depends on the configuration of the File control (or its associated Input Document), so it is recommended to save the text in the File's button when the DynaForm first loads.</p>

<p>For example, a DynaForm has a File control with the ID "contractFile" and button with the ID "clearContract".</p>
<img src="../sites/default/files/ClearFileDynaForm.png">
<p>The following JavaScript code clears the "contractFile" when the user clicks on the "clearContract" button:
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#clearContract&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;button&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">click</span><span style="color: #009900;">&#40;</span> <span style="color: #000066; font-weight: bold;">function</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#contractFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'input[type=file]'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">//clear file field</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#contractFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'input[type=hidden]'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">val</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;[]&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #006600; font-style: italic;">//clear hidden field</span><br />
&nbsp; &nbsp; $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#contractFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;button&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">html</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;Allowed file extensions: *&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; $<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#contractFile&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;button&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">prop</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;title&quot;</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">&quot;Allowed file extensions: *&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Structure_of_File_controls">Structure of File Controls</span></h3>
<p>A file control consists of:
<ul>
<li>A visible <code>&lt;button&gt;</code> with the ID of the file control, which is clicked to select a file to be uploaded. After a file is selected, the name of the selected file is displayed in this button.</li>
<li>A hidden file field with the ID <code>"form[<font color=blue><i>id</i></font>]"</code>, where the selected file is temporarily stored.</li>

<li>A hidden input field with the ID <code>"form[<font color=blue><i>id</i></font>_label]"</code>, which holds an array of the files which have been previously uploaded to the Input Document associated with the file control, plus the last file selected with the file control. </li>
</ul>

<p>For example, a file control with the ID "receipts" might have the following HTML structure:</p>  
<div class="geshifilter"><div class="html5 geshifilter-html5" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;receipts&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;field-receipts&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-field-file &nbsp;form-group col-sm-12 col-md-12 col-lg-12 &nbsp;pmdynaform-edit-file pmdynaform-field&quot;</span>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/label.html"><span style="color: #000000; font-weight: bold;">label</span></a> <span style="color: #000066;">for</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;receipts&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;col-md-2 col-lg-2 control-label pmdynaform-label&quot;</span>&gt;</span> <br />
&nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/span.html"><span style="color: #000000; font-weight: bold;">span</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;textlabel&quot;</span>&gt;</span>Receipts<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/span.html"><span style="color: #000000; font-weight: bold;">span</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/label.html"><span style="color: #000000; font-weight: bold;">label</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-control col-md-10 col-lg-10 pmdynaform-field-control&quot;</span>&gt;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-container col-xs-12 col-sm-12 col-md-12 col-lg-12&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-btn-container&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a> <span style="color: #000066;">title</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;receipt_2015-02-25.doc&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;button&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-control-file form-control&quot;</span>&gt;</span>receipt_2015-02-25.doc<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;form[receipts]&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;form[receipts]&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;visibility:hidden;&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;file&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;[&amp;quot;lunchReceipt_2015-02-25.jpg&amp;quot;]&quot;</span> <span style="color: #000066;">id</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;form[receipts_label]&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;form[receipts_label]&quot;</span> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;hidden&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;button-all&quot;</span> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;btn-group btn-group-justified&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;display: none;&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-buttonup btn-group&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;glyphicon glyphicon-upload btn btn-success btn-sm&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; All<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-buttoncancel btn-group&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;display: none;&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;glyphicon glyphicon-remove btn btn-danger btn-sm&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; All<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-buttonremove btn-group&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;glyphicon glyphicon-trash btn btn-danger btn-sm&quot;</span>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; All<br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/button.html"><span style="color: #000000; font-weight: bold;">button</span></a>&gt;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pmdynaform-file-list&quot;</span> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;display:none&quot;</span>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; &nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span></div></div>
<p>The user interacts with the visible button, which doesn't have an ID, but it can be searched for using its "pmdynaform-control-file" class. For example, the following code changes the border color of the button used by the "receipts" file control:
</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#receipts&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;button.pmdynaform-control-file&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">css</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;border&quot;</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">&quot;1px solid red&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>The <a href="https://wiki.processmaker.com/3.0/JavaScript_Functions_and_Methods.html#control.setOnchange">setOnchange()</a> method doesn't work with file controls, but the hidden file field can be used to set a  <tt>change</tt> event handler. For example, the following event handler checks whether the uploaded file matches the pattern <code>receipt_<i>YYYY-MM-DD</i>.doc</code>, so that its filename contains the date:
</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;"><span style="color: #000066; font-weight: bold;">function</span> checkFilename<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; <span style="color: #006600; font-style: italic;">//if filename doesn't match &quot;receipt_YYYY-MM-DD.doc&quot;:</span><br />
&nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">var</span> n <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">value</span>.<span style="color: #660066;">search</span><span style="color: #009900;">&#40;</span><span style="color: #009966; font-style: italic;">/receipt_20[0-9][0-9]-[0-1][0-9]-[0-2][0-9]\.doc$/g</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; alert <span style="color: #009900;">&#40;</span>n<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>&nbsp; <br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #000066; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span>n <span style="color: #339933;">===</span> <span style="color: #339933;">-</span><span style="color: #CC0000;">1</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span> &nbsp;<br />
&nbsp; &nbsp; &nbsp; &nbsp; alert<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;Please rename the file '&quot;</span> <span style="color: #339933;">+</span> <span style="color: #000066; font-weight: bold;">this</span>.<span style="color: #660066;">value</span> <span style="color: #339933;">+</span> <span style="color: #3366CC;">&quot;' to match the pattern 'receipt_YYYY-MM-DD.doc' and upload it again.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span><br />
$<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;#receipts&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">find</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'input[type=file]'</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">change</span><span style="color: #009900;">&#40;</span>checkFilename<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h2><span id="File_Storage">File Storage</span></h2>

<p>When a file is uploaded to a file field while running a case, it is stored in the file system of the ProcessMaker server. It is renamed with its unique ID for the case-document and its version number, but it retains its original extension.</p>
<p>Files are stored in the following location on the server:<br>
 &nbsp; &nbsp; <tt><a href="https://wiki.processmaker.com/3.0/File_Locations.html#Installation_Directory"><i>INSTALL-DIRECTORY</i></a>/shared/sites/<code><font color=green><i>WORKSPACE</i></font></code>/files/<code><font color=green><i>XXX</i></font>/<font color=green><i>XXX</i></font>/<font color=green><i>XXX</i></font>/<font color=green><i>XXXXXXXXXXXXXXXXXXXXXXX</i></font></code>/<code><font color=green><i>CASE-DOCUMENT-UID</i></font></code>_<code><font color=green><i>VERSION</i></font></code>.<code><font color=green><i>EXT</i></font></code></tt></p>
<p><i>Where:</i>
<ul>
<li><code><font color=green><i>WORKSPACE</i></font></code> is the name of the workspace which by default is named "workflow" and can be specified with the <code>@@SYS_SYS</code> system variable in a trigger.
<li><code><font color=green><i>XXX</i></font>/<font color=green><i>XXX</i></font>/<font color=green><i>XXX</i></font>/<font color=green><i>XXXXXXXXXXXXXXXXXXXXXXX</i></font></code> represents the case's unique ID. By default this is divided into a series of 4 subdirectories to avoid the <a href="https://wiki.processmaker.com/3.0/Managing_32K_Folders.html">32K file limits</a> of Linux's ext3 file system, but it may be a single directory if using a workspace upgraded from ProcessMaker 2. In a trigger, the case ID of the current case is stored in the @@APPLICATION system variable or it can be looked up in the <b><tt>APPLICATION.APP_UID</tt></b>, <b><tt>APP_CACHE_VIEW.APP_UID</tt></b> or <b><tt>APP_DOCUMENT.APP_UID</tt></b> fields in the database. The <a href="https://wiki.processmaker.com/3.0/Internal_Functions_and_Classes.html#G::getPathFromURL.28.29">G::getPathFromUID()</a> method can be used in a trigger to automatically generate the correct path from the case ID.
<li><code><font color=green><i>CASE-DOCUMENT-UID</i></font></code> is the unique ID for the case-document, which is stored in the <b><tt>APP_DOCUMENT.APP_DOC_UID</tt></b> field in the database.
<li><code><font color=green><i>VERSION</i></font></code> is the document version number which is always set to <code>1</code>, except when the file field is associated with an Input Document which has enabled versioning and the user has uploaded a new version of the file (which field fields don't allow). The version can be found in the <b><tt>APP_DOCUMENT.DOC_VERSION</tt></b> field in the database.
<li><code><font color=green><i>EXT</i></font></code> is the extension of the uploaded file, such as <code>doc</code> or <code>jpg</code>. The file extension can be found by using the <a href="https://wiki.processmaker.com/3.0/Internal_Functions_and_Classes.html#AppDocument::Load.28.29">AppDocument::Load()</a> method or by looking up the filename of the uploaded file with the following database query:
<codeblock>SELECT CON_VALUE AS FILENAME FROM CONTENT WHERE CON_ID='<font color=green><i>CASE-UID</i></font>' AND CON_CATEGORY='APP_DOC_FILENAME'</codeblock>
</ul>

<p style="text-align: left;"><b>Example path in Linux/UNIX:</b><br>
 &nbsp; &nbsp; <tt>/opt/processmaker/shared/sites/workflow/files/905/262/500/57158b1b439014072150115/74863719957158b39af56d2076904431_1.png</tt></p>
<p style="text-align: left;"><b>Example path in Windows Vista and later:</b><br>
 &nbsp; &nbsp; <tt>C:\User\Bob\AppData\Roaming\ProcessMaker-3_0_1_7\processmaker\shared\sites\workflow\files\905\262\500\57158b1b439014072150115\74863719957158b39af56d2076904431_1.png</tt></p>

<p>In a trigger, the path to a file can be determined using the defined constants <code>PATH_DOCUMENT</code> (which would contain a path such as <code>"/opt/processmaker/shared/sites/workflow/files/"</code>) and <code>PATH_SEP</code> (which is <code>"/"</code> or <code>"\"</code> depending on the operating system).</p>
<p>For example, the following trigger code would generate the same path as in the above examples:  
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'90526250057158b1b439014072150115'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">'74863719957158b39af56d2076904431_1.png'</span><span style="color: #339933;">;</span></div></div>

<h3><span id="database_storage">File storage in the database</span></h3>
<p>When a DynaForm which contains a file field is submitted, a new record is created about the uploaded file in the <b><tt>APP_DOCUMENT</tt></b> table in the database, which contains the following fields:</p>
<ul>
<li><code><b>APP_DOC_UID</b></code>: The unique ID for the case document, which identifies the uploaded file.
<li><code><b>DOC_VERSION</b></code>: The version of the case document file, which is an integer counting the version starting from <code>1</code>. It can only be greater than <code>1</code> if the file is associated with a variable for an Input Document which has versioning enabled.
<li><code><b>APP_UID</b></code>: The unique ID of the case where the file was uploaded.
<li><code><b>DEL_INDEX</b></code>: The delegation index of the task in the case when the file was uploaded. 
<li><code><b>DOC_UID</b></code>: The unique ID of the Input Document which holds the file, if the file field is associated with an Input Document. If an unassociated file field, then it is set to <code>'-1'</code>.
<li><code><b>USR_UID</b></code>: The unique ID of the user who uploaded the file.
<li><code><b>APP_DOC_TYPE</b></code>: The type of case document which is <code>'ATTACHED'</code> if the file field is unassociated with an Input Document or <code>'INPUT'</code> if it is associated with an Input Document.
<li><code><b>APP_DOC_CREATE_DATE</b></code>: The datetime in <code>'YYYY-MM-DD HH:MM:SS'</code> format when the file was uploaded.
<li><code><b>APP_DOC_INDEX</b></code>: The document index of the file, which counts the order by which files are added to a case, regardless of whether an Input Document file, Output Document file or attached from a file field. The first file is <code>1</code>, the second file is <code>2</code>, etc.
<li><code><b>FOLDER_UID</b></code>: The unique ID of the folder where the file located in the graphical interface under <b>Home > Documents</b>. If the file field is not associated with an Input Document or the Input Document has no specified folder, this field is set to <code>''</code> (empty string).
<li><code><b>APP_DOC_PLUGIN</b></code>: Always set to <code>''</code> (empty string) if not using an plugin to manage the files.
<li><code><b>APP_DOC_TAGS</b></code>: If the file field is associated with an Input Document, then the tags for the Input Document, which are separated by commas. By default all Input Documents have the tag of <code>'INPUT'</code>, but other custom tags can be defined. If an unassociated file field, then set to <code>NULL</code>.
<li><code><b>APP_DOC_STATUS</b></code>: The status of the file, which is either 'ACTIVE' or 'DELETED'. Note that file fields don't provide a way to delete uploaded files, but the file could be deleted by a user who has the <a href="https://wiki.processmaker.com/3.0/Roles.html#PM_FOLDERS_ADD_FILE">PM_FOLDERS_ADD_FILE</a> permission in his/her role and goes to <b>Home > Documents</b>. It can also be deleted if the file field is associated with an Input Document which is a step in the task and the user has been assigned <a href="https://wiki.processmaker.com/3.0/Process_Permissions.html">Process Permissions</a> to delete files in the Input Document.    
<li><code><b>APP_DOC_STATUS_DATE</b></code>: Always set to <code>NULL</code>. 
<li><code><b>APP_DOC_FIELDNAME</b></code>: The <i>name</i> (not its <i>id</i>) of the file field where the file was uploaded. If uploaded in a file field in a grid, then it is set to <code>'<font color=green><i>grid-variable</i></font>_<font color=green><i>row-number</i></font>_<font color=green><i>file-field-name</i></font>'</code>. For example, a value of <code>'clientList_2_contractFile'</code>, means that the file was uploaded to the second row of a grid whose variable is "clientList" and whose file field has the name "contractFile". If the file was uploaded in an Input Document step (not a file field), then it is set to <code>NULL</code>.
<li><code><b>APP_DOC_DRIVE_DOWNLOAD</b></code>: <a href="http://php.net/manual/en/function.serialize.php">Serialized</a> information which is always set to <code>'a:0:{}'</code>. 
</ul>

<p>In addition, records are added to the <b><tt>CONTENT</tt></b> table containing information about the uploaded file.</p>

<p>For example, the database has the following information about an uploaded file with the unique ID '74863719957158b39af56d2076904431':</p>

<codeblock>mysql> <b>select * from CONTENT where CON_ID='74863719957158b39af56d2076904431';</b>
+------------------+------------+----------------------------------+----------+---------------------+
| CON_CATEGORY     | CON_PARENT | CON_ID                           | CON_LANG | CON_VALUE           |
+------------------+------------+----------------------------------+----------+---------------------+
| APP_DOC_COMMENT  | 1          | 74863719957158b39af56d2076904431 | en       |                     |
| APP_DOC_FILENAME | 1          | 74863719957158b39af56d2076904431 | en       | scannedContract.png |
| APP_DOC_TITLE    | 1          | 74863719957158b39af56d2076904431 | en       |                     |
+------------------+------------+----------------------------------+----------+---------------------+
3 rows in set (0.00 sec)
</codeblock>
<p>The filename of the uploaded file is found <code>WHERE CON_CATEGORY='APP_DOC_FILENAME'</code>. File fields do not allow the user to add a comment when uploading a file, but the interface for Input Documents does allow the user to add a comment about an uploaded file. The title is deprecated and no longer used.</p>
<h3><span id="variable_storage">Variable storage</span></h3>
<p>When a DynaForm containing a file field is submitted, a case variable named <code>@@<font color=green><i>file-field-name</i></font>_label</code> will be created. Remember that the name of the case variable is based on the <a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#Name">name</a> of the field field, not its <a href="https://wiki.processmaker.com/3.0/DynaForm_Field_Properties.html#ID">ID</a> and not its associated variable. This case variable will be created when the DynaForm is submitted, even if the file field has no selected file to upload. The file field does not need to be associated with a file variable. In fact, no case variable is created for file variables when running cases.</p>  

This case variable <code>@@<font color=green><i>file-field-name</i></font>_label</code> will hold a JSON string which contains an array with the filename of the selected file inside: <code>'["<font color=green><i>filename</i></font>"]'</code><br>
If no file was selected, then the JSON string will be an empty array: <code>'[]'</code><br>
In version 3.0.1.6 and earlier, file fields were capable of displaying multiple files, so the array could hold multiple filenames. In version 3.0.1.7 and later, file fields are only capable of displaying a single file, so the array will only hold one filename. The <a href="http://php.net/manual/en/function.json-decode.php">json_decode()</a> function can be used to convert the string into an array and obtain the filename inside the array.</p> 

<p>For example, if a file field has the <i>name</i> "receiptFile" and a file named "monthlyReport.doc" is selected, then its case variable will be named <code>@@receiptFile_label</code> and it hold <code>'["monthlyReport.doc"]'</code>. The following trigger code can be used to obtain the filename of the selected file:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aReceipt</span> <span style="color: #339933;">=</span> <a href="http://php.net/json_decode"><span style="color: #990000;">json_decode</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>receiptFile_label<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$filename</span> <span style="color: #339933;">=</span> <a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aReceipt</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">''</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$aReceipt</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<p>In version 3.0.1.8 and later, when a file control in a DynaForm is submitted, the unique ID of the uploaded file which is placed in an array, which is stored in the variable associated with the file field. For example, if the file control is associated with the <code>@=contractFile</code> and the user uploads a file, then the <code>@=contractFile</code> variable might have a value such as: <span class="geshifilter"><code class="php geshifilter-php"><a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;16820977557c7577c2e5c42054010817&quot;</span><span style="color: #009900;">&#41;</span></code></span>
<p>The unique ID of the uploaded file can be obtained with the following trigger code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/isset"><span style="color: #990000;">isset</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#41;</span> and <span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$fileId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
<p>Always access the file variable as <code>@=<font color=blue><i>variable</i></font></code> so that is treated as an array. If it is accessed as <code>@@<font color=blue><i>variable</i></font></code>, then it will be transformed into a string. Make sure to use <a href="http://php.net/manual/en/function.isset.php">isset()</a> to check whether the DynaForm was submitted and <a href="http://php.net/manual/en/function.empty.php">empty()</a> to check whether the user uploaded a file.</p>
</p>With the ID of the uploaded file, other information about the file can be looked up using the <a href="https://wiki.processmaker.com/3.0/Internal_Functions_and_Classes.html#AppDocument::Load.28.29">AppDocument::Load()</a> method. See <a href="https://wiki.processmaker.com/3.0/File_Control.html#get_file_info">Getting file info in v.3.0.1.8 and later</a> below.</p> 
<h3><span id="storage_of_files_in_grids">Storage of files in grids</span></h3>
<p>When a file field is placed in a grid, then a files can be selected for each row in the grid to be uploaded when the DynaForm is submitted. Each file is stored separately in the server's file system and a separate record is created for each file in the <b><tt>APP_DOCUMENT</tt></b> table. The only difference from a normal file field, is that the <b><tt>APP_DOCUMENT.APP_DOC_FIELDNAME</tt></b> field will contain <code>'<font color=green><i>grid-variable</i></font>_<font color=green><i>row-number</i></font>_<font color=green><i>file-name</i></font>'</code>.</p>

<p>For example, a grid whose variable is named "receipts" is submitted and it has three rows with a file field named "receiptFile", then the following information might be stored in the <b><tt>APP_DOCUMENT</tt></b> table about the three files:</p>
<font size=2>
<code>mysql> select APP_DOC_UID, DOC_VERSION, APP_UID, DOC_UID, APP_DOC_TYPE, APP_DOC_INDEX, APP_DOC_FIELDNAME from APP_DOCUMENT;</code>

<table>
<tr><th>APP_DOC_UID</th><th>DOC_VERSION</th><th>APP_UID</th><th>DOC_UID</th><th>APP_DOC_TYPE</th><th>APP_DOC_INDEX</th><th>APP_DOC_FIELDNAME</th></tr>
<tr><td>9981562705718050e816959058033346 </td><td> 1 </td><td> 2490631975717ff351ccda1005474345 </td><td> -1 </td><td> ATTACHED </td><td> 1 </td><td> receipts_1_receiptFile </td></tr>
<tr><td> 9208148915718050e921ba1095027176 </td><td> 1 </td><td> 2490631975717ff351ccda1005474345 </td><td> -1 </td><td> ATTACHED </td><td> 2 </td><td> receipts_2_receiptFile </td></tr>
<tr><td> 6366198845716e982128ba0053902036 </td><td> 1 </td><td> 3202231885716e94385eca5078684093 </td><td> -1 </td><td> ATTACHED </td><td> 3 </td><td> receipts_3_receiptFile </td></tr>
</table></font>


<p><font color=green><b>Note:</b></font> <font color=dimgrey>If a grid containing a grid field doesn't have an associated array variable, then any selected files in the grid will not saved when the DynaForm is submitted.</font></p>  

<p>Unfortunately, ProcessMaker currently <a href="https://processmaker.atlassian.net/browse/TRI-1249">does not save the filenames</a> of the selected files in the grid's case variable when a grid containing files is submitted. The only way to find the filenames of the files in a grid is to do a search in the <b><tt>APP_DOCUMENT</tt></b> table for the case ID and for <b><tt>APP_DOC_FIELDNAME</tt></b> which contains the name of the grid variable and the name of the file field in the grid in order to get the file's ID in the APP_DOC_UID field. With the file's ID, its filename can be found by querying the <b><tt>CONTENT</tt></b> table or by calling the <a href="https://wiki.processmaker.com/3.0/Internal_Functions_and_Classes.html#AppDocument::Load.28.29">AppDocument::Load()</a> method.</p> 

<p>The following trigger example creates an array of the filenames uploaded in the current case to a grid whose variable is named "clientList" and its file field is named "contractFile":</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> &nbsp; &nbsp;<span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$gridVar</span> &nbsp; <span style="color: #339933;">=</span> <span style="color: #0000ff;">'clientList'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$fileField</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'contractFile'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$aFiles</span> &nbsp; &nbsp;<span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_VALUE AS FILENAME, AD.* FROM CONTENT C, APP_DOCUMENT AD <br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND APP_DOC_FIELDNAME LIKE '<span style="color: #006699; font-weight: bold;">{$gridVar}</span>_%_<span style="color: #006699; font-weight: bold;">{$fileField}</span>' AND <br />
&nbsp; &nbsp;AD.APP_DOC_STATUS = 'ACTIVE' AND AD.APP_DOC_UID = C.CON_ID AND <br />
&nbsp; &nbsp;C.CON_CATEGORY = 'APP_DOC_FILENAME' ORDER BY AD.APP_DOC_FIELDNAME&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$results</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$results</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span><span style="color: #339933;">=</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$results</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$aFiles</span><span style="color: #009900;">&#91;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$results</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
<span style="color: #009900;">&#125;</span> &nbsp; </div></div>

<h2><span id="Accessing_files_with_triggers">Accessing files with PHP</span></h2>
<h3><span id="Link_to_file">Link to file</span></h3>
<p>If a file was uploaded to a File field which isn't associated with an Input Document, then the next time that File field is displayed in a case, there will be link(s) below the File field to the file(s) which were previously uploaded to the field. However, ProcessMaker currently has a <a href="https://processmaker.atlassian.net/browse/CM-203">bug</a> which prevent File fields which are associated with Input Documents from displaying link(s) to previously uploaded files(s). 

<p>Trigger code can be used to lookup a file which was uploaded to a File field in the database and construct its URL to download it in a subsequent Link field in a DynaForm. In this example, the "name" of the File field is "receiptFile". The following trigger code uses the filename of the uploaded file in the @@receiptFile_label variable to look up the file in the database so it can create the URL and assign it to the @@receiptUrl variable. It also looks up the filename of this file and assigns it to the @@receiptFilename variable.</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$fileField</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'receiptFile'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//set to name of the file field </span><br />
<span style="color: #000088;">$aReceipt</span> <span style="color: #339933;">=</span> <a href="http://php.net/json_decode"><span style="color: #990000;">json_decode</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>receiptFile_label<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>receiptFilename <span style="color: #339933;">=</span> <a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$aReceipt</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">''</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$aReceipt</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>receiptUrl <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>receiptFilename<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> &nbsp;<span style="color: #666666; font-style: italic;">//ID of the current case</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//Use ORDER BY APP_DOC_INDEX DESC to get the last file uploaded to the File field </span><br />
&nbsp; &nbsp;<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_DOC_UID, DOC_VERSION FROM APP_DOCUMENT <br />
&nbsp; &nbsp; &nbsp; WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND APP_DOC_FIELDNAME='<span style="color: #006699; font-weight: bold;">$fileField</span>' AND <br />
&nbsp; &nbsp; &nbsp; APP_DOC_STATUS = 'ACTIVE' ORDER BY APP_DOC_INDEX DESC&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$results</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error in query: <span style="color: #006699; font-weight: bold;">$query</span>&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$results</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$results</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>receiptUrl <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">is_https</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">'https://'</span><span style="color: #339933;">:</span> <span style="color: #0000ff;">'http://'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'HTTP_HOST'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span><span style="color: #0000ff;">'/'</span><span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span><span style="color: #0000ff;">'/'</span><span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/cases/cases_ShowDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$results</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">'&amp;v='</span><span style="color: #339933;">.</span> <span style="color: #000088;">$results</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'DOC_VERSION'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span> &nbsp; <br />
<span style="color: #009900;">&#125;</span> &nbsp; </div></div>
<p>Set this trigger to fire <i>after</i> the DynaForm containing the File field. Then add a Link Field to a subsequent DynaForm. In the properties of that link field, set the <b>display text</b> property to @@receiptFilename and the <b>href</b> property to @@receiptUrl.</p>
<img src="../sites/default/files/LinkPropertiesForReceiptExample.png">

<p>When a case is run, the URL and filename of the receipt file should automatically be inserted in the subsequent DynaForm.</p>

<h3><span id="Link_to_files_in_grid">Link to files in grid</span></h3>
<p>When a grid contains a file field, files can be uploaded for each row in the grid. However, if that same grid is redisplayed in a subsequent DynaForm, the uploaded files will not be displayed in the grid.</p> 

<p>This example shows how to get around this problem by displaying links to the uploaded files in a second grid.</p>

<p>First, create the first DynaForm from where the user will upload files. Inside this DynaForm place a grid with the name and variable "Documents". Inside this grid place a file control named "Receipts".</p> 

<p><img src="../sites/default/files/3.0LinkGrid1rstForm.png"></p>

<p>Then, create the second DynaForm to display the file links. In this Dynaform, place a grid whose ID and variable are named "FilesList", which has the following controls:
<ul>
<li>A textbox with ID "fileName",</li>
<li>A link control with ID "fileLink",</li>
<li>A textbox with ID "uploader",</li>
<li>A datetime control with ID "date".</li>
</ul>

<p>Once done, create the following trigger which is set to fire <b><i>before</i></b> the second DynaForm:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$appUid</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT D.*, C.CON_VALUE <br />
&nbsp; &nbsp;FROM CONTENT C, APP_DOCUMENT D <br />
&nbsp; &nbsp;WHERE D.APP_DOC_UID = C.CON_ID <br />
&nbsp; &nbsp;AND D.APP_UID = '&quot;</span><span style="color: #339933;">.</span><span style="color: #000088;">$appUid</span><span style="color: #339933;">.</span><span style="color: #0000ff;">&quot;'<br />
&nbsp; &nbsp;AND C.CON_CATEGORY = &nbsp;'APP_DOC_FILENAME'<br />
&nbsp; &nbsp;AND C.CON_LANG = '&quot;</span><span style="color: #339933;">.@@</span>SYS_LANG<span style="color: #339933;">.</span><span style="color: #0000ff;">&quot;'&quot;</span><span style="color: #339933;">;</span><br />
<br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@=</span>FilesList <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">foreach</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span> <span style="color: #b1b100;">as</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$ext</span> <span style="color: #339933;">=</span> <a href="http://php.net/explode"><span style="color: #990000;">explode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'.'</span><span style="color: #339933;">,</span><span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$server</span> <span style="color: #339933;">=</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">is_https</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #0000ff;">'https://'</span><span style="color: #339933;">:</span><span style="color: #0000ff;">'http://'</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SERVER_NAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">.</span><span style="color: #0000ff;">':'</span><span style="color: #339933;">.</span><span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'SERVER_PORT'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$inputDocPath</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$server</span> <span style="color: #339933;">.</span><span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span><span style="color: #0000ff;">'/'</span><span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span><span style="color: #0000ff;">'/'</span><span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span><span style="color: #0000ff;">'/cases/cases_ShowDocument?a='</span><span style="color: #339933;">.</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp; &nbsp;<span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$uploader</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'firstname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><span style="color: #0000ff;">' '</span><span style="color: #339933;">.</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'lastname'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><span style="color: #0000ff;">' ('</span><span style="color: #339933;">.</span> <span style="color: #000088;">$aUser</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'username'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">')'</span><span style="color: #339933;">;</span><br />
<br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>FilesList<span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'fileName'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'fileLink'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$inputDocPath</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'uploader'</span> <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$uploader</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">'date'</span> &nbsp; &nbsp; <span style="color: #339933;">=&gt;</span> <span style="color: #000088;">$row</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_CREATE_DATE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$i</span><span style="color: #339933;">++;</span><br />
<span style="color: #009900;">&#125;</span> </div></div>

<p>The query used in the trigger searches for all the files in the current case:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> D<span style="color: #66cc66;">.</span> <span style="color: #66cc66;">*</span> <span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE<br />
<span style="color: #993333; font-weight: bold;">FROM</span> CONTENT C<span style="color: #66cc66;">,</span> APP_DOCUMENT D<br />
<span style="color: #993333; font-weight: bold;">WHERE</span> D<span style="color: #66cc66;">.</span>APP_DOC_UID <span style="color: #66cc66;">=</span> C<span style="color: #66cc66;">.</span>CON_ID<br />
<span style="color: #993333; font-weight: bold;">AND</span> D<span style="color: #66cc66;">.</span>APP_UID <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'&quot;.@@APPLICATION.&quot;'</span><br />
<span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY <span style="color: #66cc66;">=</span> &nbsp;<span style="color: #ff0000;">'APP_DOC_FILENAME'</span><br />
<span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_LANG <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'&quot;.@@SYS_LANG.&quot;'</span><span style="color: #ff0000;">&quot;</span></div></div>

<!--<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray"> This query only retrieves data of the files uploaded with the control. It will not show data of the files uploaded using the control which are related to an input document. To view all files, remove the <code>AND D.APP_DOC_FIELDNAME =  'fileControlID'</code> condition in the query.</font></p>
-->

<p>When a case is run, the files which were uploaded in the first DynaForm grid:</p>
<img src="../sites/default/files/3.0LinkGrid1rstFormdone.png">

<p>Each one of these files will be listed with a link to be downloaded, the username who uploaded and date when the file was uploaded in the second DynaForm grid:</p>
<img src="../sites/default/files/3.0LinkGrid2ndFormdone.png">

<p>To see a process which demonstrates how to use this code, download and import this <a href="../sites/default/files/File_fields_in_Grid_Example-2.pmx" download="File_fields_in_Grid_Example-2.pmx">sample process</a>.  

<h3><span id="get_file_info">Getting file info in v.3.0.1.8 and later</span></h3>
<p>It is much easier to get information about the file uploaded in a File control in version 3.0.1.8 and later, because a variable is created which holds an array with the file's unique ID. See <a href="https://wiki.processmaker.com/3.0/File_Control.html#variable_storage">Variable Storage</a> above. This trigger example shows how to use the <a href="https://wiki.processmaker.com/3.0/Internal_Functions_and_Classes.html#AppDocument::Load.28.29">AppDocument::Load()</a> method to get information about the uploaded file and construct a URL to download the file.</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/isset"><span style="color: #990000;">isset</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#41;</span> and <span style="color: #339933;">!</span><a href="http://php.net/empty"><span style="color: #990000;">empty</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$fileId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@=</span>contractFile<span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$d</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> AppDocument<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aFile</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$d</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">Load</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$fileId</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$aUser</span> <span style="color: #339933;">=</span> userInfo<span style="color: #009900;">&#40;</span><span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'USR_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>fileUploader <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;<span style="color: #006699; font-weight: bold;">{$aUser['firstname']}</span> <span style="color: #006699; font-weight: bold;">{$aUser['lastname']}</span> (<span style="color: #006699; font-weight: bold;">{$aUser['username']}</span>)&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>filename <span style="color: #339933;">=</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_FILENAME'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>fileComment <span style="color: #339933;">=</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_COMMENT'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>dateUploaded <span style="color: #339933;">=</span> <span style="color: #000088;">$aFile</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_CREATE_DATE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//for email and output document templates:</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>fileUrl &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;http://{<span style="color: #006699; font-weight: bold;">$_SERVER</span>['SERVER_ADDR]}:<span style="color: #006699; font-weight: bold;">{$_SERVER['SERVER_PORT']}</span>/sys&quot;</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">&quot;/en/neoclassic/cases/cases_ShowDocument?a='<span style="color: #006699; font-weight: bold;">{$aFile['APP_DOC_UID']}</span>&amp;v=<span style="color: #006699; font-weight: bold;">{$aFile['DOC_VERSION']}</span>&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//for links in DynaForms:</span><br />
&nbsp; &nbsp; <span style="color: #339933;">@@</span>fileRelativeUrl &nbsp;<span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;../cases/cases_ShowDocument?a='<span style="color: #006699; font-weight: bold;">{$aFile['APP_DOC_UID']}</span>&amp;v=<span style="color: #006699; font-weight: bold;">{$aFile['DOC_VERSION']}</span>&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>
Then, the variables @@fileUploader, @@filename, @@fileComment, @@dateUploaded and @@fileUrl can be used in a template file for an email or Output Document or they can be the variables associated with controls in a DynaForm. If needing to display a link in a DynaForm to download the file, then place <code>@@fileUrl</code> in the <b>src</b> property (used to be named <b>href</b>) of the Link control. See <a href="https://wiki.processmaker.com/3.0/Links.html#Manipulating_Links_in_Triggers">Manipulating Links in Triggers</a>.</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&mt=8" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com">
		<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&gid=3970335&trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>
</html>
