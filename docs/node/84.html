<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="https://wiki.processmaker.com/themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../index.php/Output_Documents.html" />
<link rel="shortlink" href="84.html" />
<title>2.0 - Output Documents | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/system/system.base.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.messages.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.theme.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/aggregator/aggregator.css?s743n7");
@import url("https://wiki.processmaker.com/modules/comment/comment.css?s743n7");
@import url("https://wiki.processmaker.com/modules/field/theme/field.css?s743n7");
@import url("https://wiki.processmaker.com/modules/node/node.css?s743n7");
@import url("https://wiki.processmaker.com/modules/search/search.css?s743n7");
@import url("https://wiki.processmaker.com/modules/toc_filter/toc_filter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/user/user.css?s743n7");
@import url("https://wiki.processmaker.com/modules/views/css/views.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.css?s743n7");
@import url("https://wiki.processmaker.com/modules/ctools/css/ctools.css?s743n7");
@import url("https://wiki.processmaker.com/sites/all/modules/geshifilter/geshifilter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/panels/css/panels.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus_default.css?s743n7");
@import url("https://wiki.processmaker.com/modules/fivestar/css/fivestar.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/style.css?s743n7");
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/media.css?s743n7");
</style>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/jquery/1.9/jquery.min.js?v=1.9.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/drupal.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.bgiframe.js?v=2.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.hoverIntent.js?v=0.5"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/superfish.js?v=1.4.8"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/nice_menus.js?v=1.0"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/ui/external/jquery.cookie.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/misc/jquery.form.min.js?v=2.69"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/ajax.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/js/jquery_update.js?v=0.0.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/toc_filter/toc_filter.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics.js@s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/progress.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.ajax.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-1.10.2.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/custom.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"qFb6Jblku84TxwfRE6UbqUKMgafhiSagRoELvG0Ytqo","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-84 node-type-community-edition">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                            <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="84.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-jBuG1iY8tI_biLzya7748sBQeZlcboq3Azgfl7x76h8" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">2.0 - Output Documents</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a href="../3.3/Output_Documents.html" class="">3.8</a></li><li><a href="../3.3/Output_Documents.html" class="">3.7</a></li><li><a href="../3.3/Output_Documents.html" class="">3.6</a></li><li><a href="../3.3/Output_Documents.html" class="">3.5</a></li><li><a href="../3.3/Output_Documents.html" class="">3.4</a></li><li><a href="../3.3/Output_Documents.html" class="">3.3</a></li><li><a href="../3.2/Output_Documents.html" class="">3.2</a></li><li><a href="../3.0/Output_Documents.html" class="">3.1</a></li><li><a href="../3.0/Output_Documents.html" class="">3.0</a></li><li><a  class="active-version">2.x</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="2.0 - Output Documents" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-community-edition">
    <div class="field field-name-field-how-useful field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="84.html" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 2.0 - Output Documents 1/5</option><option value="40">Give 2.0 - Output Documents 2/5</option><option value="60" selected="selected">Give 2.0 - Output Documents 3/5</option><option value="80">Give 2.0 - Output Documents 4/5</option><option value="100">Give 2.0 - Output Documents 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >2.3</span></span> <span class="total-votes">(<span >3</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-CICM-JtT3VnTgAkWGZ0j1VHUHVI38WuPdLZgrF-zJCk" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="84.html#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="84.html#Overview">Overview</a></li>
<li class="toc"><a href="84.html#Creating_Output_Documents">Creating Output Documents</a></li>
<li class="toc"><a href="84.html#Creating_Output_Documents_using_TCPDF_generator">Creating Output Documents using TCPDF generator</a></li>
<li class="toc"><a href="84.html#Editing_Templates">Editing Templates</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Inserting_Variables">Inserting Variables</a></li>
<li class="toc"><a href="84.html#Formatting_Output_Documents">Formatting Output Documents</a></li>
</ol>
<li class="toc"><a href="84.html#Output_Document_Example">Output Document Example</a></li>
<li class="toc"><a href="84.html#Editing_the_HTML_Code">Editing the HTML Code</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Inserting_Images">Inserting Images</a></li>
<li class="toc"><a href="84.html#Inserting_form_fields">Inserting form fields</a></li>
<li class="toc"><a href="84.html#Inserting_Variables_inside_Form_Fields">Inserting Variables inside Form Fields</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Checkboxes_in_Output_Documents">Checkboxes in Output Documents</a></li>
<li class="toc"><a href="84.html#Checkgroups_in_Output_Documents">Checkgroups in Output Documents</a></li>
</ol>
<li class="toc"><a href="84.html#Inserting_Page_Breaks">Inserting Page Breaks</a></li>
<li class="toc"><a href="84.html#Page_Headers_and_Footers">Page Headers and Footers</a></li>
<li class="toc"><a href="84.html#Page_Numbers_and_File_Information">Page Numbers and File Information</a></li>
<li class="toc"><a href="84.html#Formatting_documents_to_display_content_in_RTL">Formatting documents to display content in RTL</a></li>
</ol>
<li class="toc"><a href="84.html#Grids_in_Output_documents">Grids in Output Documents</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Grids_with_a_Fixed-Width_Font">Grids with a Fixed-Width Font</a></li>
<li class="toc"><a href="84.html#Grids_inside_an_HTML_Table">Grids inside an HTML Table</a></li>
</ol>
<li class="toc"><a href="84.html#Output_Document_Storage">Output Document Storage</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Output_Document_Definitions">Output Document Definitions</a></li>
<li class="toc"><a href="84.html#Output_Document_Files">Output Document Files</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Changing_the_File_Location">Changing the File Location</a></li>
</ol>
<li class="toc"><a href="84.html#Generated_Output_Documents_in_the_Database">Generated Output Documents in the Database</a></li>
</ol>
<li class="toc"><a href="84.html#Accessing_Output_Documents_through_Triggers">Accessing Output Documents through Triggers</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Linking_to_an_Output_Document_in_Emails">Linking to an Output Document in Emails</a></li>
<li class="toc"><a href="84.html#Linking_to_multiple_Output_Documents_in_Templates">Linking to multiple Output Documents in Templates</a></li>
<li class="toc"><a href="84.html#Linking_to_an_Output_Document_in_a_DynaForm">Linking to an Output Document in a DynaForm</a></li>
<li class="toc"><a href="84.html#Linking_to_multiple_Output_Documents_in_Grids">Linking to multiple Output Documents in Grids</a></li>
<li class="toc"><a href="84.html#Emailing_the_content_of_an_Output_Document">Emailing the content of an Output Document</a></li>
<li class="toc"><a href="84.html#Redirecting_to_Generated_Output_Document_Files">Redirecting to Generated Output Document Files</a></li>
</ol>
<li class="toc"><a href="84.html#Errors_with_Output_Documents">Errors with Output Documents</a></li>
<ol class="toc">
<li class="toc"><a href="84.html#Error_while_generating_PDF_Documents">Error while generating PDF Documents</a></li>
<li class="toc"><a href="84.html#Variables_are_not_inserted">Variables are not inserted</a></li>
<li class="toc"><a href="84.html#Output_Document_is_empty">Output Document is empty</a></li>
<li class="toc"><a href="84.html#Error_in_html2pdf">Error in html2pdf</a></li>
</ol>
</div></div>


<h2><span id="Overview">Overview</span></h2>
<p>Output Documents are files generated while running a case, which are meant to be printed out or stored digitally outside ProcessMaker. Output Documents are useful for creating external records of case data, as well as creating formatted output such as bills, receipts, and letters. They are generated from HTML templates containing references to system and case variables, which are auto-inserted when the Output Document is generated as a step when running a case.</p>
<p>Output Documents are generated as <tt>PDF</tt> (Portable Document Format) and/or <tt>DOC</tt> (Word document) files, so they can be easily opened and printed using Adobe Acrobat and Microsoft Office (or alternatives such as <a  href="http://www.foxitsoftware.com/pdf/reader" >Foxit Reader</a>, <a  href="http://projects.gnome.org/evince" >Evince</a>, <a  href="http://okular.kde.org/" >Okular</a>, <a  href="http://www.corel.com/servlet/Satellite/gb/en/Product/1207676528492" >WordPerfect</a>, <a href="http://www.abisource.com/">AbiWord</a> and <a  href="http://www.openoffice.org/" >OpenOffice</a>).</p>
<p>Output Documents which are generated as DOC files are actually HTML files which have the ".doc" extension added, so that MS Word and other text editors will open them. If needing to use them as HTML files, simply rename the file with a ".html" extension.</p> 
<p>If the Output Document is generated as a PDF file, either the <a  href="http://www.html2pdf.it/" >HTML2PDF</a> or the <a href="http://www.tcpdf.org">TCPDF</a> library can be used to generate the PDF file. HTML2PDF can be used if needing to insert some of the formatting options listed below such as page breaks and headers and footers. In most cases, it is recommended to use the TCPDF library which is available in version 2.5.0 and later and is compatible with more recent versions of PHP. TCPDF is recommended if generated PDFs which contains images or trying to minimize file size, because HTML2PDF generates <i>compressed</i> PDF documents, which omit extra parameters in the code, which means that the PDF file will be smaller in size.</p>

<h2><span id="Creating_Output_Documents">Creating Output Documents</span></h2>
<p>To create a new Output Document, first open a process. When inside the process map, go to <strong>DESIGNER &gt; OUTPUT DOCUMENTS</strong> to open a list of Output Documents. Click on <strong>New</strong> to define a new Output Document:</p>
<p><img alt="" height="568" src="../sites/default/files/NewOutputDocumentCreate.png" width="403"></p>
<p>Define the following fields for the Output Document:</p>
<ul>
<li><strong>Title</strong>: A title to identify the Output Document.</li>
<li><strong>Filename generated</strong>: The name of the file to be created when the Output Document is generated while running cases. Note that paths cannot be included in the filename, since Output Documents are stored in a <a href="../index.php/Output_Documents.html#StoragePaths">standard location</a> in the file system. To include a system or case variable in the filename, click on the <strong>[@#]</strong> button and select a variable.
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong> <font color="dimgray">It is recommended to <i>only</i> use <code>@#<font color=purple><i>variable</i></font></code> in filenames and not <code>@@<font color=purple><i>variable</i></font></code> because the Windows operating system can't handle filenames that contain <code>"</code> (double quotation marks).</font></p></li>
<li><strong>Description</strong>: A description about the Output Document, which should inform the user what is the general content or purpose of the document. To include a system or case variable in the filename, click on the <strong>[@#]</strong> button and select a variable.</li>
<li><strong>Report Generator</strong>: Choose the engine Output Documents will use to be generated. Use HTML2PDF if using versions earlier than 2.5, otherwise use <a href="../index.php/Output_Documents.html#Creating_Output_Documents_using_TCPDF_generator">TCPDF</a> if using versions 2.5 or later.</li>
<li><strong>Orientation</strong>: Select whether the document is in a <i>portrait</i> (vertical) or <i>landscape</i> (horizontal) layout.</li>
<li><strong>Media</strong>: Select the paper size:</li>
</ul>

<table style="width:auto;"><tbody>
<tr><th><strong>Paper Type</strong></th><th><strong>Width </strong></th><th><strong>Height</strong></th></tr></tbody><tbody>
<tr><td>Letter</td><td>216</td><td>279</td></tr>
<tr><td>Legal</td><td>216</td><td>357</td></tr>
<tr><td>Executive</td><td>184</td><td>267</td></tr>
<tr><td>B5</td><td>182</td><td>257</td></tr>
<tr><td>Folio</td><td>216</td><td>330</td></tr>
<tr><td>A0Oversize</td><td>882</td><td>1247</td></tr>
<tr><td>A0</td><td>841</td><td>1189</td></tr>
<tr><td>A1</td><td>594</td><td>841</td></tr>
<tr><td>A2</td><td>420</td><td>594</td></tr>
<tr><td>A3</td><td>297</td><td>420</td></tr>
<tr><td>A4</td><td>210</td><td>297</td></tr>
<tr><td>A5</td><td>148</td><td>210</td></tr>
<tr><td>A6</td><td>105</td><td>148</td></tr>
<tr><td>A7</td><td>74</td><td>105</td></tr>
<tr><td>A8</td><td>52</td><td>74</td></tr>
<tr><td>A9</td><td>37</td><td>52</td></tr>
<tr><td>A10</td><td>26</td><td>37</td></tr>
<tr><td>Screenshot640</td><td>640</td><td>480</td></tr>
<tr><td>Screenshot800</td><td>800</td><td>600</td></tr>
<tr><td>Screenshot1024</td><td>1024</td><td>768</td></tr></tbody></table>
<ul>
<li><strong>Left Margin</strong>: Size of the paper's left margin in mm.</li>
<li><strong>Right Margin</strong>: Size of the paper's right margin in mm.</li>
<li><strong>Top Margin</strong>: Size of the paper's top margin in mm.</li>
<li><strong>Bottom Margin</strong>: Size of the paper's bottom margin in mm.</li>
<li><strong>Output Document to Generate</strong>: Select whether the Output Document will be generated in DOC, PDF, or BOTH formats.</li>
<li><strong>PDF Security</strong>: A new option available in version 2.0.32 and later, which allows passwords to be set for the generated PDF document and restricts how it may be used. Select one of the following options:
<ul>
<li><strong>Disabled</strong>: Default. No security will be applied to the generated PDF document.</li>
<li><strong>Enabled</strong>: If selected, the following security options are displayed:
<ul>
<li><strong>Open Password:</strong> Define a password to open the PDF document.</li>
<li><strong>Owner Password:</strong> Define a password to change the PDF document's permissions.</li>
<li><strong>Allowed Permissions:</strong> Select how the PDF document may be used. To select more than one option, hold down on the CTRL key while clicking the following options:
<ul>
<li><strong>Print</strong>: The document can be printed.</li>
<li><strong>Modify</strong>: The document can be edited.</li>
<li><strong>Copy</strong>: The document can be copied.</li>
<li><strong>Forms</strong>: The fields in the document may be filled in.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span id="versioning"><strong>Enable Versioning</strong>:</span> Check this option if needing to keep multiple versions of the Output Document. Versioning is useful if creating the same Output Document at multiple steps during a case. This option allows a record to be kept of how the document's data changes over the course of a case, which is useful for maintaining audit trails.</li>
<li><strong>Destination Path</strong>: Enter the name of the folder where this Output Document should be displayed. Click on the <strong>[@#]</strong> button to select a variable which will be used in the folder name. To specify a subfolder inside other folders, enter a path to that folder, separating each folder with a / (forward slash). For example: <strong><tt>Invoices/@#USR_USERNAME/@#subject_@#date</tt></strong><br>To see a list of Input Documents, Output Documents and attached files found in each folder, go to <strong>CASES &gt; Documents</strong> and click on the folder.<br>Note that the <strong>Destination Path</strong> does not effect <a href="../index.php/Output_Documents.html#StoragePaths">where output documents are stored</a> in the file system. Moreover, all files will be stored inside path where ProcessMaker has been installed, either a local computer or a Server.</li>
<li><strong>Tags</strong>: Enter the name of the identifying tag(s), which will be associated with this Output Document. To specify more than one tag name, separate each tag name with commas. Click on the <strong>[@#]</strong> button to select a variable which will be used in the tag name. Tags result really useful when <a href="84.html#Generated_Output_Documents_in_the_Database">looking for Output Documents in the ProcessMaker database</a>.</li>
<li><strong>By clicking on the generated file link</strong>: Select whether the file will be downloaded or opened in the same browser. (<span style="color: dimgrey;"><i><strong><a href="../index.php/HotFix_2.5.2.4_Complete_List.html#Output_Documents_generation_configurations" title="HotFix 2.5.2.4 Complete List">Hotfix 2.5.2.4</a></strong></i></span>)
<ul>
<li><strong>Download the file:</strong> Download the file directly in the local computer. By choosing this option the browser will select automatically the option to download the file.</li>
<li><strong>Open the file:</strong> Open the file in the same browser. By choosing this option the browser will select automatically the option to open the file.</li>
</ul>
</li>
</ul>
<p>After defining the new Output Document, click on <strong>Save</strong>.</p>

<h2><span id="Creating_Output_Documents_using_TCPDF_generator">Creating Output Documents using TCPDF generator</span></h2>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.5 on. </font></p>
<p>Usually when PDF Documents are generated with more than 6 pages, they can't be created and downloaded producing an error in the HTML code. To improve the generation of PDF documents, the <a  href="http://en.wikipedia.org/wiki/TCPDF" >TCPDF generator</a> was included inside ProcessMaker to allow users the creation and generation of PDF and DOC documents without having issues with the amount of pages created.</p>
<p>This new generator supports UTF-8 Unicode and right-to-left languages. Also it has a backward compatibility with documents created on previous versions of ProcessMaker. If documents less than 6 pages needs to be created also is possible to use the HTML2PDF generator. Moreover, this <strong>generates compressed</strong> documents, without configuring some extra parameters into the code, this means that the PDF document generated will be smaller in size, this is a great enhancement specially if you generate documents with images in them.</p>
<p>When an Output Document is being created, the new generator can be chosen as the image below:</p>
<p><img alt="" height="74" src="../sites/default/files/TCPDFGenerator.png" width="298"></p>

<h2><span id="Editing_Templates">Editing Templates</span></h2>
<table border="3" cellpadding="4" cellspacing="2" style="font-size: 13px; border: 3px rgb(121, 181, 216); background-color: rgb(215, 227, 234);"><tbody>
<tr><td style="width: 250px;">Check the <a href="../index.php/New_WYSIWYG_HTML_Editor.html" title="New WYSIWYG HTML Editor">new WYSIWYG Html Editor</a><br><span style="margin-left:25px"><strong><font color="#009688">Available Version:</span></font></strong><font color="dimgray"> 2.5</font></td></tr></tbody></table>
<hr style="color: rgb(170, 170, 170); border-width: 0px; margin-top: 0.2em; margin-bottom: 0.2em; background-color: rgb(170, 170, 170);"><p><br>To edit the template for an Output Document, go to <strong>DESIGNER &gt; OUTPUT DOCUMENTS</strong> to open a list of the Output Documents for the current process.</p>
<p><img alt="" height="168" src="../sites/default/files/OutputDocumentList.png" width="610"></p>
<p>To edit its template, click on the <strong>Edit</strong> button for an Output Document. An HTML editor will open where the content of the Output Document can be easily edited.</p>
<p><img alt="" height="462" src="../sites/default/files/EditingOutputDocumentTemplate.png" width="811"></p>
<p>Enter the desired text in the Output Document Template. Entering a hard return generates a new</p>
<p>paragraph code in the HTML, which inserts a blank line in the text. To enter a line break which doesn't insert a blank line in the text, press <strong>SHIFT + ENTER</strong> to insert a<br>tag. The editor supports the standard key combinations of <strong>CTL + c</strong> to copy, <strong>CTL + x</strong> to cut, and <strong>CTL + v</strong> to paste. Changes can be undone by pressing <strong>CTL + z</strong>. Multiple levels of undo are supported. After undoing changes with <strong>CTL + z</strong>, press <strong>CTL + y</strong> to redo the changes.</p>
<p>When done editing the Output Document template, click <strong>Save</strong> to store the changes and then click on the close icon to close the editing window.</p>

<h3><span id="Inserting_Variables">Inserting Variables</span></h3>
<p>Case variables and system variables can be inserted into the text of an Output Document:</p>
<ul>
<li><strong><code>@#<i>FIELD-NAME</i></code></strong> inserts the value of the variable without any changes.</li>
<li><strong><code>@@<i>FIELD-NAME</i></code></strong> inserts the value of the variable enclosed in "" (double quotation marks). Any quotation marks inside the value will be escaped with backslashes, such as <code>"Don\'t say \"hello\""</code>.</li>
</ul>
<p>Note that the variable names are case sensitive, so <strong><code>@@MyVariable</code></strong> is not the same as <strong><code>@@myvariable</code></strong>.</p>
<p>If a variable does not exist when the Output Document is generated, then the name of the variable will be inserted into the text. This can be a problem if using case variables from DynaForm fields which the user isn't required to submit or if the variable is defined later in the process. To avoid this problem, change the <a href="http://wiki.processmaker.com/index.php/2.0/DynaForms#NextStepLink" title="2.0/DynaForms"><strong>Next Step Link</strong> property</a> for DynaForms to "Save &amp; Continue", so the fields will be automatically submitted and case variables will always be created. If the user should have a choice whether to submit a DynaForm or not, then fire a trigger before the Output Document which checks whether the variables have been created. If they haven't, then set them to empty strings:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/isset"><span style="color: #990000;">isset</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>Field1<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>Field1 <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/isset"><span style="color: #990000;">isset</span></a><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>Field2<span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>Field2 <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Formatting_Output_Documents">Formatting Output Documents</span></h3>
<p>ProcessMaker version 2.0 includes a new advanced WYSIWYG (<i>what you see is what you get</i>) editor to add formatting to Output Documents. The toolbar includes the following buttons:</p>
<p><img alt="" height="35" src="../sites/default/files/OutputDocumentToolbar.png" width="511"></p>
<p>The font for text can be changed by selecting the text and then choosing Arial, Courier New, Tahoma, Times New Roman, or Verdana.</p>
<p><img alt="" height="97" src="../sites/default/files/ODSelectFont.png" width="125"></p>
<p><strong>Formatting buttons:</strong></p>
<ul>
<li><img alt="" height="20" src="../sites/default/files/ODBold.png" width="21"> <strong>Bold</strong>: Set the selected text to bold (a heavier weight). Shortcut: <strong>ctl + b</strong></li>
<li><img alt="" height="20" src="../sites/default/files/ODItalics.png" width="19"> <strong>Italics</strong>: Set the selected text to italics (inclined text). Shortcut: <strong>ctl + i</strong></li>
<li><img alt="" height="20" src="../sites/default/files/ODUnderline.png" width="20"> <strong>Underline</strong>: Underline the selected text. Shortcut: <strong>ctl + u</strong></li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlLargerFont.png" style="box-sizing: border-box; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 15.6000003814697px; max-width: 100%; height: auto; outline: 0px;" width="20"></strong> <strong>Grow Text</strong>: Increase the font size of the selected text by one increment on a scale from 1 to 7.</li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlSmallerFont.png" style="box-sizing: border-box; font-family: inherit; font-size: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 15.6000003814697px; max-width: 100%; height: auto; outline: 0px;" width="20"> </strong> <strong>Shrink Text</strong>: Decrease the font size of the selected text by one increment on a scale from 1 to 7.</li>
<li><img alt="" height="21" src="../sites/default/files/ODFontColor.png" width="27"> <strong>Font Color</strong>: Change the color of the selected text.</li>
<li><img alt="" height="21" src="../sites/default/files/ODHighlightColor.png" width="28"> <strong>Text Highlight Color</strong>: Change the highlight (background) color behind the selected text.</li>
<li><img alt="" height="23" src="../sites/default/files/HtmlLeftAlign.png"> <strong>Left align</strong>: Align the selected text along the left-hand border.</li>
<li><img alt="" height="23" src="../sites/default/files/HtmlCenterAlign.png"> <strong>Center</strong>: Align the selected text in the center.</li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlRightAlign.png"></strong> <strong>Right align</strong>: Align the selected text along the right-hand border.</li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlLink.png"> </strong> <strong>Link</strong>: Add a hyperlink to the selected text.</li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlNumberedList.png"> </strong> <strong>Ordered List</strong>: Insert an ordered list, which begins counting from 1.</li>
<li><strong><img alt="" height="19" src="../sites/default/files/HtmlBulletList.png"></strong> <strong>Unordered List</strong>: Insert an unordered list, which uses bullet points instead of numbers.</li>
<li><img alt="" height="21" src="../sites/default/files/ODEditSourceCode.png" width="21"> <strong>Edit Source</strong>: Edit the HTML code for the template. See <a href="../index.php/Output_Documents.html#Editing_the_HTML_Code">Editing the HTML Code</a>.</li></ul>
<p>Be careful to not insert HTML formatting tags inside a variable name, because it will cause the variable to not be recognized by ProcessMaker. For example, if bold tags are inserted inside the variable <strong><code>@#USR_USERNAME</code></strong>, it becomes <span class="geshifilter"><code class="html4strict geshifilter-html4strict">@#US<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/b.html"><span style="color: #000000; font-weight: bold;">b</span></a>&gt;</span>R_USER<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/b.html"><span style="color: #000000; font-weight: bold;">b</span></a>&gt;</span>NAME</code></span>. Since, ProcessMaker can't find find the variable <strong><code>@#US</code></strong>, it will print the variable name in the generated Output Document.</p>

<h2><span id="Output_Document_Example">Output Document Example</span></h2>
<p>Here is a sample Output Document template for an “Approval Letter” which is used in the Credit Card Application process. In this example, the several case variables are inserted into the form letter which is sent to applicants who have been approved to receive a credit card:</p>

<codeblock>@#TASK_DATE
    
Mr./Ms.  @#APPLICANT_NAME @#APPLICANT_LAST
@#APPLICANT_EMAIL
        
Dear Mr./Ms. @#APPLICANT_LAST
After reviewing your application for a @#CARD_TYPE card, I inform you that your application 
was  approved for a credit limit of @#CREDIT_LIMIT Dollars.  In the next few days you 
will receive an agreement. You should sign it and return us.  Then you will receive your new
credit card. If you need further information do not hesitate in contacting our credit card 
center at 1-800-567-2333.
Thank you for trusting our organization.
    
Best Regards
@#CREDIT_OFFICER
Credit Card Center Supervisor
</codeblock>

<h2><span id="Editing_the_HTML_Code">Editing the HTML Code</span></h2>
<p>For more control over the formatting of a template and the use of more advanced types of HTML elements such as images or tables, the HTML code can be directly edited by clicking on the <img alt="" height="21" src="../sites/default/files/ODEditSourceCode.png"> button on the toolbar. When done editing the HTML code, click on the <img alt="" height="21" src="../sites/default/files/ODEditSourceCode.png" width="21"> button again to return to normal WYSIWYG editing.</p>

<h3><span id="Inserting_Images">Inserting Images</span></h3>
<p>To insert an image in an Output Document, first upload the image file to the "public" directory in the ProcessMaker server with the <a href="../index.php/Process_Files_Manager.html" title="Process Files Manager">Process Files Manager</a> (or another publicly accessible location). Then, go to <strong>ADMIN &gt; Settings &gt; Web Services Test</strong> and use the <tt><a href="../index.php/ProcessMaker_WSDL_Web_Services.html#Process_List" title="ProcessMaker WSDL Web Services">processList()</a></tt> web service to find out the unique ID for the current process. Then edit the HTML code for the Output Document and add the line:</p>
<dl><dd><tt>&lt;img src="http://&lt;IP-ADDRESS&gt;:&lt;PORT&gt;/sys&lt;WORKSPACE&gt;/&lt;LANGUAGE&gt;/&lt;SKIN&gt;/&lt;PROCESS-UID&gt;/&lt;FILENAME&gt;"&gt;</tt></dd></dl>
<p>For example, the file "companyLogo.png" in the process "40825258848d67d3d5d1d52083561715":</p>
<dl><dd><tt>&lt;img src="http://www.example.com/sysworkflow/en/classic/40825258848d67d3d5d1d52083561715/companyLogo.png"&gt;</tt></dd></dl>

<h3><span id="Inserting_form_fields">Inserting form fields</span></h3>
<p>To insert form fields inside of an Output Document, edit the HTML code and create an HTML <tt>&lt;form&gt;</tt>. In that <tt>&lt;form&gt;</tt>, add <tt>&lt;input&gt;</tt>, <tt>&lt;select&gt;</tt>, and/or <tt>&lt;submit&gt;</tt> fields.</p>
<p>For example, this template code:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyFormName&quot;</span>&gt;</span><br />
First Name: <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyText1&quot;</span> <span style="color: #000066;">size</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;20&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;Jo Anne&quot;</span>&gt;&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
Last Name: <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyText2&quot;</span> <span style="color: #000066;">size</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;20&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;Summers&quot;</span>&gt;&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyCheckbox&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;contact&quot;</span> checked&gt;</span>Contact Client<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/select.html"><span style="color: #000000; font-weight: bold;">select</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyDropdown&quot;</span>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;telephone&quot;</span>&gt;</span>Telephone<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;fax&quot;</span> selected&gt;</span>Fax<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;email&quot;</span>&gt;</span>Email<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/option.html"><span style="color: #000000; font-weight: bold;">option</span></a>&gt;</span><br />
&nbsp;<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/select.html"><span style="color: #000000; font-weight: bold;">select</span></a>&gt;&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p>Creates this Output Document:</p>
<p><img alt="" height="138" src="../sites/default/files/FormInOutputDocument.png" width="320"></p>
<p>Note that these form fields are not interactive, so the content of the fields can not be edited.</p>

<h3><span id="Inserting_Variables_inside_Form_Fields">Inserting Variables inside Form Fields</span></h3>
<p>System variables and case variables can be inserted inside form fields. For example, to insert the <tt>@#USR_USERNAME</tt> system variable in a field named "username" and the <tt>@#CaseStarted</tt> in a field named "timeStarted":</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyForm&quot;</span>&gt;</span><br />
Current user:<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;username&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;@#USR_USERNAME&quot;</span>&gt;&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
When case started:<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;timeStarted&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;@#CaseStarted&quot;</span>&gt;&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p style="margin-left:25px"><strong><font color="red">Warning:</font></strong> <font color="dimgray"> If inserting inside an <tt>&lt;input&gt;</tt> field, only reference variables as <tt>@#<i>variable-name</i></tt>. Do NOT use <tt>@@<i>variable-name</i></tt>, because it will insert a set of double quotation marks inside a set of double quotations marks, which will mess up the HTML tag.</font></p>
<p>For example, this bad template code:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;username&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;@@USR_USERNAME&quot;</span>&gt;</span></div></div>

<p>will generate erroneous HTML code like:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;text&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;username&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;&quot;</span>admin<span style="color: #ff0000;">&quot;&quot;</span>&gt;</span></div></div>

<h4><span id="Checkboxes_in_Output_Documents">Checkboxes in Output Documents</span></h4>
<p>In an Output Document, a checkbox is marked if it has the <strong><tt>checked</tt></strong> property defined in its HTML code.</p>
<p>This checkbox is marked:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyForm&quot;</span>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyCheckbox&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;contact&quot;</span> checked&gt;</span>Contact Client<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p>This one is not marked because there is no <strong><tt>checked</tt></strong> property:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyForm&quot;</span>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyCheckbox&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;contact&quot;</span>&gt;</span>Contact Client<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p>In order to use a case variable to mark a checkbox in an output document, insert place the case variable in the HTML code like this:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyForm&quot;</span>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;contactClient&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;contact&quot;</span> @#CheckContactClient &gt;</span>Contact Client<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p>If the value of <code>@#CheckContactClient</code> is <code>"checked"</code> then the checkbox will be marked. If it is <code>""</code> (empty string), then it won't be marked in the Output Document.</p>
<p>Create a trigger which will set the value of <code>@@CheckContactClient</code> to <code>"checked"</code> or <code>""</code>, depending upon the value of a checkbox in a DynaForm. Set this trigger to fire <i>before</i> the step which generates the Output Document.</p>
<p>For example, if the name of the checkbox field in the DynaForm is "ContactClient", then use this PHP code to check whether the checkbox is marked in order to set the value of <code>@@MarkContactClient</code>.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>ContactClient <span style="color: #339933;">==</span> <span style="color: #0000ff;">&quot;On&quot;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckContactClient <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;checked&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckContactClient <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> By default checkbox case variables have a value of <code>"On"</code> when marked and <code>"Off"</code> when not marked, but these values can be set in the checkbox properties.</font></p>

<h4><span id="Checkgroups_in_Output_Documents">Checkgroups in Output Documents</span></h4>
<p>A <i>checkgroup</i> can be created in HTML as a collection of individual checkboxes, so create as many checkboxes in the Output Document as there are options in the checkgroup.</p>
<p>For example, a checkgroup is named "HowContact", with 3 options whose values are "fax", "telephone" and "email". To create this checkgroup in an Output Document, add these three checkboxes to the Output Document's HTML code:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;MyForm&quot;</span>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;ContactFax&quot;</span> &nbsp; &nbsp; &nbsp; <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;fax&quot;</span> &nbsp; &nbsp; &nbsp; @#CheckFax &nbsp; &nbsp; &nbsp; &gt;</span>Fax<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;ContactTelephone&quot;</span> <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;telephone&quot;</span> @#CheckTelephone &gt;</span>Telephone<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/input.html"><span style="color: #000000; font-weight: bold;">input</span></a> <span style="color: #000066;">type</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;checkbox&quot;</span> <span style="color: #000066;">name</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;ContactEmail&quot;</span> &nbsp; &nbsp; <span style="color: #000066;">value</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;email&quot;</span> &nbsp; &nbsp; @#CheckEmail &nbsp; &nbsp; &gt;</span>Email<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/form.html"><span style="color: #000000; font-weight: bold;">form</span></a>&gt;</span></div></div>

<p>Then create a trigger which fires before the Output Document to set the value of the <code>@@CheckFax</code>, <code>@@CheckTelephone</code> and <code>@@CheckEmail</code> variables, so they can later be inserted in the generated Output Document. The selected options in a checkgroup are stored in a case variable which separates each selected value with | (pipes). Use <a href="http://php.net/manual/en/function.explode.php">explode()</a> to break it into an array and <a href="http://php.net/manual/en/function.in-array.php">in_array()</a> to check if the value is in the array.</p>
<p>For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$aSelected</span> <span style="color: #339933;">=</span> <a href="http://php.net/explode"><span style="color: #990000;">explode</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'|'</span><span style="color: #339933;">,</span> <span style="color: #339933;">@@</span>HowContact<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> &nbsp; &nbsp; <br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/in_array"><span style="color: #990000;">in_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;fax&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aSelected</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckFax <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;checked&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckFax <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/in_array"><span style="color: #990000;">in_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;telephone&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aSelected</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckTelephone <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;checked&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckTelephone <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span><br />
&nbsp;<br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/in_array"><span style="color: #990000;">in_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;email&quot;</span><span style="color: #339933;">,</span> <span style="color: #000088;">$aSelected</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckEmail <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;checked&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>CheckEmail <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;&quot;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Inserting_Page_Breaks">Inserting Page Breaks</span></h3>
<p>To insert a page break in <i>both</i> DOC and PDF files, edit the HTML code for the Output Document and define a style which causes a page break before an HTML element. Then apply that style to an HTML element such as a line break or a paragraph.</p>
<p>For example:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/style.html"><span style="color: #000000; font-weight: bold;">style</span></a>&gt;</span><br />
.pageBreak { page-break-before: always; }<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/style.html"><span style="color: #000000; font-weight: bold;">style</span></a>&gt;</span><br />
This is page 1.<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;pageBreak&quot;</span>&gt;</span><br />
This is page 2.</div></div>

<p>To insert a page break which will <i>only</i> appear in PDF files which are generated using the HTML2PDF library, edit the HTML code of the Output Document and add the HTML comment: <code>&lt;!--NewPage--&gt;</code></p>
<p>For example:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;">This is page 1.<br />
<span style="color: #808080; font-style: italic;">&lt;!--NewPage--&gt;</span><br />
This is page 2.</div></div>

<h3><span id="Page_Headers_and_Footers">Page Headers and Footers</span></h3>
<p>Output Documents do not have a property to add page headers and footer, but these can be added manually if using the <a href="http://www.tufat.com/script19.htm">HTML2PDF</a> library to generate PDF files. To define a page header in an Output Document, edit the HTML code and add text between <code>&lt;!--header starts--&gt;</code> and <code>&lt;!--header ends--&gt;</code> tags. Note that these are custom comment tags used by <a href="http://www.tufat.com/script19.htm">HTML2PDF</a> and these codes will be ignored in the DOC files and PDF files created with TCPDF.</p>
<p>For example:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!--header starts--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;position: fixed; top: -5mm; left: 0mm;&quot;</span>&gt;</span>...your header content...<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--header ends--&gt;</span></div></div>

<p>To avoid the header being placed on top of content inside the Output Document, set the header above the content with a style setting such as <code>top: -5mm;</code>. However, make sure that the top margin of the Output Document is set to 5mm or larger.</p>
<p>To insert a page footer, edit the HTML code of the Output Document and add text between <code>&lt;!--footer starts--&gt;</code> and <code>&lt;!--footer ends--&gt;</code> tags. For example:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #808080; font-style: italic;">&lt;!--footer starts--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;position: fixed; bottom: 5mm; left: 0mm;&quot;</span>&gt;</span>...your footer content...<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--footer ends--&gt;</span></div></div>

<p>To avoid the footer being placed on top of content inside the Output Document, set the footer below the content with a style setting such as <code>bottom: 5mm;</code>. However, make sure that the bottom margin of the Output Document is set to 5mm or larger.</p>
<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The footer and header comments only work if using the HTML2PDF engine to generate the Output Document.</font></p>

<h3><span id="Page_Numbers_and_File_Information">Page Numbers and File Information</span></h3>
<p>If generating PDF files using the HTML2PDF library, it is possible to insert page numbers and file information in the generated Output Document, using the following <a href="http://www.tufat.com/docs/html2ps/directives.html">directives</a>:</p>

<table style="codecolumn">
<tr><th>Directive</th><th>Description</th></tr>
<tr><td>##PAGE##</td><td>Number of the current page.</td></tr>
<tr><td>##PAGES##</td><td>Total number of pages in the generated PDF file.</td></tr>
<tr><td>##FILENAME##</td><td>The URL where the source HTML is located, such as:<br>
<small>http://example.com/files/98534779755ef0116e951f8051419251/outdocs/83393260655ef0978d76fd0041065478_2.html.<br>
This location cannot be used externally. It either has to be converted into a URL such as:<br>
http://example.com/sysworkflow/en/neoclassic/cases/cases_ShowOutputDocument?a=83393260655ef0978d76fd0041065478&v=4&ext=html<br>
Or a file location of the server, such as:<br>
/opt/processmaker/shared/sites/workflow/files/985/347/797/55ef0116e951f8051419251/outdocs/83393260655ef0978d76fd0041065478_4.html</small></td></tr>
<tr><td>##FILESIZE##</td><td>The size of the HTML source file in bytes.</td></tr>
<tr><td>##TIMESTAMP##</td><td>The time when the Output Document was generated in "YYYY-MM-DD HH:MM" format.</td></tr>
</table>

<p>For example the following code prints out the page number and the total pages in the footer of each page:
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #00bbdd;">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/html.html"><span style="color: #000000; font-weight: bold;">html</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/head.html"><span style="color: #000000; font-weight: bold;">head</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/head.html"><span style="color: #000000; font-weight: bold;">head</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/body.html"><span style="color: #000000; font-weight: bold;">body</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--footer starts--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a> <span style="color: #000066;">style</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;position: fixed; bottom: 5mm; width: 100%;&quot;</span>&gt;&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span>Generated: ##TIMESTAMP##<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a> <span style="color: #66cc66;">/</span>&gt;</span>Page ##PAGE## / ##PAGES##<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/div.html"><span style="color: #000000; font-weight: bold;">div</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--footer ends--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span>This is the first page<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--NewPage--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span>This is the second page<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--NewPage--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span>This is the third page<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/body.html"><span style="color: #000000; font-weight: bold;">body</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/html.html"><span style="color: #000000; font-weight: bold;">html</span></a>&gt;</span></div></div>
<p>At the bottom of each page will appear, the footer text will appear:</p> 
<img src="../sites/default/files/OutputDocumentFooter.png">
 
<h3><span id="Formatting_documents_to_display_content_in_RTL">Formatting documents to display content in RTL</span></h3>
<p style="margin-left:25px"><strong><font color="#009688">Available Version:</font></strong><font color="dimgray"> From 2.0.44 on</font></p>
<p>The <a href="../index.php/ProcessMaker_skins.html#RTL_Skin" title="ProcessMaker skins"><tt><strong>RTL skin</strong></tt></a> is available in version 2.0.44 and later, which allows ProcessMaker to display correctly <i>right-to-left</i> <a href="../index.php/2.0/Translations.html" title="2.0/Translations">languages</a> such as Arabic and Hebrew. It is also possible to display the contents of Output Documents in <i>right-to-left</i>.</p>

<p>For content inside paragraphs, add <code>dir="RTL"</code> to the <code>&lt;p&gt;</code> tags:</p>
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a> <span style="color: #000066;">dir</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;RTL&quot;</span>&gt;</span>Testing RTL skin and language<br />
&nbsp; ...<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span></div></div>

<p>For content inside tables, add <code>dir="RTL"</code> to the <code>&lt;table&gt;</code> tags:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a> <span style="color: #000066;">dir</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;RTL&quot;</span>&gt;</span><br />
&nbsp; ...<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span></div></div>

<p>For example the following Output Document template displays a table in <i>right-to-left</i>:</p>

<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a> <span style="color: #000066;">dir</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;RTL&quot;</span>&gt;</span>Invoice Details<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/p.html"><span style="color: #000000; font-weight: bold;">p</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a> <span style="color: #000066;">class</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;mceItemTable&quot;</span> <span style="color: #000066;">dir</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;RTL&quot;</span> <span style="color: #000066;">border</span><span style="color: #66cc66;">=</span><span style="color: #ff0000;">&quot;0&quot;</span>&gt;</span><br />
<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>Reference<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>Number<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>Invoice approval<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>1<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span></div></div>

<p>The resulting Output Document will be generated as:</p>
<p><strong><tt>.doc</tt> document</strong></p>
<p><img alt="" height="288" src="../sites/default/files/DocDocumentRTL.png" width="800"></p>
<p><strong><tt>.pdf</tt> document</strong></p>
<p><img alt="" height="224" src="../sites/default/files/PdfDocumentRTL.png" width="800"></p>

<h2><span id="Grids_in_Output_documents">Grids in Output Documents</span></h2>
<p>The fields from a grid can also be inserted into Output Documents by editing the HTML code. They need to be enclosed inside open and closing tags for the grid. Use the tag <code>@&gt;<i><strong>GRID-NAME</strong></i></code> to open the grid and <code>@&lt;<i><strong>GRID-NAME</strong></i></code> to close the grid, where <code><i><strong>GRID-NAME</strong></i></code> is the name of a grid object in a master DynaForm. (Do NOT use the name of the separate grid form--only use the field name of the grid object found inside of a master form.) The <code><i><strong>GRID-NAME</strong></i></code> can also be an associative array of associative arrays. This array can be a case variable manually defined in a trigger or the value returned by querying a database with <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a>. Between these tags, include the variables for the fields in that grid:</p>
<p><i>Before version 2.5.0:</i></p>
<codeblock>@&gt;<i><strong>GRID-NAME</strong></i>
@#<i><strong>FIELD-1</strong></i> @#<i><strong>FIELD-2</strong></i> @#<i><strong>FIELD-3</strong></i> 
@&lt;<i><strong>GRID-NAME</strong></i>
</codeblock>

<p>In version <b>2.5.0</b> and later, a new HTML editor has been introduced, which makes it difficult to insert <code>&lt;</code> and <code>&gt;</code>, so the opening and closing tags for the grid have to be enclosed inside HTML comment tags <code>&lt;!-- ... --&gt;</code>, like this:</p> 
<codeblock>&lt;!--@&gt;<i><strong>GRID-NAME</strong></i>--&gt;
@#<i><strong>FIELD-1</strong></i> @#<i><strong>FIELD-2</strong></i> @#<i><strong>FIELD-3</strong></i> 
&lt;!--@&lt;<i><strong>GRID-NAME</strong></i>--&gt;
</codeblock>
<p>The fields enclosed in the opening and closing grid tags will be repeated as many times as there are rows in the grid.</p>
<p>For example, if designing a travel expenses report, the following Output Document would list each of the expenses in a grid named "EXPENSE_GRID" which has fields named "DATE", "TYPE", "DESCRIPTION", and "AMOUNT":</p>
<p><i>Before version 2.5.0:</i></p>
<codeblock>Travel Expense Report
                  @#FIRST_NAME @#LAST_NAME
                       @#REPORT_MONTH                           
 
 Date           Type of Expense     Description            Amount
 @&gt;EXPENSE_GRID
 @#DATE         @#TYPE              @#DESCRIPTION          @#AMOUNT
 @&lt;EXPENSE_GRID
</codeblock>

<p><i>In version 2.5.0 and later:</i></p>
<codeblock>Travel Expense Report
                  @#FIRST_NAME @#LAST_NAME
                       @#REPORT_MONTH                           
 
 Date           Type of Expense     Description            Amount
 &lt;!--@&gt;EXPENSE_GRID--&gt;
 @#DATE         @#TYPE              @#DESCRIPTION          @#AMOUNT
 &lt;!--@&lt;EXPENSE_GRID--&gt;
</codeblock>

<p>Remember that grid names and field names are case sensitive, so they must be spelled exactly as they were defined.</p>
<p>The EXPENSE_GRID could come from a grid DynaForm which has fields named "DATE", "TYPE", "DESCRIPTION" and "AMOUNT". However, it could also be generated by using <a href="../index.php/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> to query a PM Table, Report Table or an external database. If the database has different field names than those in the Output Document, use "<strong><tt>AS</tt></strong>" to rename the fields. For example, a trigger containing the following code could be fired <i>before</i> the above Output Document is generated:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$db</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//Unique ID for an external database</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'SELECT EXP_DATE AS DATE, EXP_TYPE AS TYPE, EXP_DESC AS DESCRIPTION, EXP_AMT AS AMOUNT FROM EXPENSES'</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>EXPENSE_GRID <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #339933;">,</span> <span style="color: #000088;">$db</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>Likewise, the trigger could manually create EXPENSE_GRID as an associative array of associative arrays:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">@=</span>EXPENSE_GRID <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'1'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DATE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'2010-04-25'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'TYPE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Airfare'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'DESCRIPTION'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Flight to Paris'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'AMOUNT'</span><span style="color: #339933;">=&gt;</span><span style="color:#800080;">1295.35</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'2'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DATE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'2010-04-26'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'TYPE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Lodging'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'DESCRIPTION'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Sheraton Hotel'</span><span style="color: #339933;">,</span> &nbsp;<span style="color: #0000ff;">'AMOUNT'</span><span style="color: #339933;">=&gt;</span><span style="color:#800080;">300.00</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">,</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">'3'</span> <span style="color: #339933;">=&gt;</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DATE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'2010-04-27'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'TYPE'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Meals'</span><span style="color: #339933;">,</span> &nbsp; <span style="color: #0000ff;">'DESCRIPTION'</span><span style="color: #339933;">=&gt;</span><span style="color: #0000ff;">'Lunch w/ client'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'AMOUNT'</span><span style="color: #339933;">=&gt;</span><span style="color:#800080;">104.95</span> <span style="color: #009900;">&#41;</span><br />
&nbsp;<span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Grids_with_a_Fixed-Width_Font">Grids with a Fixed-Width Font</span></h3>
<p>The default font for Output Documents is Arial, which is a variable-width font. It is hard to create neat columns of data with a variable-width font. Therefore, it is recommended to edit the HTML code and set the grid fields inside <code>&lt;pre&gt;...&lt;/pre&gt;</code> tags or <code>&lt;tt&gt;...&lt;/tt&gt;</code> tags, so the columns of data will line up in a fixed-width font.</p>
<p>For example:</p>
<p><i>Before version 2.5.0:</i></p>
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
Travel Expense Report <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#FIRST_NAME @#LAST_NAME <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#REPORT_MONTH <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span> &nbsp; &nbsp;<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/pre.html"><span style="color: #000000; font-weight: bold;">pre</span></a>&gt;</span><br />
Date &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type of Expense &nbsp; &nbsp; Description &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Amount<br />
@&gt;EXPENSE_GRID<br />
@#DATE &nbsp; &nbsp; &nbsp; &nbsp; @#TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@#DESCRIPTION &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@#AMOUNT<br />
@<span style="color: #009900;">&lt;EXPENSE_GRID</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/pre.html"><span style="color: #000000; font-weight: bold;">pre</span></a>&gt;</span></div></div>

<p><i>In version 2.5.0 and later:</i></p>
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
Travel Expense Report <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#FIRST_NAME @#LAST_NAME <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#REPORT_MONTH <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span> &nbsp; &nbsp;<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/pre.html"><span style="color: #000000; font-weight: bold;">pre</span></a>&gt;</span><br />
Date &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Type of Expense &nbsp; &nbsp; Description &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Amount<br />
<span style="color: #808080; font-style: italic;">&lt;!--@&gt;EXPENSE_GRID--&gt;</span><br />
@#DATE &nbsp; &nbsp; &nbsp; &nbsp; @#TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@#DESCRIPTION &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;@#AMOUNT<br />
<span style="color: #808080; font-style: italic;">&lt;!--@&lt;EXPENSE_GRID--&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/pre.html"><span style="color: #000000; font-weight: bold;">pre</span></a>&gt;</span></div></div>

<h3><span id="Grids_inside_an_HTML_Table">Grids inside an HTML Table</span></h3>
<p>For even better formatting of grid data, edit the HTML code and set the the grid inside an HTML table.</p>
<p>Here is an example of the same grid fields inside an HTML table:</p>
<p><i>Before version 2.5.0:</i></p>
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
Travel Expense Report<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span> <br />
@#FIRST_NAME @#LAST_NAME<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#REPORT_MONTH<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;&lt;<a href="http://december.com/html/4/element/tbody.html"><span style="color: #000000; font-weight: bold;">tbody</span></a>&gt;</span> &nbsp; <br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Date<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Type Of expense<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Description<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Amount<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
@&gt;EXPENSE_GRID<br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#DATE<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#TYPE<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#DESCRIPTION<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#AMOUNT<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
@<span style="color: #009900;">&lt;EXPENSE_GRID</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tbody.html"><span style="color: #000000; font-weight: bold;">tbody</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span></div></div>

<p><i>In version 2.5.0 and later:</i></p>
<div class="geshifilter"><div class="html4strict geshifilter-html4strict" style="font-family:monospace;"><span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
Travel Expense Report<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span> <br />
@#FIRST_NAME @#LAST_NAME<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
@#REPORT_MONTH<br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/center.html"><span style="color: #000000; font-weight: bold;">center</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/br.html"><span style="color: #000000; font-weight: bold;">br</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;&lt;<a href="http://december.com/html/4/element/tbody.html"><span style="color: #000000; font-weight: bold;">tbody</span></a>&gt;</span> &nbsp; <br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Date<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Type Of expense<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Description<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;&lt;<a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span>Amount<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/th.html"><span style="color: #000000; font-weight: bold;">th</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--@&gt;EXPENSE_GRID--&gt;</span><br />
<span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
&nbsp; <span style="color: #009900;">&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#DATE<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#TYPE<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#DESCRIPTION<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;&lt;<a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span>@#AMOUNT<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/td.html"><span style="color: #000000; font-weight: bold;">td</span></a>&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tr.html"><span style="color: #000000; font-weight: bold;">tr</span></a>&gt;</span><br />
<span style="color: #808080; font-style: italic;">&lt;!--@&lt;EXPENSE_GRID--&gt;</span><br />
<span style="color: #009900;">&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/tbody.html"><span style="color: #000000; font-weight: bold;">tbody</span></a>&gt;&lt;<span style="color: #66cc66;">/</span><a href="http://december.com/html/4/element/table.html"><span style="color: #000000; font-weight: bold;">table</span></a>&gt;</span></div></div>

<h2><span id="Output_Document_Storage">Output Document Storage</span></h2>
<h3><span id="Output_Document_Definitions">Output Document Definitions</span></h3>
<p>The definitions of Output Documents are stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.OUTPUT_DOCUMENT</tt></strong> table in the MySQL database. This table, however, doesn't contain the title, description, template and filename for Output Documents, because this information can be multilingual with a different version for each language. Instead, this information is stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table under different <a  href="http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639-1</a> language codes, such as "en" for English or "es" for Spanish.</p>
<p>To find the title, description, template and filename for Output Documents, enter MySQL (either from the command line or with graphical program such as phpMyAdmin) or access it through a function such as <a href="../3.0/ProcessMaker_Functions.html#executeQuery.28.29">executeQuery()</a> in a trigger. Search for a value of <tt>'OUT_DOC_TITLE'</tt>, <tt>'OUT_DOC_DESCRIPTION'</tt>, <tt>'OUT_DOC_TEMPLATE'</tt>, and <tt>'OUT_DOC_FILENAME'</tt> in the <strong><tt>wf_&lt;WORKSPACE&gt;.OUTPUT_DOCUMENT.CON_CATEGORY</tt></strong> field. For example, to find all Output Document templates:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #66cc66;">*</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT <span style="color: #993333; font-weight: bold;">WHERE</span> CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUT_DOC_TEMPLATE'</span></div></div>

<p>To find a specific Output Document template, specify its unique ID in the query:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #66cc66;">*</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT <span style="color: #993333; font-weight: bold;">WHERE</span> CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUT_DOC_TEMPLATE'</span> <span style="color: #993333; font-weight: bold;">AND</span> CON_ID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'XXXXXXXXXXXXXXXXXXXXXXXXXX'</span>;</div></div>

<p>Use the following SQL query to see all the entries related to Output Documents:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> CON_CATEGORY<span style="color: #66cc66;">,</span> CON_ID<span style="color: #66cc66;">,</span> CON_LANG <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT <span style="color: #993333; font-weight: bold;">WHERE</span> CON_CATEGORY <span style="color: #993333; font-weight: bold;">LIKE</span> <span style="color: #ff0000;">'OUT_DOC_%'</span></div></div>

<p>To see the information about a particular Output Document definition, search for its unique ID, which can either be found in the field <strong><tt>wf_&lt;WORKSPACE&gt;.OUTPUT_DOCUMENT.OUT_DOC_UID</tt></strong> or by opening the list of Output Documents inside ProcessMaker and clicking the <strong>UID</strong> link for an Output Document. Once the unique ID is known, it can be used in a SQL query:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #66cc66;">*</span> <span style="color: #993333; font-weight: bold;">FROM</span> CONTENT <span style="color: #993333; font-weight: bold;">WHERE</span> CON_ID <span style="color: #66cc66;">=</span> <span style="color: #ff0000;">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span></div></div>

<p>For example, here is an Output Document defined in both English and Spanish:</p>

<codeblock>mysql&gt; select * from CONTENT where CON_ID = '2136030664a9bfeb8a775d7029704021';
+---------------------+----------------------------------+----------+------------------------------------------------------------+
| CON_CATEGORY        | CON_ID                           | CON_LANG | CON_VALUE                                                  |
+---------------------+----------------------------------+----------+------------------------------------------------------------+
| OUT_DOC_TEMPLATE    | 2136030664a9bfeb8a775d7029704021 | en       | Dear @#ClientName,&lt;br&gt;Please open case @#CaseNumber. | 
| OUT_DOC_TITLE       | 2136030664a9bfeb8a775d7029704021 | en       | Open Case Letter                                           | 
| OUT_DOC_DESCRIPTION | 2136030664a9bfeb8a775d7029704021 | en       | Letter asking client to open the case                      | 
| OUT_DOC_FILENAME    | 2136030664a9bfeb8a775d7029704021 | en       | OpenCaseLetter                                             | 
| OUT_DOC_TEMPLATE    | 2136030664a9bfeb8a775d7029704021 | es       | Estimado @#ClientName,&lt;br&gt;Por favor abra caso @#CaseNumber.| 
| OUT_DOC_TITLE       | 2136030664a9bfeb8a775d7029704021 | es       | Carta - Abrir Caso                                         | 
| OUT_DOC_DESCRIPTION | 2136030664a9bfeb8a775d7029704021 | es       | Carta pidiendo que el cliente abra el caso                 | 
| OUT_DOC_FILENAME    | 2136030664a9bfeb8a775d7029704021 | es       | CartaAbrirCaso                                             | 
+---------------------+----------------------------------+----------+------------------------------------------------------------+
</codeblock>

<p>Note that a multilingual Output Document like this can be created by first logging into ProcessMaker in English and creating the Output Document, then logging into ProcessMaker in Spanish and editing the same output document in Spanish.</p>
<h3><span id="Output_Document_Files">Output Document Files</span></h3>
<p>When Output Document files are generated while running a case, an HTML file is created based upon the Output Document's template. From that HTML file, a PDF and/or DOC file are created. (Actually the DOC file is really just HTML code inside a DOC container.)</p>
<p>Output Documents files are stored at:</p>

<codeblock>&lt;INSTALL-DIRECTORY&gt;/shared/sites/&lt;WORKSPACE&gt;/files/&lt;CASE-UID&gt;/outdocs/&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.&lt;EXTENSION&gt;
</codeblock>

<p>The filename of output documents files includes the unique ID for the case file (which is stored in the <strong><tt>wf_&lt;WORKFLOW&gt;.APP_DOCUMENT.APP_DOC_UID</tt></strong> field) and the version number, which starts counting from 1. Even if versioning isn't enabled, the filename will include "_1".</p>

<p><strong>Linux/UNIX:</strong></p>
<div style="margin-left:25px">
<codeblock>&lt;INSTALL-DIRECTORY&gt;/shared/sites/&lt;WORKSPACE&gt;/files/&lt;CASE-UID&gt;/outdocs/&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.html
                                                                     /&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.pdf
                                                                     /&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.doc
</codeblock>

<p style="margin-left:25px"><strong><font color="green">Note:</font></strong><font color="dimgray"> The TCPDF library doesn't generate a separate HTML file.</font></p>

<p>For example:</p>

<codeblock>/opt/processmaker/shared/sites/workflow/files/a03459e1cb9824dac456780eca7b5cf6/outdocs/6663790024dd29d8bcb8212038377266_2.doc</codeblock>
</div>
<p><strong>Windows:</strong></p>
<div style="margin-left:25px">
<codeblock>&lt;INSTALL-DIRECTORY&gt;\processmaker\shared\&lt;WORKSPACE&gt;\files\&lt;CASE-UID&gt;\outdocs\&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.html 
                                                                            \&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.pdf
                                                                            \&lt;CASE-FILE-UID&gt;_&lt;VERSION&gt;.doc
</codeblock>

<p>For example in Windows Vista and later:</p>

<codeblock>C:\Users\Bob\AppData\Roaming\ProcessMaker-2_5_3\processmaker\shared\workflow\files\a03459e1cb9824dac456780eca7b5cf6\outdocs\6663790024dd29d8bcb8212038377266_2.doc
</codeblock>
</div>
<p>In version 2.5.1 and later, an option was added to allow <a href="../index.php/Managing_32K_Folders.html">case files to be stored in a series of 3 subdirectories</a> 
created from the case's unique ID to avoid the 32K file limits of Linux's ext3 file system. In version 3.0 and later, this option is activated by default. This means that a directory using the case's unique ID, such as <code>/a03459e1cb9824dac456780eca7b5cf6/</code> in the above example, becomes 3 subdirectories whose names are three characters in the case's unique ID, with the rest of the unique ID placed in the name of another subdirectory:</p>
<codeblock>/opt/processmaker/shared/sites/workflow/files<b>/a03/459/e1c/b9824dac456780eca7b5cf6/</b>outdocs/6663790024dd29d8bcb8212038377266_2.doc</codeblock>
 
<p>If accessing an Output Document file in a ProcessMaker trigger or plugin, the it is recommended to use the defined constants <code>PATH_DOCUMENT</code>, which is set the location of the case files, such as <code>"/opt/processmaker/shared/sites/workflow/files/"</code> on a Linux/UNIX system, and <code>PATH_SEP</code>, which is  <code>"/"</code> on Linux/UNIX systems and <code>"\"</code> on Windows systems to separate directories in the file system. The <a href="../index.php/Internal_Functions_and_Classes.html#G::getPathFromURL.28.29">G::getPathFromUID()</a> method may be used in version 2.5.1 or later to break a unique ID number into subdirectories in this way if the system requires it. For example to get an Output Document file with the case-file ID of 6960198894e6927e0a40b14004833875 and the version number 2 in the current case:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$OutDocPath</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #009900;">&#41;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;outdocs&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;6960198894e6927e0a40b14004833875_2.pdf&quot;</span><span style="color: #339933;">;</span></div></div>
If unsure if in version 2.5.1 or later, then use <a href="http://php.net/manual/en/function.method-exists.php">method_exists()</a> to check whether <code>G::getPathFromUID()</code> exists before calling it. 
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'a03459e1cb9824dac456780eca7b5cf6'</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">=</span> <a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$caseId</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$OutDocPath</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;outdocs&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;6960198894e6927e0a40b14004833875_2.pdf&quot;</span><span style="color: #339933;">;</span></div></div>
<h4><span id="Changing_the_File_Location">Changing the File Location</span></h4>
<p>If needing to store Input and Output Document files in a different location, such as a NAS, then copy the contents of the <strong><tt>files</tt></strong> directory to the new location and then edit the source code in <strong><tt>workflow/public_html/sysGeneric.php</tt></strong> and change the locate of <tt>PATH_DOCUMENT</tt>, which is defined at line 332:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<a href="http://php.net/define"><span style="color: #990000;">define</span></a><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'PATH_DOCUMENT'</span><span style="color: #339933;">,</span> PATH_DATA_SITE <span style="color: #339933;">.</span> <span style="color: #0000ff;">'files/'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>For example, to store files at a NAS mounted drive at <strong><tt>/media/nas/processmaker</tt></strong>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><a href="http://php.net/define"><span style="color: #990000;">define</span></a><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">'PATH_DOCUMENT'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'/media/nas/processmaker/'</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>
<p>Make sure to include the forward slash in Linux/UNIX or the backward slash in Windows at the end of the path.</p>

<h3><span id="Generated_Output_Documents_in_the_Database">Generated Output Documents in the Database</span></h3>
<p>When an Output Document is generated when running a case, a new entry is added to the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> table and new unique ID is assigned to the generated Output Document. In addition 3 new entries are added to the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table whose <strong><tt>CON_ID</tt></strong> field is set to that unique ID and the <strong><tt>CON_CATEGORY</tt></strong> fields are set to <tt>'APP_DOC_TITLE'</tt>,<tt>'APP_DOC_FILENAME'</tt> and <tt>'APP_DOC_COMMENT'</tt>, respectively.</p>
<p>If inside a trigger or using an external application or script, the unique ID for an Output Document file can be found with the <a href="../index.php/ProcessMaker_WSDL_Web_Services.html#Output_Document_List" title="ProcessMaker WSDL Web Services">outputDocumentList()</a> web service. Inside a trigger or a DynaForm, the unique IDs for all generated Output Documents can be looked up with the following SQL query:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>

<p>To find the generated Output Documents for a specified case:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>

<p>To find a specified Output Document for a specified case, which was uploaded by a specified user:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;INPUT_DOC_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;USER_UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'INPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span></div></div>

<p>Output Documents can be marked by <i>tags</i>, which provide an easy way to find related Output Documents under <strong>HOME &gt; Documents</strong>. The tags are stored in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.APP_DOC_TAGS</tt></strong> field for each generated Output Document file and multiple tags are separated by commas. To find all generated Output Document files for a case with a specified tag:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; &nbsp;APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_TAGS <span style="color: #993333; font-weight: bold;">LIKE</span> <span style="color: #ff0000;">'%&lt;TAG&gt;%'</span></div></div>

<p>To find all generated Output Documents created between a certain date range:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; &nbsp;APP_DOC_CREATE_DATE<span style="color: #66cc66;">&gt;=</span><span style="color: #ff0000;">'&lt;YYYY-MM-DD HH:MM:SS&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_CREATE_DATE<span style="color: #66cc66;">&lt;=</span><span style="color: #ff0000;">'&lt;YYYY-MM-DD HH:MM:SS&gt;'</span></div></div>

<p>To find the unique IDs for all the generated files for a specified Output Document Definition and their filenames used under <strong>HOME &gt; Documents</strong> (not its real filename in the file system), query the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_ID<span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT AD<span style="color: #66cc66;">,</span> CONTENT C <br />
&nbsp; <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;OUT-DOC-DEFINITION-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; AD<span style="color: #66cc66;">.</span>APP_DOC_UID<span style="color: #66cc66;">=</span>C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'APP_DOC_FILENAME'</span> <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_VALUE<span style="color: #66cc66;">&lt;&gt;</span><span style="color: #ff0000;">''</span></div></div>

<p>To find the unique IDs for all the generated Output Documents for a specified user and their filenames used under <strong>HOME &gt; Documents</strong>:</p>

<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_ID<span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT AD<span style="color: #66cc66;">,</span> CONTENT C <br />
&nbsp; <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>USR_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;USER-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; AD<span style="color: #66cc66;">.</span>APP_DOC_UID<span style="color: #66cc66;">=</span>C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'APP_DOC_FILENAME'</span> <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_VALUE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">''</span></div></div>

<p>To find the unique IDs for all the generated Output Documents for a specified case and their filenames used under <strong>HOME &gt; Documents</strong>:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> C<span style="color: #66cc66;">.</span>CON_ID<span style="color: #66cc66;">,</span> C<span style="color: #66cc66;">.</span>CON_VALUE <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT AD<span style="color: #66cc66;">,</span> CONTENT C <br />
&nbsp; <span style="color: #993333; font-weight: bold;">WHERE</span> AD<span style="color: #66cc66;">.</span>APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_TYPE<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'OUTPUT'</span> <span style="color: #993333; font-weight: bold;">AND</span> AD<span style="color: #66cc66;">.</span>APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; AD<span style="color: #66cc66;">.</span>APP_DOC_UID<span style="color: #66cc66;">=</span>C<span style="color: #66cc66;">.</span>CON_ID <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_CATEGORY<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'APP_DOC_FILENAME'</span> <span style="color: #993333; font-weight: bold;">AND</span> C<span style="color: #66cc66;">.</span>CON_VALUE<span style="color: #66cc66;">&lt;&gt;</span><span style="color: #ff0000;">''</span></div></div>

<p>If multi-lingual processes have been designed and the filename depends upon the system language, then add <tt>ADD C.CON_LANG='&lt;LANG-CODE&gt;'</tt> to the 3 queries above.</p>
<p>If the Output Document is configured to allow multiple versions of the same Input Document file, then also look for the record with the highest positive integer in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.DOC_VERSION</tt></strong> field. (The counting starts from the number 1.)</p>
<p>To find the most recent version of a generated Output Document for a specified case:</p>
<div class="geshifilter"><div class="sql geshifilter-sql" style="font-family:monospace;"><span style="color: #993333; font-weight: bold;">SELECT</span> APP_DOC_UID <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;OUT-DOC-DEFINITION-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span> <span style="color: #993333; font-weight: bold;">AND</span><br />
&nbsp; DOC_VERSION <span style="color: #66cc66;">=</span> <span style="color: #66cc66;">&#40;</span><span style="color: #993333; font-weight: bold;">SELECT</span> <span style="color: #993333; font-weight: bold;">MAX</span><span style="color: #66cc66;">&#40;</span>DOC_VERSION<span style="color: #66cc66;">&#41;</span> <span style="color: #993333; font-weight: bold;">FROM</span> APP_DOCUMENT <span style="color: #993333; font-weight: bold;">WHERE</span> APP_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;CASE-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> <br />
&nbsp; DOC_UID<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'&lt;OUT-DOC-DEFINITION-UID&gt;'</span> <span style="color: #993333; font-weight: bold;">AND</span> APP_DOC_STATUS<span style="color: #66cc66;">=</span><span style="color: #ff0000;">'ACTIVE'</span><span style="color: #66cc66;">&#41;</span></div></div>

<h2><span id="Accessing_Output_Documents_through_Triggers">Accessing Output Documents through Triggers</span></h2>
<p>To examine the definition for an Output Document in a <a href="../index.php/2.0/Triggers.html" title="Triggers">trigger</a>, the Unique ID (UID) for the Output Document needs to be looked up. The UID can be found by looking it up in the <strong><tt>wf_&lt;WORKSPACE&gt;.OUTPUT_DOCUMENT.OUT_DOC_UID</tt></strong> field in the database, or by opening a process for editing. In the list of Output Documents, there is a <b>UID</b> button for each Output Document which shows its unique ID number.</p>
<p><img alt="" height="224" src="../sites/default/files/OutputDocumentUID.png" width="605"></p>
<p>To open the Output Document generated for a particular case, it is necessary to know the UID for the case, in order to know where to find the Output Document stored in the file system. Either use the @@APPLICATION system variable for the UID of the current case or lookup the case UID in the <strong><tt>wf_&lt;WORKSPACE&gt;.APPLICATION.APP_UID</tt></strong> field. Once the file location is known, then use the <a  href="http://php.net/manual/en/function.file.php">file()</a> or <a  href="http://www.php.net/manual/en/function.file-get-contents.php">file_get_contents()</a> to read the contents of a Output Document file in HTML or DOC format. Note that the generated DOC file is really just an HTML file with a ".doc" extension, so it can be read as a normal text file.</p>
<p>If trying to construct a link to an Output Document for a particular case, lookup the UID for the generated Output Document in the <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT.APP_DOC_UID</tt></strong> field. This UID can be found by searching for the UID of the case and the UID for the Output Document definition in the <strong><tt>APP_DOCUMENT</tt></strong> table.</p>

<h3><span id="Linking_to_an_Output_Document_in_Emails">Linking to an Output Document in Emails</span></h3>
<p>In order to send out an email with a link to an Output Document for a particular case, first create a new email template by opening the process to edit it. Then, <i>right click</i> on the process map and select the option <strong>Process Files Manager</strong> from the dropdown menu. Enter the <strong><tt>mailTemplates</tt></strong> directory and click on the <strong>New</strong> link to create an email template named "opendoc.html". Then edit it to have the following content:</p>

<codeblock>To open the output document, go to this link:
http://IP-ADDRESS/sys@#SYS_SYS/@#SYS_LANG/@#SYS_SKIN/cases/cases_ShowOutputDocument?a=@#appDocUid&ext=pdf
</codeblock>

<p>Replace <tt><i><strong>IP-ADDRESS</strong></i></tt> with the address of the server running ProcessMaker. If the output document is in DOC format, rather than a PDF, then replace <strong><tt>ext=pdf</tt></strong> with <strong><tt>ext=doc</tt></strong>.</p>
<p>If the user does not have an open login session for ProcessMaker, then ProcessMaker will redirect to a login screen before directing to the Output Document file. In order to access the Output Document file, the user must be assigned <a href="../index.php/2.0/Process_Permissions.html" title="Process Permissions">Process Permissions</a> to access the Output Document or must be the currently <a href="../index.php/2.0/Processes.html#Task_Designation_Rules" title="Processes">designated user</a> to work on a task which has the Output Document as a step.</p>
<p>The system variables <tt>@#SYS_SYS</tt>, <tt>@#SYS_LANG</tt>, and <tt>@#SYS_SKIN</tt> are already defined, but a trigger will have to be created to look up the UID for a specific Output Document for a case and assign it to the case variable <tt>@#appDocUid</tt> in the email template. Then, send out the email with <a href="../index.php/Notifications.html#Sending_emails_with_PMFSendMessage.28.29" title="Notifications">PMFSendMessage()</a>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace with the Output Document definition UID</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span> &nbsp; &nbsp;<br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>appDocUid <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'supervisor@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'employee@example.com'</span><span style="color: #339933;">,</span> <br />
&nbsp; <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'Open Output Document for your case'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'opendoc.html'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to find Output Document for Case.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>If only the title of the Output Document is known, but not its unique ID, then the UID of the Output Document definition can be looked up in the MySQL database. For instance if the title of the Output Document is "<tt>Invoice</tt>", then look up that title in the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> table.</p>
<p>Replace the line:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;">&nbsp;<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace with the Output Document definition UID</span></div></div>

<p>With the code:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$process</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>PROCESS<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$outDocTitle</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;Invoice&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;select OD.OUT_DOC_UID from OUTPUT_DOCUMENT OD, CONTENT C where &quot;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp;<span style="color: #0000ff;">&quot;OD.OUT_DOC_UID=C.CON_ID and C.CON_CATEGORY='OUT_DOC_TITLE' and C.CON_VALUE='<span style="color: #006699; font-weight: bold;">$outDocTitle</span>'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> or <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&lt;</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to find output document '<span style="color: #006699; font-weight: bold;">$outDocTitle</span>' in database!&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'OUT_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Linking_to_multiple_Output_Documents_in_Templates">Linking to multiple Output Documents in Templates</span></h3>
<p>Inserting links to multiple Outputs Documents files in an <a href="../index.php/Notifications.html" title="Notifications">email notifications</a> and Output Documents involves creating a template which contains a grid. Grids fields should be enclosed inside <strong><code>@&gt;<i>grid-name</i> ... @&lt;<i>grid-name</i></code></strong> tags and will be repeated for as many records as are found in the grid. For more information, see <a href="../index.php/Output_Documents.html#Grids_in_Output_documents">Grids in Output_documents</a>.</p>
<p>For example, the following template is used to print a table of Output Documents:</p>

<codeblock>&lt;center&gt;&lt;b&gt;Reports from '@#CaseTitle'&lt;/b&gt;&lt;/center&gt;
 &lt;pre&gt;
 ------------------------------------------------------------------------------------------------------
 Title               | Date Created  | Filename: links 
 ------------------------------------------------------------------------------------------------------
 @&gt;OutputDocList
 @#title             | @#dateCreated | @#filename: &lt;a href="@#pdfLink"&gt;PDF&lt;/a&gt; &lt;a href="@#docLink"&gt;DOC&lt;/a&gt;
 ------------------------------------------------------------------------------------------------------  
 @&lt;OutputDocList
 &lt;/pre&gt;
</codeblock>

<p>The following trigger is fired <i>before</i> the Output Document is generated to populate the <tt>@=OutputDocList</tt> array used in the template. It uses <a href="../index.php/ProcessMaker_Functions.html#executeQuery.28.29" title="ProcessMaker Functions">executeQuery()</a> to lookup the unique IDs, creation dates, users and filenames for the generated Output Document files generated for the current case. <code>executeQuery()</code> returns an associative array of associative arrays which is the same format as used by grids. Then, the trigger loops through the records in that associative array and looks up the unique ID, title, creation date, and filename for each generated Output Document in the <tt><strong>APP_DOCUMENT</strong></tt> and <strong><tt>CONTENT</tt></strong> tables. It also uses the unique ID to construct the links to the PDF and DOC for each Output Document and inserts that information into the <code>@=InputDocList</code> array:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//current case unique ID</span><br />
<span style="color: #666666; font-style: italic;">//Look up the case title:</span><br />
<span style="color: #000088;">$caseInfo</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT APP_TITLE FROM APPLICATION WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@@</span>CaseTitle <span style="color: #339933;">=</span> <span style="color: #000088;">$caseInfo</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_TITLE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #339933;">@=</span>OutputDocList <span style="color: #339933;">=</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT C.CON_ID AS uid, AD.APP_DOC_CREATE_DATE AS dateCreated, C.CON_VALUE AS filename, &nbsp;<br />
&nbsp; &nbsp;FROM APP_DOCUMENT AD, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND AD.APP_DOC_TYPE='OUTPUT' AND AD.APP_DOC_STATUS='ACTIVE'<br />
&nbsp; &nbsp;AND AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;''&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$docs</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$docs</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$docs</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$i</span> <span style="color: #339933;">=</span> <span style="color: #cc66cc;">1</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span> <span style="color: #339933;">&lt;=</span> <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$docs</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <span style="color: #000088;">$i</span><span style="color: #339933;">++</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//Create links to the generated Output Document's PDF and DOC:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$url</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'http://'</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$_SERVER</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'HTTP_HOST'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/sys'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/cases/cases_ShowOutputDocument?a='</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'uid'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'&amp;ext='</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'pdfLink'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$url</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'pdf'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'docLink'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$url</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'doc'</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #666666; font-style: italic;">//lookup the title for the generated Output Document:</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$titleQuery</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT CON_VALUE FROM CONTENT WHERE CON_ID='&quot;</span> <span style="color: #339933;">.</span> <span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'uid'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">&quot;' AND CON_CATEGORY='APP_DOC_TITLE'&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$titleQuery</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$titleQuery</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'title'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$titleQuery</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'CON_VALUE'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #000088;">$docs</span><span style="color: #009900;">&#91;</span><span style="color: #000088;">$i</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'title'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #009900;">&#125;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@=</span>OutputDocList <span style="color: #339933;">=</span> <span style="color: #000088;">$docs</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="Linking_to_an_Output_Document_in_a_DynaForm">Linking to an Output Document in a DynaForm</span></h3>
<p>In order to include a link to an Output Document in a DynaForm, first create a DynaForm with a <a href="../index.php/2.0/Links.html" title="2.0/Links">link</a> field named "OutDocLink" and two <a href="../index.php/2.0/Other_DynaForm_Fields.html#Hidden" title="2.0/Other DynaForm Fields">hidden</a> fields named "OutDocURL" and "OutDocLabel". Add the following JavaScript code to the DynaForm, to set the URL and label for the link when the DynaForm is first displayed.</p>

<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;OutDocLink&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">href</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;OutDocURL&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span><br />
getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;OutDocLink&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">innerHTML</span> <span style="color: #339933;">=</span> getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;OutDocLabel&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">value</span><span style="color: #339933;">;</span></div></div>

<p>If the Output Document should be opened in a separate window, add the code:</p>
<div class="geshifilter"><div class="javascript geshifilter-javascript" style="font-family:monospace;">getField<span style="color: #009900;">&#40;</span><span style="color: #3366CC;">&quot;OutDocLink&quot;</span><span style="color: #009900;">&#41;</span>.<span style="color: #660066;">target</span> <span style="color: #339933;">=</span> <span style="color: #3366CC;">&quot;_blank&quot;</span><span style="color: #339933;">;</span></div></div>

<p>Then, create a trigger with the following code to lookup the address to the Output Document and set the URL and label for the link field:</p>
<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace with the Output Document definition ID</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;SELECT * FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>' ORDER BY DOC_VERSION DESC&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span> &nbsp; &nbsp;<br />
&nbsp; &nbsp;<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>OutDocURL <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;../cases/cases_ShowOutputDocument?a=<span style="color: #006699; font-weight: bold;">$docId</span>&amp;ext=pdf&quot;</span><span style="color: #339933;">;</span> <br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>OutDocLabel <span style="color: #339933;">=</span> <span style="color: #0000ff;">'Open Output Document'</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to find Output Document for Case.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="Linking_to_multiple_Output_Documents_in_Grids">Linking to multiple Output Documents in Grids</span></h3>
<p>The previous example works well, when the number of generated Output Documents is known beforehand. However, if the number of generated Output Documents is not known beforehand, it is best to display a list of <a href="../index.php/2.0/Links.html" title="2.0/Links">links</a> inside a DynaForm <a href="../index.php/2.5.X/DynaForms.html#Grid" title="2.0/DynaForm Fields">grid</a>. For example, if displaying links to all versions of an Output Document or displaying all the available Output Documents for a case, user, group, department, process, etc.</p>
<p>In order to populate the grid, fire a trigger which queries the <strong><tt>wf_&lt;WORKSPACE&gt;.CONTENT</tt></strong> and <strong><tt>wf_&lt;WORKSPACE&gt;.APP_DOCUMENT</tt></strong> tables to find the unique IDs of the generated Output Documents and their filenames (and any other information like their creation date and the user who created them). Since it is not possible to set the labels and URLs of links in a grid, all the links in the grid can be passed inside a <a href="../index.php/2.5.X/DynaForms.html#Using_Grids_as_Serialized_Strings" title="2.0/DynaForm Fields">JSON string</a> to a hidden field in the DynaForm and then JavaScript can be used to decode the JSON string and set all the links in the grid.</p>
<p>For example, the following trigger is used look up all the Output Documents generated by the current user. The trigger will populate a grid named "DocumentListGrid" with fields named "caseNo", "filename", "dateCreated", and link fields named "pdfUrl" and "docUrl". The trigger creates a JSON string to hold the URLs to the Input Document files, which will be passed to a <a href="../index.php/2.0/Other_DynaForm_Fields.html#Hidden" title="2.0/Other DynaForm Fields">hidden</a> field named "urlList".</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$userId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>USER_LOGGED<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT A.APP_NUMBER AS caseNo, C.CON_VALUE AS filename, AD.APP_DOC_CREATE_DATE AS dateCreated, <br />
&nbsp; &nbsp;AD.APP_DOC_UID AS docId FROM APP_DOCUMENT AD, APPLICATION A, CONTENT C<br />
&nbsp; &nbsp;WHERE AD.USR_UID='<span style="color: #006699; font-weight: bold;">$userId</span>' AND AD.APP_DOC_TYPE='OUTPUT' AND AD.APP_DOC_STATUS='ACTIVE' AND <br />
&nbsp; &nbsp;AD.APP_DOC_UID=C.CON_ID AND C.CON_CATEGORY='APP_DOC_FILENAME' AND C.CON_VALUE&lt;&gt;'' AND AD.APP_UID=A.APP_UID&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>DocumentListGrid <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>urlList <span style="color: #339933;">=</span> <a href="http://php.net/json_encode"><span style="color: #990000;">json_encode</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<p>Create a hidden field in the master DynaForm named "urlList". Then, the following JavaScript code is used in the DynaForm to set the <tt>href</tt> property of each "docURL" and "pdfUrl" grid field in "DocumentListGrid" when the DynaForm is displayed. The <a href="http://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval">eval()</a> function is used to convert the JSON string into an object. Note that <a  href="http://php.net/manual/en/function.json-encode.php">json_encode()</a> in the trigger above converts <code>$result</code> from an associative array of associative arrays into an object, so the JavaScript will have to access it as an object.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">var</span> urlListDecoded <span style="color: #339933;">=</span> <a href="http://php.net/eval"><span style="color: #990000;">eval</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'('</span> <span style="color: #339933;">+</span> getField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;urlList&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>value <span style="color: #339933;">+</span> <span style="color: #0000ff;">')'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> <br />
<span style="color: #b1b100;">for</span> <span style="color: #009900;">&#40;</span><span style="color: #000000; font-weight: bold;">var</span> rowNo in urlListDecoded<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #666666; font-style: italic;">//if version numbers are needed, add &quot;&amp;v=X&quot; to the following URLs:</span><br />
&nbsp; &nbsp;getGridField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DocumentListGrid'</span><span style="color: #339933;">,</span> rowNo<span style="color: #339933;">,</span> <span style="color: #0000ff;">'pdfUrl'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>href <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;../cases/cases_ShowOutputDocument?a=&quot;</span> <span style="color: #339933;">+</span> <br />
&nbsp; &nbsp; &nbsp; urlListDecoded<span style="color: #009900;">&#91;</span>rowNo<span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;docId&quot;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot;&amp;ext=pdf&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;getGridField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DocumentListGrid'</span><span style="color: #339933;">,</span> rowNo<span style="color: #339933;">,</span> <span style="color: #0000ff;">'docUrl'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>href <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;../cases/cases_ShowOutputDocument?a=&quot;</span> <span style="color: #339933;">+</span> <br />
&nbsp; &nbsp; &nbsp; urlListDecoded<span style="color: #009900;">&#91;</span>rowNo<span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">&quot;docId&quot;</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot;&amp;ext=doc&quot;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;getGridField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DocumentListGrid'</span><span style="color: #339933;">,</span> rowNo<span style="color: #339933;">,</span> <span style="color: #0000ff;">'pdfUrl'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>target <span style="color: #339933;">=</span> <span style="color: #0000ff;">'_blank'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//to open in separate page</span><br />
&nbsp; &nbsp;getGridField<span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'DocumentListGrid'</span><span style="color: #339933;">,</span> rowNo<span style="color: #339933;">,</span> <span style="color: #0000ff;">'docUrl'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">.</span>target <span style="color: #339933;">=</span> <span style="color: #0000ff;">'_blank'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//to open in separate page</span><br />
<span style="color: #009900;">&#125;</span></div></div>

<h3><span id="Emailing_the_content_of_an_Output_Document">Emailing the content of an Output Document</span></h3>
<p>This example sends the contents of an Output Document file in an email. Output Document files are generated in HTML format, so its HTML code can be extracted from the file and inserted into an email, as long as the recipient's email client supports HTML. If the recipient's email client doesn't support HTML, then use <a  href="http://php.net/manual/en/function.strip-tags.php">strip_tags()</a> and <a  href="http://www.php.net/manual/en/function.html-entity-decode.php">html_entity_decode()</a> to convert the contents to plain text.</p>
<p>First, open the process and <i>right click</i> on the process map and select the option <strong>Process File Manager</strong> from the dropdown menu. Go to the <strong>mailTemplates</strong> directory and create an email template with an inserted variable named <tt>@#Contents</tt> which will hold the contents of Output Document:</p>

<codeblock>Dear Supervisor,
Here is the output document for the case:  
@#Contents 
</codeblock>

<p>Then, create a <a href="../index.php/2.0/Triggers.html" title="Triggers">trigger</a> to lookup the path and filename of the generated Output Document and get its contents with the <a  href="http://php.net/manual/en/function.file-get-contents.php">file_get_contents()</a> function. Then, pass those contents as a variable to be inserted in the email template. Note that variables can be passed as key-value pairs in an associative array, which is the last parameter for the <a href="../index.php/Notifications.html#Sending_emails_with_PMFSendMessage.28.29" title="Notifications">PMFSendMessage()</a> function.</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$outDocId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace with the Output Document definition ID</span><br />
<span style="color: #000088;">$query</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT APP_DOC_UID, DOC_VERSION AS VERSION FROM APP_DOCUMENT WHERE APP_UID = '<span style="color: #006699; font-weight: bold;">$caseId</span>' <br />
&nbsp; &nbsp;AND DOC_UID = '<span style="color: #006699; font-weight: bold;">$outDocId</span>' ORDER BY DOC_VERSION DESC&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$query</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a> <span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">=</span> <a href="http://php.net/method_exists"><span style="color: #990000;">method_exists</span></a><span style="color: #009900;">&#40;</span>G<span style="color: #339933;">,</span> <span style="color: #0000ff;">&quot;getPathFromUID&quot;</span><span style="color: #009900;">&#41;</span> ? <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">getPathFromUID</span><span style="color: #009900;">&#40;</span><span style="color: #000088;">$caseId</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000088;">$caseId</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$path</span> <span style="color: #339933;">=</span> PATH_DOCUMENT <span style="color: #339933;">.</span> <span style="color: #000088;">$caseIdPath</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;outdocs&quot;</span> <span style="color: #339933;">.</span> PATH_SEP <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'_'</span> <span style="color: #339933;">.</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'VERSION'</span><span style="color: #009900;">&#93;</span> <span style="color: #339933;">.</span> <span style="color: #0000ff;">'.html'</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$contents</span> <span style="color: #339933;">=</span> <a href="http://php.net/file_get_contents"><span style="color: #990000;">file_get_contents</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$path</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><span style="color: #339933;">!</span><span style="color: #000088;">$contents</span><span style="color: #009900;">&#41;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp; &nbsp; <span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to open file '<span style="color: #006699; font-weight: bold;">$path</span>'!&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ERROR'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp; &nbsp; PMFSendMessage<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #0000ff;">'from@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'to@example.com'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">,</span> <br />
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">'Output Document for case'</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'MyOutputDocument.html'</span><span style="color: #339933;">,</span> <a href="http://php.net/array"><span style="color: #990000;">array</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">'Contents'</span><span style="color: #339933;">=&gt;</span><span style="color: #000088;">$contents</span><span style="color: #009900;">&#41;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #009900;">&#125;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> G<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
&nbsp; &nbsp;<span style="color: #000088;">$g</span><span style="color: #339933;">-&gt;</span><span style="color: #004000;">SendMessageText</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Unable to find Output Document in database.<span style="color: #000099; font-weight: bold;">\n</span>Query:<span style="color: #000099; font-weight: bold;">\n</span><span style="color: #006699; font-weight: bold;">$query</span>&quot;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">'ERROR'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h3><span id="Redirecting_to_Generated_Output_Document_Files">Redirecting to Generated Output Document Files</span></h3>
<p>The web browser can be redirected to open a generated Output Document file. If the web browser is configured to open DOC or PDF files with a plugin, then the document will appear directly in the web browser, otherwise, the file will be downloaded to the user's local computer.</p>
<p>From inside a trigger, the web browser can be redirected with the <a href="../index.php/ProcessMaker_Functions.html#G::header.28.29" title="ProcessMaker Functions">G::header()</a> function, followed by the <a  href="http://www.php.net/manual/en/function.die.php">die()</a> function to stop the next step in the task from occurring. For example, to open the DOC file of a generated Output Document which has the unique ID "4164671654e67abad23a070019778021":</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;4164671654e67abad23a070019778021&quot;</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;location: cases_ShowOutputDocument?a=<span style="color: #006699; font-weight: bold;">$docId</span>&amp;ext=doc&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>The <tt>G::header()</tt> function, however, redirects the location of the current frame. To open in a separate window, write JavaScript code which calls the <a  href="http://developer.mozilla.org/En/Window.open">window.open()</a> method. Unlike the <a href="../index.php/Internal_Functions_and_Classes.html#G::header.28.29">G::header()</a> function which accepts relative addresses, the complete address needs to be constructed using ProcessMaker <a href="../index.php/2.0/Triggers.html#System_Variables_in_Triggers" title="Triggers">system variables</a> and PHP's <a  href="http://php.net/manual/en/reserved.variables.server.php">$_SERVER</a> superglobal array. For example:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;4164671654e67abad23a070019778021&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">echo</span> <span style="color: #0000ff;">&quot;&lt;script type=<span style="color: #000099; font-weight: bold;">\&quot;</span>text/javascript<span style="color: #000099; font-weight: bold;">\&quot;</span>&gt; window.open('http://<span style="color: #006699; font-weight: bold;">{$_SERVER['SERVER_ADDR']}</span>:<span style="color: #006699; font-weight: bold;">{$_SERVER['SERVER_PORT']}</span>/sys&quot;</span> <span style="color: #339933;">.</span> <br />
&nbsp; &nbsp;<span style="color: #339933;">@@</span>SYS_SYS <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_LANG <span style="color: #339933;">.</span> <span style="color: #0000ff;">'/'</span> <span style="color: #339933;">.</span> <span style="color: #339933;">@@</span>SYS_SKIN <span style="color: #339933;">.</span> <span style="color: #0000ff;">&quot;/cases/cases_ShowOutputDocument?a=<span style="color: #006699; font-weight: bold;">$docId</span>&amp;ext=doc'); &lt;/script&gt;&quot;</span><span style="color: #339933;">;</span></div></div>

<p>To lookup the unique ID of a generated Output Document for the current case, the following trigger could be used:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #000088;">$docId</span><span style="color: #339933;">=</span><span style="color: #0000ff;">'1726074214e649405869680030553332'</span><span style="color: #339933;">;</span> <span style="color: #666666; font-style: italic;">//replace with Output Document definition unique ID</span><br />
<span style="color: #000088;">$caseId</span> <span style="color: #339933;">=</span> <span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">;</span><br />
<span style="color: #000088;">$qry</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;SELECT * FROM APP_DOCUMENT WHERE APP_UID='<span style="color: #006699; font-weight: bold;">$caseId</span>' AND DOC_UID='<span style="color: #006699; font-weight: bold;">$docId</span>' AND APP_DOC_STATUS='ACTIVE'&quot;</span><span style="color: #339933;">;</span><br />
<span style="color: #000088;">$result</span> <span style="color: #339933;">=</span> executeQuery<span style="color: #009900;">&#40;</span><span style="color: #000088;">$qry</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">if</span> <span style="color: #009900;">&#40;</span><a href="http://php.net/is_array"><span style="color: #990000;">is_array</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> and <a href="http://php.net/count"><span style="color: #990000;">count</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$result</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span><span style="color: #009900;">&#41;</span> &nbsp; <br />
&nbsp; &nbsp;<span style="color: #000088;">$docId</span> <span style="color: #339933;">=</span> <span style="color: #000088;">$result</span><span style="color: #009900;">&#91;</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#91;</span><span style="color: #0000ff;">'APP_DOC_UID'</span><span style="color: #009900;">&#93;</span><span style="color: #339933;">;</span><br />
<span style="color: #b1b100;">else</span><br />
&nbsp; &nbsp;<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;Error: Unable to find Output Document for Case.&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;location: cases_ShowOutputDocument?a=<span style="color: #006699; font-weight: bold;">$docId</span>&amp;ext=doc&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<p>If needing to route the case to the next task in the process (or finish the case if the last task), then call the <a  href="../index.php/ProcessMaker_Functions.html#PMFDerivateCase.28.29">PMFDerivateCase()</a> function before <tt>G::header()</tt>:</p>

<div class="geshifilter"><div class="php geshifilter-php" style="font-family:monospace;"><span style="color: #339933;">...</span><br />
PMFDerivateCase<span style="color: #009900;">&#40;</span><span style="color: #339933;">@@</span>APPLICATION<span style="color: #339933;">,</span> <span style="color: #339933;">@%</span>INDEX<span style="color: #339933;">,</span> <span style="color: #009900; font-weight: bold;">true</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
G<span style="color: #339933;">::</span><a href="http://php.net/header"><span style="color: #990000;">header</span></a><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;location: cases_ShowOutputDocument?a=<span style="color: #006699; font-weight: bold;">$docId</span>&amp;ext=doc&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span><br />
<a href="http://php.net/die"><span style="color: #990000;">die</span></a><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></div></div>

<h2><span id="Errors_with_Output_Documents">Errors with Output Documents</span></h2>
<h3><span id="Error_while_generating_PDF_Documents">Error while generating PDF Documents</span></h3>
<p>PHP version 5.4.0 or less must be installed if using the HTML2PDF library to generate PDF documents. Otherwise, a blank page will be generated. If a later version of PHP is installed, use the TCPDF library to generate Output Documents.</p>

<h3><span id="Variables_are_not_inserted">Variables are not inserted</span></h3>
<p>If variables are not inserted into an Output Document, then either:</p>

<ol>
<li>The variable name was not spelled correctly. Remember that system and case variable names are case sensitive. Recheck the spelling by looking at the field name in the DynaForm or the variable name in the Trigger where it was defined.</li>
<li>The case variable doesn't exist when the Output Document was created. If an Output Document references fields from a DynaForm which is used later in the process, then the case variable doesn't yet exist. Also, remember that case variables for each field in a DynaForm are only created when the DynaForm is submitted. If the user clicks on the <strong>Next Step</strong> link in a DynaForm whose Next Step Link property is set to "No Save &amp; Continue", then none of the data in the DynaForm will be saved.</li></ol>
<p>In order to determine what is the problem, run a case with the <a href="../index.php/2.0/Triggers.html#Debugging_Triggers" title="Triggers">Trigger Debugger</a> turned on and check whether the variables exist and what values they contain.</p>

<h3><span id="Output_Document_is_empty">Output Document is empty</span></h3>
<p>If an Output Document is generated which is empty, then there probably wasn't enough session memory to properly generate the document. Large output documents may need more than 80MB of session memory. Try <a href="../index.php/Changing_the_ProcessMaker_Configuration.html#Increasing_the_maximum_memory_per_session" title="Changing the ProcessMaker Configuration">increasing PHP's memory_limit</a> setting.</p>

<h3><span id="Error_in_html2pdf">Error in html2pdf</span></h3>
<p>ProcessMaker uses <a  href="http://code.google.com/p/html2pdf/">html2pdf</a> to generate Output Documents in PDF format. If an error message appears about a class in html2pdf saying "out of memory", then the <code>pcre.backtrack_limit</code> setting probably needs to be increased to allow for bigger style definitions, larger template files and deeper levels of nested tables/divs. <tt>pcre.backtrack_limit</tt> is a new setting introduced in PHP 5.2.0. If using an older version of PHP, upgrade to a newer version which supports the setting.</p>
<p><a href="../index.php/Changing_the_ProcessMaker_Configuration.html#Editing_the_PHP_configuration" title="Changing the ProcessMaker Configuration">Edit <strong><tt>php.ini</tt></strong></a>, which is the PHP configuration file on the server running ProcessMaker, and add/modify the following line to increase the <tt>backtrack_limit</tt>:</p>

<codeblock>pcre.backtrack_limit=1000000</codeblock>

<p>Then, <a href="../index.php/Changing_the_ProcessMaker_Configuration.html#Restarting_Apache" title="Changing the ProcessMaker Configuration">restart Apache</a> for the new setting to take effect.</p></form></div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&mt=8" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com">
		<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&gid=3970335&trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">© Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;">»</span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>
</html>
