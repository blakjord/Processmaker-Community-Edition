<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<meta name="keywords" content="BPM, business process management, workflow, processmaker, business, BPM Windows, BPM Linux, wiki, BPM documentation, BPM FAQ, task documentation, BPM PHP, BPM Open Source, BPM Variables, BPM Installation, BPM Programming, BPM Elements, BPM Concepts, BPM Frequently Asked Questions, BPM 3.0, BPM News, Release notes, DynaForms, BPM Community, BPM Enterprise, BPM Mobile, BPM Responsive Web Design, User Manual, BPM Resources" />
<link rel="alternate" hreflang="en" href="../index.html" />
<link rel="shortcut icon" href="https://wiki.processmaker.com/themes/thecompany_responsive_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<meta name="description" content="ProcessMaker is commercial open source workflow and business process management software." />
<meta name="viewport" content="width=device-width" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="canonical" href="../3.2/Double_Connection.html" />
<link rel="shortlink" href="722.html" />
<title>3.0 - 3.8 - Double Connection | Documentation@ProcessMaker</title>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/system/system.base.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.messages.css?s743n7");
@import url("https://wiki.processmaker.com/modules/system/system.theme.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/modules/aggregator/aggregator.css?s743n7");
@import url("https://wiki.processmaker.com/modules/comment/comment.css?s743n7");
@import url("https://wiki.processmaker.com/modules/field/theme/field.css?s743n7");
@import url("https://wiki.processmaker.com/modules/node/node.css?s743n7");
@import url("https://wiki.processmaker.com/modules/search/search.css?s743n7");
@import url("https://wiki.processmaker.com/modules/toc_filter/toc_filter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/user/user.css?s743n7");
@import url("https://wiki.processmaker.com/modules/views/css/views.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/sites/all/modules/colorbox/styles/default/colorbox_style.css?s743n7");
@import url("https://wiki.processmaker.com/modules/ctools/css/ctools.css?s743n7");
@import url("https://wiki.processmaker.com/sites/all/modules/geshifilter/geshifilter.css?s743n7");
@import url("https://wiki.processmaker.com/modules/panels/css/panels.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus.css?s743n7");
@import url("https://wiki.processmaker.com/modules/nice_menus/css/nice_menus_default.css?s743n7");
@import url("https://wiki.processmaker.com/modules/fivestar/css/fivestar.css?s743n7");
</style>
<style type="text/css" media="all">
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/style.css?s743n7");
@import url("https://wiki.processmaker.com/themes/thecompany_responsive_theme/css/media.css?s743n7");
</style>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/jquery/1.9/jquery.min.js?v=1.9.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/drupal.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.bgiframe.js?v=2.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/jquery.hoverIntent.js?v=0.5"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/superfish.js?v=1.4.8"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/nice_menus/js/nice_menus.js?v=1.0"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/ui/external/jquery.cookie.js?v=67fb34f6a866c40d0570"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/replace/misc/jquery.form.min.js?v=2.69"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/ajax.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/jquery_update/js/jquery_update.js?v=0.0.1"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/toc_filter/toc_filter.js?s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/js/colorbox.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/colorbox/styles/default/colorbox_style.js@s743n7"></script>
<script type="text/javascript" src="../sites/all/modules/google_analytics/googleanalytics.js@s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-3380652-1", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");
//--><!]]>
</script>
<script type="text/javascript" src="https://wiki.processmaker.com/misc/progress.js?v=7.34"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.ajax.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/modules/fivestar/js/fivestar.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-1.10.2.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/jquery-ui.min.js?s743n7"></script>
<script type="text/javascript" src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/js/custom.js?s743n7"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"thecompany_responsive_theme","theme_token":"KX4RG1udse6jM1Izy4DYG27A9ZFTqk_d3zFCgyNgQ6s","jquery_version":"1.9","js":{"modules\/jquery_update\/replace\/jquery\/1.9\/jquery.min.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"modules\/nice_menus\/js\/jquery.bgiframe.js":1,"modules\/nice_menus\/js\/jquery.hoverIntent.js":1,"modules\/nice_menus\/js\/superfish.js":1,"modules\/nice_menus\/js\/nice_menus.js":1,"modules\/jquery_update\/replace\/ui\/external\/jquery.cookie.js":1,"modules\/jquery_update\/replace\/misc\/jquery.form.min.js":1,"misc\/ajax.js":1,"modules\/jquery_update\/js\/jquery_update.js":1,"modules\/toc_filter\/toc_filter.js":1,"sites\/all\/modules\/colorbox\/js\/colorbox.js":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.js":1,"sites\/all\/modules\/google_analytics\/googleanalytics.js":1,"0":1,"misc\/progress.js":1,"modules\/fivestar\/js\/fivestar.ajax.js":1,"modules\/fivestar\/js\/fivestar.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-1.10.2.min.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.js":1,"themes\/thecompany_responsive_theme\/js\/jquery-ui.min.js":1,"themes\/thecompany_responsive_theme\/js\/custom.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/toc_filter\/toc_filter.css":1,"modules\/user\/user.css":1,"modules\/views\/css\/views.css":1,"sites\/all\/modules\/colorbox\/styles\/default\/colorbox_style.css":1,"modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/geshifilter\/geshifilter.css":1,"modules\/panels\/css\/panels.css":1,"modules\/nice_menus\/css\/nice_menus.css":1,"modules\/nice_menus\/css\/nice_menus_default.css":1,"modules\/fivestar\/css\/fivestar.css":1,"themes\/thecompany_responsive_theme\/css\/style.css":1,"themes\/thecompany_responsive_theme\/css\/media.css":1}},"colorbox":{"opacity":"0.85","current":"{current} of {total}","previous":"\u00ab Prev","next":"Next \u00bb","close":"Close","maxWidth":"98%","maxHeight":"98%","fixed":true,"mobiledetect":true,"mobiledevicewidth":"480px","specificPagesDefaultValue":"admin*\nimagebrowser*\nimg_assist*\nimce*\nnode\/add\/*\nnode\/*\/edit\nprint\/*\nprintpdf\/*\nsystem\/ajax\nsystem\/ajax\/*"},"toc_filter_smooth_scroll_duration":"","googleanalytics":{"trackOutbound":1,"trackMailto":1,"trackDownload":1,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip","trackColorbox":1},"nice_menus_options":{"delay":"800","speed":"slow"},"ajax":{"edit-vote--2":{"callback":"fivestar_ajax_submit","event":"change","url":"\/system\/ajax","submit":{"_triggering_element_name":"vote"}}}});
//--><!]]>
</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','//connect.facebook.net/en_US/fbevents.js');
// Insert Your Facebook Pixel ID below.
fbq('init', '735235999992228');
fbq('track', 'PageView');
</script>
<!-- Insert Your Facebook Pixel ID below. -->
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=735235999992228&amp;ev=PageView&amp;noscript=1"
/></noscript>
<!-- End Facebook Pixel Code -->

</head>
<body class="html not-front not-logged-in no-sidebars page-node page-node- page-node-722 node-type-processmakerbpm">
    
<div class="wrap">

<div id="header_wrapper">
  <div id="inner_header_wrapper">

    <header id="header" role="banner">
      
      <div class="header_inner_wrapper">
        <div class="header_left">
                      <div id="logo">
              <a href="../index.html" title="Home"><img src="../sites/default/files/full-logo.png"/></a>
            </div>
                    	  <div class="menu_wrapper">
            <nav id="main-menu"  role="navigation">
              <a class="nav-toggle" href="722.html#">Navigation</a>
              <div class="menu-navigation-container">
                <ul class="menu"><li class="first leaf"><a href="../PM_Classic.html" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="leaf"><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="leaf"><a href="../3.1/user_guide.html">User Guide</a></li>
<li class="leaf"><a href="../3.1/developer_info.html">Developer Info</a></li>
<li class="leaf"><a href="../3.2/sys_administration.html">Sys Administration</a></li>
<li class="leaf"><a href="../3.1/resources.html">Helpful Resources</a></li>
<li class="leaf"><a href="../Sitemap.html">Sitemap</a></li>
<li class="last leaf"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>              </div>
              <div class="clear"></div>
            </nav>
          </div>
                  <!--  <h1 id="site-title">
            <a href="/" title="Home">Documentation@ProcessMaker</a>
            <div id="site-description"></div>
          </h1> -->
            
        </div>
      </div>
      <div class="header_right">
          <div class="region region-search">
  <div id="block-search-form" class="block block-search">

        <h2 >_</h2>
    
  <div class="content">
    <form action="722.html" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." placeholder="Search" type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-5KGMu2P7NlFo0EpmgUaslOPvRRK0fyKkyMApb1YP-ts" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
                  <h1 class="page-title">3.0 - 3.8 - Double Connection</h1>                <p class="page-title-suffix"></p>
                 <div style="margin-top: 5px;"></div>
      </div>
    </header>
    <div class="region-version">
      <span>Version: </span><ul><li><a  class="active-version">3.8</a></li><li><a  class="active-version">3.7</a></li><li><a  class="active-version">3.6</a></li><li><a  class="active-version">3.5</a></li><li><a  class="active-version">3.4</a></li><li><a  class="active-version">3.3</a></li><li><a  class="active-version">3.2</a></li><li><a  class="active-version">3.1</a></li><li><a  class="active-version">3.0</a></li><li><a href="../index.php/2.8/Double_Connection.html" class="">2.8</a></li></ul>    </div>
  </div>
</div>
<!-- <ul class="nice-menu nice-menu-down nice-menu-main-menu" id="nice-menu-0"><li class="menu-506 menu-path-node-1078 first odd "><a href="/PM_Classic" title="Learn how to develop business solutions in ProcessMaker Platform while maintaining your existing ProcessMaker 3 solutions in PM Classic: the perfect bridge between your new and existing solutions with a state-of--the-art BPM platform.">PM Classic</a></li>
<li class="menu-319 menu-path-processmakercom-tutorials  even "><a href="http://www.processmaker.com/tutorials" title="">Tutorials</a></li>
<li class="menu-320 menu-path-node-571  odd "><a href="/3.1/user_guide">User Guide</a></li>
<li class="menu-1138 menu-path-node-572  even "><a href="/3.1/developer_info">Developer Info</a></li>
<li class="menu-1197 menu-path-node-876  odd "><a href="/3.2/sys_administration">Sys Administration</a></li>
<li class="menu-1140 menu-path-node-236  even "><a href="/3.1/resources">Helpful Resources</a></li>
<li class="menu-1141 menu-path-node-554  odd "><a href="/Sitemap">Sitemap</a></li>
<li class="menu-1213 menu-path-sprocessmakergitbookio-processmaker-  even last"><a href="https://processmaker.gitbook.io/processmaker/" title="Read ProcessMaker Platform Spring 2023 documentation to learn more about the next generation of BPM.">ProcessMaker Platform</a></li>
</ul>
-->
  
  <div id="container">
    
    <div class="content-sidebar-wrap">

    <div id="content">

              <!-- <div id="breadcrumbs">
        <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="/">Home</a></div></div> -->
      
      <section id="post-content" role="main">
                                        <div class="region region-content">
  <div id="block-system-main" class="block block-system">

      
  <div class="content">
                          <span property="dc:title" content="3.0 - 3.8 - Double Connection" class="rdf-meta element-hidden"></span>  
      
    
  <div class="content node-processmakerbpm">
    <div class="field field-name-field-how-useful-did-you-find-th field-type-fivestar field-label-above"><div class="field-label">Please rate how useful you found this document:&nbsp;</div><div class="field-items"><div class="field-item even"><form class="fivestar-widget" action="722.html" method="post" id="fivestar-custom-widget" accept-charset="UTF-8"><div><div  class="clearfix fivestar-average-text fivestar-average-stars fivestar-form-item fivestar-default"><div class="form-item form-type-fivestar form-item-vote">
 <div class="form-item form-type-select form-item-vote">
 <select id="edit-vote--2" name="vote" class="form-select"><option value="-">Select rating</option><option value="20">Give 3.0 - 3.8 - Double Connection 1/5</option><option value="40">Give 3.0 - 3.8 - Double Connection 2/5</option><option value="60" selected="selected">Give 3.0 - 3.8 - Double Connection 3/5</option><option value="80">Give 3.0 - 3.8 - Double Connection 4/5</option><option value="100">Give 3.0 - 3.8 - Double Connection 5/5</option></select>
<div class="description"><div class="fivestar-summary fivestar-summary-average-count"><span class="average-rating">Average: <span >3</span></span> <span class="total-votes">(<span >2</span> votes)</span></div></div>
</div>

</div>
</div><input class="fivestar-submit form-submit" type="submit" id="edit-fivestar-submit" name="op" value="Rate" /><input type="hidden" name="form_build_id" value="form-rdme2T7Mc8cPMgruSq7AGjkbUgRIoVEz7Ku5ErPhiEw" />
<input type="hidden" name="form_id" value="fivestar_custom_widget" />
</div></form></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float: right; margin-left: 5px; background-color: #f9f9f9; border: 1px solid #aaaaaa; padding: 5px;"><center><strong>Contents:</strong> [<a href="722.html#" onclick="var el = document.getElementById('toc');
        var txt = ('innerText' in el)? 'innerText' : 'textContent';
        if (el.style.display=='none') { 
           el.style.display = '';
           document.getElementById('hideLabel')[txt] = 'hide';
        }
        else {
	        el.style.display = 'none';
           document.getElementById('hideLabel')[txt] = 'show';
        }"><span id="hideLabel">hide</span></a>]</b></center><div id="toc" ><ol class="toc">
<li class="toc"><a href="722.html#Overview">Overview</a></li>
<li class="toc"><a href="722.html#Requirements">Requirements</a></li>
<li class="toc"><a href="722.html#Installation">Installation</a></li>
<li class="toc"><a href="722.html#How_the_Feature_Works">How the Feature Works </a></li>
<li class="toc"><a href="722.html#Master_Slave_and_Binary_Logs">Master, Slave and Binary Logs</a></li>
<li class="toc"><a href="722.html#MySQL_Replication">MySQL Replication</a></li>
<ol class="toc">
<li class="toc"><a href="722.html#Configuring_the_Master_Database">Configuring the Master Database</a></li>
<li class="toc"><a href="722.html#Copying_the_Master_Database">Copying the Master Database(s)</a></li>
<li class="toc"><a href="722.html#Configuring_the_Slave_Database">Configuring the Slave Database</a></li>
</ol>
<li class="toc"><a href="722.html#Configuring_the_Double_Connection_in_the_ProcessMaker_Code">Configuring the Double Connection in the ProcessMaker Code</a></li>
<ol class="toc">
<li class="toc"><a href="722.html#Testing_the_Double_Connection">Testing the Double Connection</a></li>
</ol>
<li class="toc"><a href="722.html#Possible_Problems">Possible Problems</a></li>
<ol class="toc">
<li class="toc"><a href="722.html#Slave_SQL_Running_No">Slave_SQL_Running: No</a></li>
<li class="toc"><a href="722.html#Slave_IO_State_Connecting_to_master">Slave_IO_State: Connecting to master</a></li>
</ol>
</div></div>

<h2><span id="Overview">Overview</span></h2>

<p>When working with large databases, many different users or just for security issues, system administrators often prefer to work with more than one database. This type of database management helps improve system performance when working with a large number of transactions in a short time frame, or with environments located great distances from one another. It also better manages data security and integrity, making it possible to secure data that not everyone should have access to.</p>
<p>ProcessMaker uses <a href="http://www.mysql.com/">MySQL</a> as its principal database program to store ProcessMaker's <tt>wf_&lt;WORKSPACE&gt;</tt> database. MySQL offers <a href="https://dev.mysql.com/doc/refman/5.7/en/replication.html">replication</a> between master and slave databases.</p>

<h2><span id="Requirements">Requirements</span></h2>
<p>Before setting up a double connection in ProcessMaker, take into account the following requirements:</p>
<p>
<ul>
    <li>Both master and slave database must use MySQL.</li>
    <li>Static IP must be configured on the master and slave server.</li>
    <li>The user must have the permissions to create non-root users in both servers.</li>
    <li>If ProcessMaker 3.0 or later was installed in a clean environment, ProcessMaker will only use one database: <tt>wf_&lt;WORKSPACE&gt;</tt>.</li>
    <li>If ProcessMaker was upgraded from a version before 2.8, ProcessMaker will use three databases: <tt>wf_&lt;WORKSPACE&gt;</tt>, <tt>rb_&lt;WORKSPACE&gt;</tt> and <tt>rp_&lt;WORKSPACE&gt;</tt>.</li>
    </ul>
</li>
</ul>

<h2><span id="Installation">Installation</span></h2>

<p>ProcessMaker Enterprise version 3.2 automatically includes the Double Connection feature after the Enterprise license is activated. To check whether the Double Connection feature is available, log into ProcessMaker as a user, such as "admin", with the <a href="../3.1/Roles.html#PM_SETUP_ADVANCE">PM_SETUP_ADVANCE</a> permission in their <a href="../3.1/Roles.html">role</a>. Then, go to <strong>Admin &gt; Plugins &gt; Enterprise Manager</strong> and click on the <strong>Enterprise Features</strong> tab to see the list of available features.</p>

<p><img src="../sites/default/files/3.0EnterpriseFeatureDoubleConnectionView.png"></p>

<h2><span id="How_the_Feature_Works">How the Feature Works </span></h2>

<p>ProcessMaker takes advantage of MySQL replication to offer the Double Connection feature that allows ProcessMaker to manage two database connections. These connections can be made to two different servers where the databases are installed. It also has a data access layer that identifies, separates and/or redirects queries to one of the two connections and inserts and updates to the other connection.</p>

<h2><span id="Master_Slave_and_Binary_Logs">Master, Slave and Binary Logs</span></h2>
<p></p>

<table>
    <tr>
        <th>Concept</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Master</td>
        <td>The master database is the database that ProcessMaker uses. Master MySQL servers write all transactions
            that change data to a binary log that the slave server will read.</td>
    </tr>
    <tr>
        <td>Slave</td>
        <td>The slave database is a replication of the master database that only has read access to the master database.
            Slave MySQL servers connect to a master and download the transactions from the master's binary log,
            thereby applying them to its own local server.</td>
    </tr>
    <tr>
        <td>Binary Logs</td>
        <td>Binary logs are binary files that contain details about every transaction that the MySQL server has executed.
            The MySQL master creates binary logs in the forms name.000001, name.000002, and so on. Once a binary
            log reaches a defined size, it starts a new one. After a certain period of time, MySQL removes old
            logs.
        </td>
    </tr>
</table>

<h2><span id="MySQL_Replication">MySQL Replication</span></h2>
<p>To set up MySQL replication with a master and slave databases, first install MySQL on a second server that will contain the slave database. Then, follow these instructions to set up the replication. In this example, the master and slave have the following characteristics:</p>
<p><table>
    <tr>
<th>Server</th>
<th>Host</th>
</tr>
<tr>
    <td>Master</td>
    <td>192.168.75.1</td>
</tr>
<tr>
    <td>Slave</td>
    <td>192.168.75.136</td>

</tr>

</table>
</p>

<h3><span id="Configuring_the_Master_Database">Configuring the Master Database</span></h3>

<p>The master database is the one that was installed as a requirement for installing ProcessMaker and is currently used by ProcessMaker.</p>

<p>Go to the master server and edit the MySQL configuration file named <strong><tt>my.cnf</tt></strong>, whose <a href="../3.0/Additional_Configuration.html#Configuring_MySQL" title="3.0/Additional Configuration">location depends on your operating system</a>.</p>

<p>Set the following settings:</p>

<codeblock>[mysqld]
server-id = <b>1</b>
log_bin = <b>mysql-bin</b>
sync_binlog  = <b>1</b>
max-binlog-size = <b>500M</b>
expire_logs_days = <b>4</b>
innodb_flush_log_at_trx_commit  = <b>1</b>
binlog_do_db = <b>wf_workflow</b>
binlog_format = <b>ROW</b>
</codeblock>

<p>Where:</p>
<p><ul>
    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_server_id">server-id</a>:</b> Set a unique integer. This value must be different from the server-id of the slave database. In this example, the master has an ID of <strong><tt>1</tt></strong> and the slave has an ID of <strong><tt>2</tt></strong>.</li>

    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#option_mysqld_log-bin">log-bin</a>:</b> Set the name of the binary file that will hold a log of the changes made in the master database. The slave database will replicate any change recorded in this binary log file. If unsure where to place the file, just set it to <tt>mysql-bin</tt> and MySQL will place it in its default log directory.</li>

    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_sync_binlog">sync_binlog</a>:</b> This value determines how many binary log writes need to occur before its contents are flushed out of the buffer and onto disk. Per recommendations in high performance MySQL, the sync_binlog value must be set to 1 in Production.
</li>
    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_max_binlog_size">max-binlog-size</a>:</b> Set the maximum size of the binary log to "500MB". If the binary log exceeds this size after a write, the server rotates it by closing it and opening a new binary log. If not set, the default value is 1GB.</li>

    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_expire_logs_days">expire_logs_days</a>:</b> Number of days after which the binary log will be automatically removed. The default is 0, which means no automatic removal. When using replication, expire_log_days should always be set higher than the maximum lag by any slave.</li>

<li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit">innodb_flush_log_at_trx_commit</a>:</b> Set to 1. When the value is 1 (the default), the log buffer is written out to the log file at each transaction commit and the flush to disk operation is performed on the log file.</li>

    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#option_mysqld_binlog-do-db">binlog_do_db</a>:</b> Set to the name of the workflow database that will be replicated in the slave server, which is named <strong><tt>wf_workflow</tt></strong> by default. If processmaker 2.8 was upgraded from a previous version, then list both the <tt>wf_&lt;WORKSPACE&gt;</tt> and <tt>rb_&lt;WORKSPACE&gt;</tt> databases.
<p>
<codeblock>binlog_do_db = wf_workflow
binlog_do_db = rb_workflow
</codeblock></p>

</li>
<li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_binlog_format">binlog_format</a>:</b> Set to "ROW" to help avoid errors.
</li>
</ul>
</p>

<p>After saving the changes to the <tt>my.cnf</tt> file, <a href="../3.0/Additional_Configuration.html#Restarting_MySQL" title="3.0/Additional Configuration">restart the MySQL server</a> for the changes to take effect. On most Linux/UNIX systems it can be restarted with the command:</p>

<codeblock>service mysqld restart
</codeblock>

<p>Then, enter MySQL as the root user:</p>

<codeblock>mysql -u root -p
</codeblock>

<p>In Windows, it is necessary to navigate through the file system to the directory where the <tt>mysql.exe</tt> executable is located:</p>

<p><strong>Windows Vista/7/8/Server 2008:</strong></p>
<div style="margin-left:25px">
    <codeblock>cd C:\User\<font color="blue">USERNAME</font>\AppData\Roaming\ProcessMaker-3_X_X\mysql\bin
mysql -u root -p
</codeblock>
</div>

<p>The slave needs a user to connect to the master using a MySQL user name and password, so create a user account on the master that the slave can use to connect.</p>

<codeblock>mysql> CREATE USER '<font color="blue">slave</font>'@'<font color="blue">192.168.75.136</font>' IDENTIFIED BY 'slavepass';
</codeblock>

<p>The slave that connects to the master in a replication setup (for the purpose of reading the binary log on the master) must have an account to log in. This account must be granted the dedicated permission <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-howto-repuser.html"><tt>REPLICATION SLAVE</tt>.</a> </p>

<codeblock>mysql> GRANT REPLICATION SLAVE ON *.* TO <font color="blue">'slave'</font>@<font color="blue">'192.168.75.136'</font> IDENTIFIED BY <font color="blue">'slavepass'</font>;
</codeblock>

<p>To check if the correct privileges where assigned to this new user named "slave", write the following command.</p>

<codeblock>mysql> <b>SHOW GRANTS FOR <font color=blue>slave</font>@<font color=blue>192.168.75.136</font></b>;

+-------------------------------------------------------------+
| Grants for slave@192.168.75.136                             |
+-------------------------------------------------------------+
| GRANT REPLICATION SLAVE ON *.* TO 'slave'@'192.168.75.136'  |
+-------------------------------------------------------------+
1 row in set (0,00 sec)
</codeblock>

<p>Then, issue the following command to display information about the master database:</p>

<codeblock>mysql> <b>SHOW MASTER STATUS;</b>
+------------------+----------+----------------+------------------+-------------------+
| File             | Position | Binlog_Do_DB   | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------------+----------+----------------+------------------+-------------------+
| mysql-bin.000007 |      637 | wf_workflow    |                  |                   |
+------------------+----------+----------------+------------------+-------------------+
1 row in set (0,00 sec)
</codeblock>

<p>Take note of the values in the <b>File</b> (mysql-bin.000007) and <b>Position</b> (637) columns, since these values will be used later to configure the slave database.</p>

<p>Finally, exit MySQL but do not close the terminal.</p>

<codeblock>mysql> QUIT;
</codeblock>

<h3><span id="Copying_the_Master_Database">Copying the Master Database(s)</span></h3>

<p>Enter the following command to make a copy of the database to be replicated. Change <tt><strong>wf_workflow</strong></tt> to the name of the <tt>wf_&lt;WORKSPACE&gt;</tt> database to be replicated. In this example the "wf_workflow" will be copied to the "pm-db.sql" file.</p>

<codeblock>mysqldump -u root -p --master-data=2 --flush-privileges <font color="blue">wf_workflow</font> > <font color="blue">pm-db.sql</font>
</codeblock>

<p>If ProcessMaker was upgraded from version 2.5 or earlier, then make a copy of both the <tt>wf_&lt;WORKSPACE&gt;</tt> and <tt>rb_&lt;WORKSPACE&gt;</tt> databases. </p>

<p>Then copy the pm-db.sql file from the master server to the slave server. For example, if using <strong><tt>scp</tt></strong> to copy the file:</p>

<codeblock>scp <font color="blue">pm-db.sql user</font>@<font color="blue">192.168.75.136</font>:~
</codeblock>

<h3><span id="Configuring_the_Slave_Database">Configuring the Slave Database</span></h3>

<p>Go to the server where the slave database will be located. If not already installed, install MySQL on the server. Enter MySQL and create the ProcessMaker database in the slave:
<codeblock>mysql -u root -p

Enter Password:

mysql> create database <font color="blue">wf_workflow</font>;
</codeblock>

<p>Exit MySQL but do not close the terminal.</p>
<codeblock>mysql> EXIT;</codeblock>

<p>The database that was created will contain the data that was saved in the <strong><tt>pm-db.sql</tt></strong> file, so run the following command:</p>

<codeblock>mysql -u root -p <font color="blue">wf_workflow</font> < <font color="blue">pm-db.sql</font>
</codeblock>

<p>If using Windows, remember to change the the directory containing the mysql.exe executable before issuing the above command and include the path to the <strong><tt>pm-db.sql</tt></strong> file.</p>

<p>Then, open the <tt>my.cnf</tt> file on the slave server with a plain text editor to set the following settings:</p>

<codeblock>[mysqld]
server-id = <b>2</b>
relay-log = <b>mysql-relay-bin.log</b>
max-relay-log-size = <b>500M</b>
relay_log_purge = <b>1</b>
binlog_do_db = <b>wf_workflow</b>
binlog_format = <b>ROW</b>
</codeblock>

<p>Where:</p>
<p>
<ul>
    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options.html#option_mysqld_server-id">server-id</a>:</b> Set an integer that is different from the master ID. The master's server-id is 1, so the slave will be set to <b>2</b>.</li>
    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/slave-logs-relaylog.html">relay-log</a>:</b> Set to "mysql-relay-bin.log". This is the basename of the relay log. The relay log is a set of numbered files containing events that describe database changes. If not set, the basename will be <tt>hostname-relay-bin</tt>, where <i>host_name</i> is the name of the slave server host.</li>

    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_relay_log_size">max-relay-log-size</a>:</b> Set to 500MB to limit the size of the relay log. The slave will rotate its relay log if it exceeds this size after a write.</li>
    <li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_relay_log_purge">relay_log_purge</a>:</b> Set to 1. If set to 1, relay logs will be purged as soon as they are no longer necessary.</li>
    <li>
<p><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#option_mysqld_binlog-do-db">binlog_do_db</a>:</b> Set the the name of the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database being replicated, which is named <tt>wf_workflow</tt> by default. If processmaker was upgraded from version 2.5 or earlier, then also add the name of the <strong><tt>rb_&lt;WORKSPACE&gt;</tt></strong> database:</p>

<codeblock>binlog_do_db = wf_workflow
binlog_do_db = rb_workflow
</codeblock>

</li>
<li><b><a href="https://dev.mysql.com/doc/refman/5.7/en/replication-options-binary-log.html#sysvar_binlog_format">binlog_format</a>:</b> Set to "ROW" to help avoid errors.</li>
</ul>
</p>

<p>Save the changes and <a href="../3.0/Additional_Configuration.html#Restarting_MySQL" title="3.0/Additional Configuration">restart the MySQL server</a> for the new changes to take effect.</p>

<p>After restarting MySQL, log in as the root user. If using Windows, remember to first change to the directory where the mysql.exe executable is located.</p>

<codeblock>mysql -u root -p
</codeblock>

<p>Configure the slave database to be able to connect to the master database.</p>

<codeblock>mysql> CHANGE MASTER TO MASTER_HOST='<font color="blue">192.168.75.1</font>', MASTER_USER='<font color="blue">slave</font>', MASTER_PASSWORD='<font color="blue">slavepass</font>', MASTER_LOG_FILE='<font color="blue">mysql-bin.000003</font>', MASTER_LOG_POS=<font color="blue">1011</font>;
</codeblock>

<p>Where:</p>
<ul>
    <li><b>MASTER_HOST:</b> Set the IP or address of the master server.</li>
    <li><b>MASTER_USER:</b> Set the user name of the new user that was created in the master database. In this example, the user name is "slave."</li>
    <li><b>MASTER_PASSWORD:</b> Set the password of the new user that was created in the master database. In this example, the user named "slave" was created with the password "slavepass".</li>
    <li><b>MASTER_LOG_FILE:</b> Set the log file and log position that were previously displayed with the <tt>SHOW MASTER STATUS</tt> command in the master database.</li>
    <li><b>MASTER_LOG_POS:</b> Set the log position that was previously displayed with the <tt>SHOW MASTER STATUS</tt> command in the master database.</li>
</ul>

<p>Finally, start the slave database replication with the following command:</p>

<codeblock>mysql> START SLAVE;
</codeblock>

<p>Check to see whether the slave database is able to connect to the master database:</p>

<codeblock>mysql> show slave status\G
*************************** 1. row ***************************
               Slave_IO_State: <b>Waiting for master to send event</b>
                  Master_Host: <b>192.168.75.1</b>
                  Master_User: <b>slave</b>
                  Master_Port: <b>3306</b>
                Connect_Retry: 60
              Master_Log_File: <b>mysql-bin.000007</b>
          Read_Master_Log_Pos: <b>637</b>
               Relay_Log_File: mysqld-relay-bin.000002
                Relay_Log_Pos: 320
        Relay_Master_Log_File: mysql-bin.000009
             Slave_IO_Running: <b>Yes</b>
            Slave_SQL_Running: <b>Yes</b>
              Replicate_Do_DB:
          Replicate_Ignore_DB:
           Replicate_Do_Table:
       Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                   Last_Errno: 0
                   Last_Error:
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 154
              Relay_Log_Space: 528
              Until_Condition: None
               Until_Log_File:
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File:
           Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
               Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
               Last_SQL_Errno: 0
               Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
             Master_Server_Id: 1
                  Master_UUID: f572b5f9-ecb0-11e6-b28c-bc5ff43ed9be
             Master_Info_File: /var/lib/mysql/master.info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: <b>Slave has read all relay log; waiting for more updates</b>
           Master_Retry_Count: 86400
                  Master_Bind:
      Last_IO_Error_Timestamp:
     Last_SQL_Error_Timestamp:
               Master_SSL_Crl:
           Master_SSL_Crlpath:
           Retrieved_Gtid_Set:
            Executed_Gtid_Set:
                Auto_Position: 0
         Replicate_Rewrite_DB:
                 Channel_Name:
           Master_TLS_Version:

1 row in set (0.00 sec)
</codeblock>

<p>If the database replication is set up correctly, both the <tt>Slave_IO_Running</tt> and <tt>Slave_SQL_Running</tt> parameters will be set to <strong><tt>Yes</tt></strong> and <tt>Slave_IO_State</tt> will be set to <b>Waiting for master to send event</b>.</p>

<p>If <tt>Slave_IO_Running</tt> or <tt>Slave_SQL_Running</tt> is set to <strong>No</strong>, check the <a href="722.html#Possible_Problems">Possible Problems</a> section for more details.</p>

<p>Finally, create a user for the master server to access the slave database.</p>

<codeblock>mysql> CREATE USER '<font color="blue">master</font>'@'<font color="blue">192.168.75.1</font>' IDENTIFIED BY '<font color="blue">masterpass</font>';</codeblock>

<p>Grant the master user the privileges necessary to manage the databases replicated.</p>

<codeblock>mysql> GRANT ALL PRIVILEGES ON <font color="blue">wf_workflow</font>.* To '<font color="blue">master</font>'@'<font color="blue">192.168.75.1</font>' IDENTIFIED BY '<font color="blue">masterpass</font>';
</codeblock>

<p>Check the privileges of the new master user with the following command:</p>

<codeblock>mysql> SHOW GRANTS FOR <font color="blue">master</font>@<font color="blue">192.168.75.1</font>;

+-----------------------------------------------------------------------+
| Grants for master@192.168.75.1                                        |
+-----------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'master'@'192.168.75.1'                         |
| GRANT ALL PRIVILEGES ON `wf_workflow`.* TO 'master'@'192.168.75.1'    |
+-----------------------------------------------------------------------+
2 rows in set (0.00 sec)
</codeblock>

<h2><span id="Configuring_the_Double_Connection_in_the_ProcessMaker_Code">Configuring the Double Connection in the ProcessMaker Code</span></h2>

<p>After setting up MySQL replication of master and slave databases, the code of ProcessMaker needs to be changed to read from the slave database.</p>

<p>Go to the <a href="../index.php/File_Locations.html#Installation_Directory" title="File Locations">directory where ProcessMaker is installed</a> and edit the configuration file <strong><tt>database.php</tt></strong> with a plain text editor:</p>
<div style="margin-left: 25px;">
    <tt><a href="../3.0/File_Locations.html#Installation_Directory" title="File Locations">&lt;install-directory&gt;</a>/procesmaker/workflow/engine/config/databases.php
</tt>
</div>

<p><b>Linux:</b><br>
<div style="margin-left: 25px;"><tt>/opt/processmaker/workflow/engine/config/databases.php</tt></div>
</p>

<p><b>Windows:</b><br>
<div style="margin-left: 25px;"><tt>C:\Users\User\AppData\Roaming\ProcessMaker-3_x\processmaker\workflow\engine\config\databases.php</tt></div>
</p>

<p>In the <strong><tt>database.php</tt></strong> file, add the following lines at the end of the script before the <tt>return $pro;</tt> statement:</p>
<ul>
    <li><p>If ProcessMaker 3.x was installed from scratch, only one database will be created, the <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database:</p>


<codeblock>if (defined('SYS_SYS') && SYS_SYS == '<font color="blue">WORKSPACE-NAME</font>') {
    $pro ['datasources']['workflow_ro']['connection'] = 'mysql://<font color="blue">MYSQL-USER</font>:<font color="blue">PASSWORD</font>@<font color="blue">SLAVE-SERVER-ADDRESS</font>:<font color="blue">PORT</font>/
    <font color="blue">SLAVE-DATABASE-NAME</font>?encoding=utf8';
    $pro ['datasources']['workflow_ro']['adapter']    = 'mysql';
}

return $pro;
</codeblock>
<p>Where:</p>
<p><ul>
    <li><b>WORKSPACE-NAME:</b> Replace this parameter with the name of the workspace, which is <tt>'workflow'</tt> by default.</li>
    <li><b>MYSQL-USER:</b> Replace this parameter with the user that was created for the master in the slave server.  This user can be <tt>root</tt>, but for greater security it is recommended to create
        a new MySQL user on the slave server for this purpose. In this example, the user created is "master".</li>

    <li><b>PASSWORD:</b> Replace this parameter with the password of the master user created in the slave server. In the previous step, the master user has the password "masterpass".
        If no password is set for the MySQL user, set the string as: ' '.</li>

    <li><b>SLAVE-SERVER-ADDRESS:</b> Specify the IP address or domain name of the server where the
        slave database is installed.</li>

    <li><b>PORT:</b> Specify the number of the port where the slave database is installed. If using
        the default MySQL port <tt>3306</tt>, it is not a required parameter and the string will look like:

    <codeblock>mysql://<font color="blue">MYSQL-USER</font>:<font color="blue">PASSWORD</font>@<font color="blue">SLAVE-SERVER-ADDRESS</font>/
    <font color="blue">SLAVE-DATABASE-NAME</font>?encoding=utf8</codeblock>
</li>

    <li><b>SLAVE-DATABASE-NAME:</b> Name of the slave database where ProcessMaker was replicated.</li>
</ul>
</li>

<li><p>If ProcessMaker was upgraded from version 2.5 or earlier, the <strong><tt>rbac</tt></strong> database must
        also be replicated and added to the configuration:</p>
<codeblock>if (defined('SYS_SYS') && SYS_SYS == '<font color="blue">WORKSPACE-NAME</font>') {
    $pro ['datasources']['workflow_ro']['connection'] = 'mysql://<font color="blue">MYSQL-USER:PASSWORD</font>@<font color="blue">SLAVE-SERVER-ADDRESS</font>:<font color="blue">PORT</font>/<font color="blue"><b>wf_workflow</b></font>?encoding=utf8';
    $pro ['datasources']['workflow_ro']['adapter'] = 'mysql';

    $pro ['datasources']['rbac_ro']['connection'] = 'mysql://<font color="blue">MYSQL-USER</font>:<font color="blue">PASSWORD</font>@<font color="blue">SLAVE-SERVER-ADDRESS</font>:<font color="blue">PORT</font>/<font color="blue"><b>rb_workflow</b></font>?encoding=utf8';
    $pro ['datasources']['rbac_ro']['adapter'] = 'mysql';
}

return $pro;
</codeblock>
</li>
</ul>

<p>The condition is added for each workspace that will use a second connection for read-only queries.</p>

<p><b><u>Example</u></b></p>
<p>For a clean installation of ProcessMaker 3.0, only the wf_workflow database needs to be replicated. To do this, add the following code:</p>

<p><img alt="" src="../sites/default/files/3.2ReplicatedDatabaseConfig.png"></p>

<p>Save it and the workspace "workflow" will work from now on with two database connections.</p>

<h3><span id="Testing_the_Double_Connection">Testing the Double Connection</span></h3>

<p>After setting up the MySQL replication and configuring the ProcessMaker code to use the slave database, test to see whether the replication works. Log in to ProcessMaker and execute any action.</p>

<p>Opening the case list requires reading from the slave database, so if there is a problem connecting to the slave database, the following error message will be displayed:</p>

<p><img alt="" height="120" src="../sites/default/files/ErrorConnnectingToSlaveDatabaseMessage.png" width="589"></p>

<p>To check whether the database is replicating, add a new user to ProcessMaker, then log in to the slave database from the command line:</p>

<codeblock>mysql -u root -p
</codeblock>

<p>Query the slave database for the new user that was just added:</p>

<codeblock>mysql> <b>SELECT USR_USERNAME FROM wf_workflow.USERS</b>;
+--------------+
| USR_USERNAME |
+--------------+
| admin        |
| alex         |
| travis       |
| james        |
+--------------+
4 rows in set (0.00 sec)
</codeblock>

<p>If not using the default <tt><strong>wf_workflow</strong></tt> database, change the database name in the code to the name of your <strong><tt>wf_&lt;WORKSPACE&gt;</tt></strong> database. If the database replication is working correctly, the username of the new user will be listed.</p>

<h2><span id="Possible_Problems">Possible Problems</span></h2>

<h3><span id="Slave_SQL_Running_No">Slave_SQL_Running: No</span></h3>
<p>If the slave was running previously but has stopped, the reason usually is that some statement that succeeded on the master failed on the slave.
To check the status of the slave, first log in to the mysql instance and run the following command:
 </p>

<codeblock>mysql -u root -p
Enter password:

mysql> <b>SHOW SLAVE STATUS \G</b>
</codeblock>

<p>Press enter, and the terminal will show the following message:</p>

<codeblock> mysql> SHOW SLAVE STATUS \G
*************************** 1. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 192.168.75.1
                  Master_User: slave
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000007
          Read_Master_Log_Pos: 99493
               Relay_Log_File: mysqld-relay-bin.000011
                Relay_Log_Pos: 87093
        Relay_Master_Log_File: mysql-bin.000005
             Slave_IO_Running: Yes
            Slave_SQL_Running: <b>No</b>
              Replicate_Do_DB:
          Replicate_Ignore_DB:
           Replicate_Do_Table:
       Replicate_Ignore_Table:
      Replicate_Wild_Do_Table:
  Replicate_Wild_Ignore_Table:
                   Last_Errno: 0
                   Last_Error:
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 99493
              Relay_Log_Space: 87301
              Until_Condition: None
               Until_Log_File:
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File:
           Master_SSL_CA_Path:
              Master_SSL_Cert:
            Master_SSL_Cipher:
               Master_SSL_Key:
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error:
               Last_SQL_Errno: 0
               Last_SQL_Error:
  Replicate_Ignore_Server_Ids:
             Master_Server_Id: 1
                  Master_UUID: f572b5f9-ecb0-11e6-b28c-bc5ff43ed9be
             Master_Info_File: /var/lib/mysql/master.info
                    SQL_Delay: 0
          SQL_Remaining_Delay: NULL
      Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates
           Master_Retry_Count: 86400
                  Master_Bind:
      Last_IO_Error_Timestamp:
     Last_SQL_Error_Timestamp:
               Master_SSL_Crl:
           Master_SSL_Crlpath:
           Retrieved_Gtid_Set:
            Executed_Gtid_Set:
                Auto_Position: 0
         Replicate_Rewrite_DB:
                 Channel_Name:
           Master_TLS_Version:
1 row in set (0,00 sec)

</codeblock>

<p>If either <tt>Slave_IO_Running</tt> or <tt>Slave_SQL_Running</tt> is set to <b>No</b>, then the replication is broken and needs to be repaired.</p>

<p>To repair it, first stop the slave service with the following commands:</p>
<codeblock>mysql> STOP SLAVE;
</codeblock>

<p>Then run the following code so the slave skips the invalid SQL query that caused the replication to stop. To skip two queries, set <code>SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 2;</code> and so on.</p>
<codeblock>mysql> SET GLOBAL SQL_SLAVE_SKIP_COUNTER = 1;
</codeblock>

<p>Now, start the slave again.</p>
<codeblock>mysql> START SLAVE;</codeblock>

<p>And check if replication is working again.</p>
<codeblock>mysql> SHOW SLAVE STATUS \G</codeblock>

<h3><span id="Slave_IO_State_Connecting_to_master">Slave_IO_State: Connecting to master</span></h3>

<p>If the slave cannot connect to the master, then  <strong>Slave_IO_State</strong> will be <tt>Connecting to master</tt>.</p>

<codeblock>Slave_IO_Running: Connecting to master
               ...
               Last_IO_Errno: 2003
               Last_IO_Error: error reconnecting to master 'root@192.168.75.1:3306' - retry-time: 60  retries: 86400
</codeblock>

<p>In this case, check some of these alternatives:</p>
<p>
<ul>
<li>
<p>Check the value of <strong>Master_Host, Master_User, Master_Port, Master_Log_File</strong> and <strong>Read_Master_Log_Pos</strong> to verify that they are correct. If they need to be changed, then stop the database replication:</p>

<codeblock>mysql> STOP SLAVE;</codeblock>

<p>And issue the CHANGE MASTER command again.</p>

<codeblock>mysql> CHANGE MASTER TO MASTER_HOST='<font color="blue">192.168.75.1</font>', MASTER_USER='<font color="blue">slave</font>', MASTER_PASSWORD='<font color="blue">slavepass</font>', MASTER_LOG_FILE='<font color="blue">mysql-bin.000007</font>', MASTER_LOG_POS=<font color="blue">637</font>;
</codeblock>

<p>Then restart the slave replication:</p>
<codeblock>mysql> START SLAVE;</codeblock>
</li>

<li>
<p>Try to connect to the master database from the command line of the slave server:</p>

<codeblock>mysql -u slave -h 192.168.75.1 -p
</codeblock>

<p>If able to connect as the root user, but not as the slave user, then the <tt>GRANT</tt> commands weren't issued correctly in the master database. To check if the correct privileges were assigned to this new user, write the following command:</p>
<codeblock>mysql> <b>SHOW GRANTS FOR slave@192.168.75.136</b>;

+-------------------------------------------------------------+
| Grants for slave@192.168.75.136                             |
+-------------------------------------------------------------+
| GRANT REPLICATION SLAVE ON *.* TO 'slave'@'192.168.75.136'  |
+-------------------------------------------------------------+
1 row in set (0,00 sec)
</codeblock>

<p>If neither the root and slave users are able to connect to the master server, check if the following lines are commented out from the my.cnf file configuration and the master server is  listening on all IP addresses.</p>

<codeblock># skip-networking
# bind-address = 127.0.0.1
</codeblock>
</li>

<li>
<p>Check whether MySQL on the master server is running and whether a firewall might be blocking its port. To check the port, use a command such as <tt>netstat</tt> to check whether the master server is listening on its MySQL port, which is 3306 by default, and whether it has established a connection with the slave server:</p>

<div class="geshifilter"><div class="text geshifilter-text" style="font-family:monospace;"># netstat -an | grep 3306<br />
tcp &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 192.168.75.1:3306 &nbsp; &nbsp; &nbsp; 0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN<br />
tcp &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 192.168.75.1:3306 &nbsp; &nbsp; &nbsp; 192.168.0.97:51941 &nbsp; &nbsp; &nbsp;ESTABLISHED</div></div>
<p>If the MySQL port is blocked by the firewall, unblock it. For example, if using IP Tables on a Linux/UNIX server, it can be unblocked with the following command:</p>

<codeblock># iptables -A INPUT -i eth0 -p tcp --destination-port 3306 -j ACCEPT
</codeblock>
</li>
</ul>
</div></div></div>  </div>

      <footer>
          </footer>
  
    </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
      </section>
    </div>
  
      
    </div>

      
</div>

 <!---add diego--->
  <div id="download-app-section" class="download-app mobile-none">
			<div class="row">
				<div class="col-md-12">
					<div class="text_app">Download our app</div>
							<a href="https://itunes.apple.com/us/app/processmaker/id992576284?ls=1&mt=8" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/appstore.png">
							<a href="https://play.google.com/store/apps/details?id=com.colosa.processmaker" target="_blank">
								<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/playstore.png">				
				</div>
			</div>
  </div>
  <!---end diego--->
<!----add diego----->    
		<div class="logo_processmaker"><a href="http://www.processmaker.com">
		<img src="https://wiki.processmaker.com/themes/thecompany_responsive_theme/images/logo_processmaker.png"></div>
<!----end diego----->
<div id="footer">
  <div id="footer_wrapper">
      </div>

  <div class="social-media-wrapper">
         <div id="social-media-icons">
       <ul>
       	<div class="text_contact">Contact us</div>
				<div class="text_number">+1-617-340-3377</div>
        <!--<li><a class="rss" href="/rss.xml">rss</a></li> <!--edit diego-->
        <li><a class="facebook" href="http://facebook.com/processmaker/" target="_blank" rel="me">facebook</a></li>
        <li><a class="twitter" href="https://twitter.com/processmaker" target="_blank" rel="me">twitter</a></li>
        <li><a class="gplus" href="https://www.google.com/+ProcessMakerOpenSource" target="_blank" rel="me">Gplus</a></li>
        <li><a class="linkedin" href="https://www.linkedin.com/groups?mostRecent=&gid=3970335&trk=my_groups-tile-flipgrp" target="_blank" rel="me">Linked in</a></li>
        <!--<li><a class="dribbble" href="http://dribbble.com" target="_blank" rel="me">Dribbble</a></li>
        <li><a class="vimeo" href="http://vimeo.com" target="_blank" rel="me">Vimeo</a></li>-->
        <li><a class="youtube" href="https://www.youtube.com/user/processmaker" target="_blank" rel="me">Youtube</a></li>
       </ul>
      </div>
      </div>
  
  <div class="footer_credit">
    <div class="footer_inner_credit">
           <div id="foot"><div class="region region-footer">
  <div id="block-block-2" class="block block-block">

      
  <div class="content">
    <p><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF">Automate your Workflow with Business Process Management<br>Software licensed under the <a 1px="" class="external text" href="http://www.gnu.org/licenses/agpl.html" rel="nofollow" style="padding-right: 13px; color:white;">GNU Affero General Public License version 3</a><br>Contact us:&nbsp;<a class="external free" href="mailto:community@processmaker.com" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">community@processmaker.com</a><br><a class="external free" href="https://www.processmaker.com/privacy-statement" rel="nofollow" style="font-weight:bold;color:white;text-decoration:underline;">Privacy Statement</a></font><br><font style="font-family:arial,sans-serif; font-size:15px; font-weight: none; color:#FFF"> Copyright 2000-2024 ProcessMaker Inc. All rights reserved.</font></p>
  </div>
  
</div> <!-- /.block -->
</div>
 <!-- /.region -->
</div>
         
   <!-- <div id="copyright">
      <p class="copyright">Copyright &copy; 2024, Documentation@ProcessMaker </p>
      <!--<p class="credits"> Developed by  <a href="http://www.zymphonies.com">Zymphonies</a></p>
      <div class="clear"></div>
    </div>-->
  </div>
  
  </div>
</div>

</div>

<script type="text/javascript">
  /* <![CDATA[ */
  document.write (
    '<img src="https://marketing.processmaker.com/acton/bn/3812/visitor.gif?ts='+ new Date().getTime()+ '&ref='+escape(document.referrer) + '">'
  );
  /* ]]> */
</script>
  
</div>
    <style>
    .center-div{
        width: 100%;        
        margin: 0 auto;
        z-index:10000;
        position:fixed;
        bottom: 0px;
        cursor:pointer;
    }
    .round-popup{
        margin:0 auto;
        font-family: 'Montserrat', sans-serif;
        font-size: 15px;
        font-weight: lighter;
        width: 412px;
        height: 50px;
        padding-top: 7px;
        text-align: center;
        position:relative;
    }
    .round-popup-button{
        position:absolute;
        top: 11px;
        right: 15px;
        background: transparent;
        border:none;
        font-size:15px;
        font-weight:normal;
        line-height:20px;
        width:20px;
        height:20px;
        padding:0;
    }
    .round-background-blue{
        background: url('http://www.processmaker.com/uploads/blue.png')no-repeat;
        color:white;
        
    }
    #box-pm31-button-blue{
        color: rgba(255, 255, 255, 0.5);
    }
    
    #box-pm31-button-blue:active,#box-pm31-button-blue:focus{
        border:none;
        outline:none;
    }
    .round-background-blue a{
        color: white!important;
        text-decoration: none;
        font-size: 15px;
        line-height:45px;
        font-family:Montserrat, sans-serif;
    }
    .round-background-blue span{
        font-weight: bold;
    }
    /*WHITE background*/
    .round-background-white{
        background: url('http://www.processmaker.com/uploads/white.png')no-repeat;
        background-position-x: -9px;        
        color: #3397E1;
    }
    .round-background-white a:hover{
        color: #3397E1!important;
        text-decoration: none;
        font-size: 15px;
    }
    #box-pm31-button-white{
        color: rgba(51, 151, 225, 0.7);
    }
</style>
    <div id="box-pm31" class="center-div" style="display:none;">
        <div class="round-popup round-background-blue">
            <a onclick="ga('send', 'event', 'WikiBlueBanner','click','PM31Release');" href="http://www.processmaker.com/download-processmaker-landing-page">
                <span>ProcessMaker 3.1</span> is Here! Download Now <span style="font-size:20px;font-weigth:normal;"></span>
            </a>
            <button id="box-pm31-button-blue" class="round-popup-button">&times;</button>
        </div>
    </div>
    <script>

function pmCreateCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function pmReadCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function pmEraseCookie(name) {
    createCookie(name,"",-1);
}



     jQuery(document).ready(function( $ ) {
        $('#box-pm31-button-blue').click(function(e){
                e.stopPropagation();
                $('#box-pm31').slideUp('fast');
                pmCreateCookie('ppcookie','val',10);
            });
        });
        jQuery(window).load(function() {
            if(pmReadCookie('ppcookie') !== 'val'){
                //jQuery('#box-pm31').delay( 2000 ).slideDown('slow');
            }
        });
    </script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">

<script type="text/javascript">
  (function() {
    window._pa = window._pa || {};
    // _pa.orderId = "myOrderId"; // OPTIONAL: attach unique conversion identifier to conversions
    // _pa.revenue = "19.99"; // OPTIONAL: attach dynamic purchase values to conversions
    // _pa.productId = "myProductId"; // OPTIONAL: Include product ID for use with dynamic ads
    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;
    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + "//tag.marinsm.com/serve/586a7ec3a2ae6b728400003d.js";
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);
  })();
</script>

</body>
</html>
